<!DOCTYPE html>
<head>
<meta charset="UTF-8">
<style>
.r1 {font-style: italic}
.r2 {font-weight: bold}
.r3 {color: #000080; text-decoration-color: #000080; font-weight: bold}
.r4 {color: #87af00; text-decoration-color: #87af00; font-weight: bold}
.r5 {color: #7f7f7f; text-decoration-color: #7f7f7f; font-weight: bold}
.r6 {color: #000080; text-decoration-color: #000080; font-weight: bold; font-style: italic}
.r7 {color: #87af00; text-decoration-color: #87af00; font-weight: bold; font-style: italic}
.r8 {color: #7f7f7f; text-decoration-color: #7f7f7f}
.r9 {color: #000080; text-decoration-color: #000080}
.r10 {color: #87af00; text-decoration-color: #87af00}
.r11 {color: #ba2121; text-decoration-color: #ba2121; background-color: #f8f8f8}
.r12 {background-color: #f8f8f8}
.r13 {color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold}
.r14 {color: #000000; text-decoration-color: #000000; background-color: #f8f8f8}
.r15 {color: #0000ff; text-decoration-color: #0000ff; background-color: #f8f8f8; font-weight: bold}
.r16 {color: #800000; text-decoration-color: #800000; font-weight: bold}
.r17 {color: #0000ff; text-decoration-color: #0000ff; background-color: #f8f8f8}
.r18 {color: #008000; text-decoration-color: #008000; background-color: #f8f8f8}
.r19 {color: #666666; text-decoration-color: #666666; background-color: #f8f8f8}
.r20 {color: #aa22ff; text-decoration-color: #aa22ff; background-color: #f8f8f8; font-weight: bold}
.r21 {color: #408080; text-decoration-color: #408080; background-color: #f8f8f8; font-style: italic}
.r22 {color: #bb6688; text-decoration-color: #bb6688; background-color: #f8f8f8; font-weight: bold}
.r23 {color: #d2413a; text-decoration-color: #d2413a; background-color: #f8f8f8; font-weight: bold}
.r24 {color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8}
.r25 {color: #0000ff; text-decoration-color: #0000ff}
body {
    color: #000000;
    background-color: #ffffff;
}
</style>
</head>
<html>
<body>
    <code>
        <pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span class="r1"> C:\Users\kosh\OneDrive\Documents\Visual Studio 2017\Projects\CADETMatch\CADETMatch\cache.py: % of time =  60.19% out of   1.41s.  </span>
+---------------------------------------------------------------------------------------------------------------------------------+
|<span class="r2">      </span>|<span class="r3">Time</span><span class="r2">   </span>|<span class="r3">––––––</span><span class="r2"> </span>|<span class="r3">––––––</span><span class="r2"> </span>|<span class="r4">––––––</span><span class="r2"> </span>|<span class="r2">                                                                                          </span>|
|<span class="r2"> </span><span class="r5">Line</span><span class="r2"> </span>|<span class="r6">Python</span><span class="r2"> </span>|<span class="r6">native</span><span class="r2"> </span>|<span class="r6">system</span><span class="r2"> </span>|<span class="r7">GPU</span><span class="r2">    </span>|<span class="r2">C:\Users\kosh\OneDrive\Documents\Visual Studio 2017\Projects\CADETMatch\CADETMatch\cache… </span>|
|------+-------+-------+-------+-------+------------------------------------------------------------------------------------------|
|<span class="r8">    1 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r11">&quot;Cache module. Used to store per worker information so it does not need to be recalculate</span> |
|<span class="r8">    2 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">    3 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">multiprocessing</span><span class="r12">                                                                   </span> |
|<span class="r8">    4 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">os</span><span class="r12">                                                                                </span> |
|<span class="r8">    5 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">sys</span><span class="r12">                                                                               </span> |
|<span class="r8">    6 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">from</span><span class="r14"> </span><span class="r15">pathlib</span><span class="r14"> </span><span class="r13">import</span><span class="r14"> Path</span><span class="r12">                                                                 </span> |
|<span class="r8">    7 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">    8 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">jstyleson</span><span class="r12">                                                                         </span> |
|<span class="r8">    9 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">numpy</span><span class="r12">                                                                             </span> |
|<span class="r8">   10 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">from</span><span class="r14"> </span><span class="r15">cadet</span><span class="r14"> </span><span class="r13">import</span><span class="r14"> Cadet</span><span class="r12">                                                                  </span> |
|<span class="r8">   11 </span>|<span class="r16">   18%</span><span class="r9"> </span>|<span class="r16">   10%</span><span class="r9"> </span>|<span class="r9">  31%  </span>|<span class="r16"> 59%</span><span class="r10">   </span>|<span class="r13">from</span><span class="r14"> </span><span class="r15">sklearn</span><span class="r14"> </span><span class="r13">import</span><span class="r14"> preprocessing</span><span class="r12">                                                        </span> |
|<span class="r8">   12 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   13 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">CADETMatch.plugins</span><span class="r14"> </span><span class="r13">as</span><span class="r14"> </span><span class="r15">plugins</span><span class="r12">                                                     </span> |
|<span class="r8">   14 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   15 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">class</span><span class="r14"> </span><span class="r15">Node</span><span class="r14">:</span><span class="r12">                                                                              </span> |
|<span class="r8">   16 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">pass</span><span class="r12">                                                                                 </span> |
|<span class="r8">   17 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   18 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">class</span><span class="r14"> </span><span class="r15">Cache</span><span class="r14">:</span><span class="r12">                                                                             </span> |
|<span class="r8">   19 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">def</span><span class="r14"> </span><span class="r17">__init__</span><span class="r14">(</span><span class="r18">self</span><span class="r14">):</span><span class="r12">                                                                  </span> |
|<span class="r8">   20 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                             </span> |
|<span class="r8">   21 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">headers </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                              </span> |
|<span class="r8">   22 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">numGoals </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                             </span> |
|<span class="r8">   23 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">target </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                               </span> |
|<span class="r8">   24 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">MIN_VALUE </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                            </span> |
|<span class="r8">   25 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">MAX_VALUE </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                            </span> |
|<span class="r8">   26 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">badScore </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                             </span> |
|<span class="r8">   27 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">WORST </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                                </span> |
|<span class="r8">   28 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">json_path </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                            </span> |
|<span class="r8">   29 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">adaptive </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                             </span> |
|<span class="r8">   30 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">parameter_indexes </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                    </span> |
|<span class="r8">   31 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">score_indexes </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                        </span> |
|<span class="r8">   32 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">score_headers </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                        </span> |
|<span class="r8">   33 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">graphGenerateTime </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                    </span> |
|<span class="r8">   34 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">graphMetaTime </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                        </span> |
|<span class="r8">   35 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">lastGraphTime </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                        </span> |
|<span class="r8">   36 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">lastMetaTime </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                         </span> |
|<span class="r8">   37 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">metaResultsOnly </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1</span><span class="r12">                                                         </span> |
|<span class="r8">   38 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">stallGenerations </span><span class="r19">=</span><span class="r14"> </span><span class="r19">10</span><span class="r12">                                                       </span> |
|<span class="r8">   39 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">stallCorrect </span><span class="r19">=</span><span class="r14"> </span><span class="r19">5</span><span class="r12">                                                            </span> |
|<span class="r8">   40 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">progressCorrect </span><span class="r19">=</span><span class="r14"> </span><span class="r19">5</span><span class="r12">                                                         </span> |
|<span class="r8">   41 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">lastProgressGeneration </span><span class="r19">=</span><span class="r14"> </span><span class="r19">-1</span><span class="r12">                                                 </span> |
|<span class="r8">   42 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">generationsOfProgress </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                                                   </span> |
|<span class="r8">   43 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">fullTrainingData </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                                                        </span> |
|<span class="r8">   44 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">normalizeOutput </span><span class="r19">=</span><span class="r14"> </span><span class="r13">True</span><span class="r12">                                                      </span> |
|<span class="r8">   45 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">sobolGeneration </span><span class="r19">=</span><span class="r14"> </span><span class="r13">True</span><span class="r12">                                                      </span> |
|<span class="r8">   46 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">continueMCMC </span><span class="r19">=</span><span class="r14"> </span><span class="r13">False</span><span class="r12">                                                        </span> |
|<span class="r8">   47 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">errorBias </span><span class="r19">=</span><span class="r14"> </span><span class="r13">True</span><span class="r12">                                                            </span> |
|<span class="r8">   48 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">altScores </span><span class="r19">=</span><span class="r14"> </span><span class="r13">False</span><span class="r12">                                                           </span> |
|<span class="r8">   49 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">altScoreNames </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                          </span> |
|<span class="r8">   50 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">progress_headers </span><span class="r19">=</span><span class="r14"> [</span><span class="r12">                                                        </span> |
|<span class="r8">   51 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Generation&quot;</span><span class="r14">,</span><span class="r12">                                                                </span> |
|<span class="r8">   52 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Population&quot;</span><span class="r14">,</span><span class="r12">                                                                </span> |
|<span class="r8">   53 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Dimension In&quot;</span><span class="r14">,</span><span class="r12">                                                              </span> |
|<span class="r8">   54 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Dimension Out&quot;</span><span class="r14">,</span><span class="r12">                                                             </span> |
|<span class="r8">   55 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Search Method&quot;</span><span class="r14">,</span><span class="r12">                                                             </span> |
|<span class="r8">   56 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Meta Front&quot;</span><span class="r14">,</span><span class="r12">                                                                </span> |
|<span class="r8">   57 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Meta Min&quot;</span><span class="r14">,</span><span class="r12">                                                                  </span> |
|<span class="r8">   58 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Meta Product&quot;</span><span class="r14">,</span><span class="r12">                                                              </span> |
|<span class="r8">   59 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Meta Mean&quot;</span><span class="r14">,</span><span class="r12">                                                                 </span> |
|<span class="r8">   60 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Meta SSE&quot;</span><span class="r14">,</span><span class="r12">                                                                  </span> |
|<span class="r8">   61 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Meta RMSE&quot;</span><span class="r14">,</span><span class="r12">                                                                 </span> |
|<span class="r8">   62 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Elapsed Time&quot;</span><span class="r14">,</span><span class="r12">                                                              </span> |
|<span class="r8">   63 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Generation Time&quot;</span><span class="r14">,</span><span class="r12">                                                           </span> |
|<span class="r8">   64 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Total CPU Time&quot;</span><span class="r14">,</span><span class="r12">                                                            </span> |
|<span class="r8">   65 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Last Progress Generation&quot;</span><span class="r14">,</span><span class="r12">                                                  </span> |
|<span class="r8">   66 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Generations of Progress&quot;</span><span class="r14">,</span><span class="r12">                                                   </span> |
|<span class="r8">   67 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        ]</span><span class="r12">                                                                                </span> |
|<span class="r8">   68 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">eval </span><span class="r19">=</span><span class="r14"> Node()</span><span class="r12">                                                               </span> |
|<span class="r8">   69 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   70 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">def</span><span class="r14"> </span><span class="r17">setup_dir</span><span class="r14">(</span><span class="r18">self</span><span class="r14">, json_path):</span><span class="r12">                                                      </span> |
|<span class="r8">   71 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">json_path </span><span class="r19">=</span><span class="r14"> json_path</span><span class="r12">                                                       </span> |
|<span class="r8">   72 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">setupSettings()</span><span class="r12">                                                             </span> |
|<span class="r8">   73 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   74 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        baseDir </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;baseDir&quot;</span><span class="r14">, </span><span class="r13">None</span><span class="r14">)</span><span class="r12">                                     </span> |
|<span class="r8">   75 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> baseDir </span><span class="r20">is</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r13">None</span><span class="r14">:</span><span class="r12">                                                          </span> |
|<span class="r8">   76 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            os</span><span class="r19">.</span><span class="r14">chdir(baseDir)</span><span class="r12">                                                            </span> |
|<span class="r8">   77 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> Path(baseDir) </span><span class="r19">/</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]</span><span class="r12">    </span> |
|<span class="r8">   78 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   79 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21"># create used paths in settings, only the root process will make the directories </span> |
|<span class="r8">   80 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirEvo&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;evo&quot;</span><span class="r12">       </span> |
|<span class="r8">   81 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMeta&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;meta&quot;</span><span class="r12">     </span> |
|<span class="r8">   82 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirGrad&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;grad&quot;</span><span class="r12">     </span> |
|<span class="r8">   83 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMisc&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;misc&quot;</span><span class="r12">     </span> |
|<span class="r8">   84 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirSpace&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;space&quot;</span><span class="r12">   </span> |
|<span class="r8">   85 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirProgress&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> (</span><span class="r12">                                          </span> |
|<span class="r8">   86 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;progress&quot;</span><span class="r12">                               </span> |
|<span class="r8">   87 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        )</span><span class="r12">                                                                                </span> |
|<span class="r8">   88 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirLog&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;log&quot;</span><span class="r12">       </span> |
|<span class="r8">   89 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMCMC&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;mcmc&quot;</span><span class="r12">     </span> |
|<span class="r8">   90 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirBase&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">])</span><span class="r12">              </span> |
|<span class="r8">   91 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   92 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">def</span><span class="r14"> </span><span class="r17">setup</span><span class="r14">(</span><span class="r18">self</span><span class="r14">, json_path, load_plugins</span><span class="r19">=</span><span class="r13">True</span><span class="r14">):</span><span class="r12">                                       </span> |
|<span class="r8">   93 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r11">&quot;setup the cache based on the json file being used&quot;</span><span class="r12">                              </span> |
|<span class="r8">   94 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> load_plugins:</span><span class="r12">                                                                 </span> |
|<span class="r8">   95 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">scores </span><span class="r19">=</span><span class="r14"> plugins</span><span class="r19">.</span><span class="r14">get_plugins(</span><span class="r11">&quot;scores&quot;</span><span class="r14">)</span><span class="r12">                                  </span> |
|<span class="r8">   96 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">search </span><span class="r19">=</span><span class="r14"> plugins</span><span class="r19">.</span><span class="r14">get_plugins(</span><span class="r11">&quot;search&quot;</span><span class="r14">)</span><span class="r12">                                  </span> |
|<span class="r8">   97 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">transforms </span><span class="r19">=</span><span class="r14"> plugins</span><span class="r19">.</span><span class="r14">get_plugins(</span><span class="r11">&quot;transform&quot;</span><span class="r14">)</span><span class="r12">                           </span> |
|<span class="r8">   98 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   99 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> json_path </span><span class="r19">!=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">json_path:</span><span class="r12">                                                  </span> |
|<span class="r8">  100 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">json_path </span><span class="r19">=</span><span class="r14"> json_path</span><span class="r12">                                                   </span> |
|<span class="r8">  101 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">setupSettings()</span><span class="r12">                                                         </span> |
|<span class="r8">  102 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  103 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            baseDir </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;baseDir&quot;</span><span class="r14">, </span><span class="r13">None</span><span class="r14">)</span><span class="r12">                                 </span> |
|<span class="r8">  104 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> baseDir </span><span class="r20">is</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r13">None</span><span class="r14">:</span><span class="r12">                                                      </span> |
|<span class="r8">  105 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                os</span><span class="r19">.</span><span class="r14">chdir(baseDir)</span><span class="r12">                                                        </span> |
|<span class="r8">  106 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> (</span><span class="r12">                                          </span> |
|<span class="r8">  107 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    Path(baseDir) </span><span class="r19">/</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]</span><span class="r12">                          </span> |
|<span class="r8">  108 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                )</span><span class="r12">                                                                        </span> |
|<span class="r8">  109 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  110 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirEvo&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;evo&quot;</span><span class="r12">   </span> |
|<span class="r8">  111 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMeta&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;meta&quot;</span><span class="r12"> </span> |
|<span class="r8">  112 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirGrad&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;grad&quot;</span><span class="r12"> </span> |
|<span class="r8">  113 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMisc&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;misc&quot;</span><span class="r12"> </span> |
|<span class="r8">  114 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirSpace&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> (</span><span class="r12">                                         </span> |
|<span class="r8">  115 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;space&quot;</span><span class="r12">                              </span> |
|<span class="r8">  116 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            )</span><span class="r12">                                                                            </span> |
|<span class="r8">  117 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirProgress&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> (</span><span class="r12">                                      </span> |
|<span class="r8">  118 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;progress&quot;</span><span class="r12">                           </span> |
|<span class="r8">  119 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            )</span><span class="r12">                                                                            </span> |
|<span class="r8">  120 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirLog&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;log&quot;</span><span class="r12">   </span> |
|<span class="r8">  121 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMCMC&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;mcmc&quot;</span><span class="r12"> </span> |
|<span class="r8">  122 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirBase&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">])</span><span class="r12">          </span> |
|<span class="r8">  123 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  124 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">abstolFactor </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;abstolFactor&quot;</span><span class="r14">, </span><span class="r19">1e-3</span><span class="r14">)</span><span class="r12">                      </span> |
|<span class="r8">  125 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">abstolFactorGrad </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;abstolFactorGrad&quot;</span><span class="r14">, </span><span class="r19">1e-7</span><span class="r14">)</span><span class="r12">              </span> |
|<span class="r8">  126 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">abstolFactorGradMax </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;abstolFactorGradMax&quot;</span><span class="r14">, </span><span class="r19">1e-10</span><span class="r14">)</span><span class="r12">       </span> |
|<span class="r8">  127 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">dynamicTolerance </span><span class="r19">=</span><span class="r14"> </span><span class="r18">bool</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;dynamicTolerance&quot;</span><span class="r14">, </span><span class="r13">False</span><span class="r14">))</span><span class="r12">       </span> |
|<span class="r8">  128 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">gradFineStop </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;gradFineStop&quot;</span><span class="r14">, </span><span class="r19">1e-14</span><span class="r14">)</span><span class="r12">                     </span> |
|<span class="r8">  129 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  130 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21"># When using only SSE based scores this changes if the scores are merged or left </span> |
|<span class="r8">  131 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">MultiObjectiveSSE </span><span class="r19">=</span><span class="r14"> </span><span class="r18">bool</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;MultiObjectiveSSE&quot;</span><span class="r14">, </span><span class="r13">False</span><span class="r14">))</span><span class="r12">     </span> |
|<span class="r8">  132 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  133 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">errorBias </span><span class="r19">=</span><span class="r14"> </span><span class="r18">bool</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;errorBias&quot;</span><span class="r14">, </span><span class="r13">True</span><span class="r14">))</span><span class="r12">                      </span> |
|<span class="r8">  134 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  135 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        Cadet</span><span class="r19">.</span><span class="r14">cadet_path </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;CADETPath&quot;</span><span class="r14">]</span><span class="r12">                                    </span> |
|<span class="r8">  136 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  137 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">normalizeOutput </span><span class="r19">=</span><span class="r14"> </span><span class="r18">bool</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;normalizeOutput&quot;</span><span class="r14">, </span><span class="r13">False</span><span class="r14">))</span><span class="r12">         </span> |
|<span class="r8">  138 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">connectionNumberEntries </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(</span><span class="r12">                                              </span> |
|<span class="r8">  139 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;connectionNumberEntries&quot;</span><span class="r14">, </span><span class="r19">5</span><span class="r14">)</span><span class="r12">                              </span> |
|<span class="r8">  140 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        )</span><span class="r12">                                                                                </span> |
|<span class="r8">  141 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  142 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">parameters </span><span class="r19">=</span><span class="r14"> [</span><span class="r12">                                                              </span> |
|<span class="r8">  143 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">transforms[parameter[</span><span class="r11">&quot;transform&quot;</span><span class="r14">]](parameter, </span><span class="r18">self</span><span class="r14">)</span><span class="r12">                     </span> |
|<span class="r8">  144 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">for</span><span class="r14"> parameter </span><span class="r20">in</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;parameters&quot;</span><span class="r14">]</span><span class="r12">                                 </span> |
|<span class="r8">  145 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        ]</span><span class="r12">                                                                                </span> |
|<span class="r8">  146 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">setupHeaders()</span><span class="r12">                                                              </span> |
|<span class="r8">  147 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">setupTarget()</span><span class="r12">                                                               </span> |
|<span class="r8">  148 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">setupMinMax()</span><span class="r12">                                                               </span> |
|<span class="r8">  149 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  150 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">WORST </span><span class="r19">=</span><span class="r14"> [</span><span class="r18">self</span><span class="r19">.</span><span class="r14">badScore] </span><span class="r19">*</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">numGoalsOrig</span><span class="r12">                                 </span> |
|<span class="r8">  151 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">WORST_META </span><span class="r19">=</span><span class="r14"> [</span><span class="r19">1e308</span><span class="r14">] </span><span class="r19">*</span><span class="r14"> </span><span class="r18">len</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">meta_headers)</span><span class="r12">                               </span> |
|<span class="r8">  152 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  153 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;transform&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">transform</span><span class="r12">                                      </span> |
|<span class="r8">  154 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  155 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">correct </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                              </span> |
|<span class="r8">  156 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;correct&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings:</span><span class="r12">                                                   </span> |
|<span class="r8">  157 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">correct_transform </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;correct&quot;</span><span class="r14">])</span><span class="r12">               </span> |
|<span class="r8">  158 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">correct </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array(</span><span class="r12">                                                  </span> |
|<span class="r8">  159 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                [</span><span class="r12">                                                                        </span> |
|<span class="r8">  160 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    f(v)</span><span class="r12">                                                                 </span> |
|<span class="r8">  161 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r13">for</span><span class="r14"> f, v </span><span class="r20">in</span><span class="r14"> </span><span class="r18">zip</span><span class="r14">(</span><span class="r12">                                                     </span> |
|<span class="r8">  162 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;transform&quot;</span><span class="r14">], </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;correct&quot;</span><span class="r14">]</span><span class="r12">             </span> |
|<span class="r8">  163 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    )</span><span class="r12">                                                                    </span> |
|<span class="r8">  164 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                ]</span><span class="r12">                                                                        </span> |
|<span class="r8">  165 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            )</span><span class="r12">                                                                            </span> |
|<span class="r8">  166 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  167 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">error_path </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirBase&quot;</span><span class="r14">], </span><span class="r11">&quot;error.csv&quot;</span><span class="r14">)</span><span class="r12">             </span> |
|<span class="r8">  168 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  169 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">graphGenerateTime </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;graphGenerateTime&quot;</span><span class="r14">, </span><span class="r19">3600</span><span class="r14">))</span><span class="r12">       </span> |
|<span class="r8">  170 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">graphMetaTime </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;graphMetaTime&quot;</span><span class="r14">, </span><span class="r19">1200</span><span class="r14">))</span><span class="r12">               </span> |
|<span class="r8">  171 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  172 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">metaResultsOnly </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;metaResultsOnly&quot;</span><span class="r14">, </span><span class="r19">1</span><span class="r14">)</span><span class="r12">                   </span> |
|<span class="r8">  173 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">stallGenerations </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;stallGenerations&quot;</span><span class="r14">, </span><span class="r19">10</span><span class="r14">))</span><span class="r12">           </span> |
|<span class="r8">  174 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">stallCorrect </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;stallCorrect&quot;</span><span class="r14">, </span><span class="r19">5</span><span class="r14">))</span><span class="r12">                    </span> |
|<span class="r8">  175 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">progressCorrect </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;progressCorrect&quot;</span><span class="r14">, </span><span class="r19">5</span><span class="r14">))</span><span class="r12">              </span> |
|<span class="r8">  176 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">progress_elapsed_time </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(</span><span class="r12">                                                </span> |
|<span class="r8">  177 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;progress_elapsed_time&quot;</span><span class="r14">, </span><span class="r19">300</span><span class="r14">)</span><span class="r12">                              </span> |
|<span class="r8">  178 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        )</span><span class="r12">                                                                                </span> |
|<span class="r8">  179 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  180 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">fullTrainingData </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;fullTrainingData&quot;</span><span class="r14">, </span><span class="r19">0</span><span class="r14">))</span><span class="r12">            </span> |
|<span class="r8">  181 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  182 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">sobolGeneration </span><span class="r19">=</span><span class="r14"> </span><span class="r18">bool</span><span class="r14">(</span><span class="r12">                                                     </span> |
|<span class="r8">  183 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;soboloGeneration&quot;</span><span class="r14">, </span><span class="r13">True</span><span class="r14">)</span><span class="r12">                                  </span> |
|<span class="r8">  184 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        ) </span><span class="r20">or</span><span class="r14"> </span><span class="r18">bool</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;sobolGeneration&quot;</span><span class="r14">, </span><span class="r13">True</span><span class="r14">))</span><span class="r12">                            </span> |
|<span class="r8">  185 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  186 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">continueMCMC </span><span class="r19">=</span><span class="r14"> </span><span class="r18">bool</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;continueMCMC&quot;</span><span class="r14">, </span><span class="r13">False</span><span class="r14">))</span><span class="r12">               </span> |
|<span class="r8">  187 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">MCMCTauMult </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;MCMCTauMult&quot;</span><span class="r14">, </span><span class="r19">50</span><span class="r14">))</span><span class="r12">                     </span> |
|<span class="r8">  188 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  189 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">cross_eta </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;cross_eta&quot;</span><span class="r14">, </span><span class="r19">30</span><span class="r14">))</span><span class="r12">                         </span> |
|<span class="r8">  190 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">mutate_eta </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;mutate_eta&quot;</span><span class="r14">, </span><span class="r19">70</span><span class="r14">))</span><span class="r12">                       </span> |
|<span class="r8">  191 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  192 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">gradVector </span><span class="r19">=</span><span class="r14"> </span><span class="r18">bool</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;gradVector&quot;</span><span class="r14">, </span><span class="r19">0</span><span class="r14">))</span><span class="r12">                       </span> |
|<span class="r8">  193 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  194 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">tempDir </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;tempDir&quot;</span><span class="r14">, </span><span class="r13">None</span><span class="r14">)</span><span class="r12">                                </span> |
|<span class="r8">  195 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">graphType </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;graphType&quot;</span><span class="r14">, </span><span class="r19">1</span><span class="r14">)</span><span class="r12">                               </span> |
|<span class="r8">  196 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  197 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">checkpointInterval </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;checkpointInterval&quot;</span><span class="r14">, </span><span class="r19">30</span><span class="r14">)</span><span class="r12">            </span> |
|<span class="r8">  198 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">setupMetaMask()</span><span class="r12">                                                             </span> |
|<span class="r8">  199 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  200 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">debugWrite </span><span class="r19">=</span><span class="r14"> </span><span class="r18">bool</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;debugWrite&quot;</span><span class="r14">, </span><span class="r13">False</span><span class="r14">))</span><span class="r12">                   </span> |
|<span class="r8">  201 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  202 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">finalGradRefinement </span><span class="r19">=</span><span class="r14"> </span><span class="r18">bool</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;finalGradRefinement&quot;</span><span class="r14">, </span><span class="r13">False</span><span class="r14">))</span><span class="r12"> </span> |
|<span class="r8">  203 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  204 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">multiStartPercent </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;multiStartPercent&quot;</span><span class="r14">, </span><span class="r19">0.1</span><span class="r14">)</span><span class="r12">             </span> |
|<span class="r8">  205 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  206 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;MCMCpopulation&quot;</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings:</span><span class="r12">                                        </span> |
|<span class="r8">  207 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;MCMCpopulation&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;population&quot;</span><span class="r14">]</span><span class="r12">                </span> |
|<span class="r8">  208 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  209 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">def</span><span class="r14"> </span><span class="r17">resetTransform</span><span class="r14">(</span><span class="r18">self</span><span class="r14">, json_path):</span><span class="r12">                                                 </span> |
|<span class="r8">  210 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> json_path </span><span class="r19">!=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">json_path:</span><span class="r12">                                                  </span> |
|<span class="r8">  211 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">json_path </span><span class="r19">=</span><span class="r14"> json_path</span><span class="r12">                                                   </span> |
|<span class="r8">  212 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  213 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            settings_file </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">json_path)</span><span class="r12">                                         </span> |
|<span class="r8">  214 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">with</span><span class="r14"> settings_file</span><span class="r19">.</span><span class="r14">open() </span><span class="r13">as</span><span class="r14"> json_data:</span><span class="r12">                                      </span> |
|<span class="r8">  215 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                settings </span><span class="r19">=</span><span class="r14"> jstyleson</span><span class="r19">.</span><span class="r14">load(json_data)</span><span class="r12">                                     </span> |
|<span class="r8">  216 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  217 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;parameters&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> settings[</span><span class="r11">&quot;parameters&quot;</span><span class="r14">]</span><span class="r12">                     </span> |
|<span class="r8">  218 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  219 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">parameters </span><span class="r19">=</span><span class="r14"> [</span><span class="r12">                                                      </span> |
|<span class="r8">  220 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r18">self</span><span class="r19">.</span><span class="r14">transforms[parameter[</span><span class="r11">&quot;transform&quot;</span><span class="r14">]](parameter, </span><span class="r18">self</span><span class="r14">)</span><span class="r12">             </span> |
|<span class="r8">  221 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r13">for</span><span class="r14"> parameter </span><span class="r20">in</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;parameters&quot;</span><span class="r14">]</span><span class="r12">                         </span> |
|<span class="r8">  222 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                ]</span><span class="r12">                                                                        </span> |
|<span class="r8">  223 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">setupHeaders()</span><span class="r12">                                                      </span> |
|<span class="r8">  224 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">setupTarget()</span><span class="r12">                                                       </span> |
|<span class="r8">  225 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">setupMinMax()</span><span class="r12">                                                       </span> |
|<span class="r8">  226 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  227 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">WORST </span><span class="r19">=</span><span class="r14"> [</span><span class="r18">self</span><span class="r19">.</span><span class="r14">badScore] </span><span class="r19">*</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">numGoalsOrig</span><span class="r12">                         </span> |
|<span class="r8">  228 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  229 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;transform&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">transform</span><span class="r12">                              </span> |
|<span class="r8">  230 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  231 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">correct </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                      </span> |
|<span class="r8">  232 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;correct&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings:</span><span class="r12">                                           </span> |
|<span class="r8">  233 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r18">self</span><span class="r19">.</span><span class="r14">correct </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array(</span><span class="r12">                                          </span> |
|<span class="r8">  234 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        [</span><span class="r12">                                                                </span> |
|<span class="r8">  235 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                            f(v)</span><span class="r12">                                                         </span> |
|<span class="r8">  236 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                            </span><span class="r13">for</span><span class="r14"> f, v </span><span class="r20">in</span><span class="r14"> </span><span class="r18">zip</span><span class="r14">(</span><span class="r12">                                             </span> |
|<span class="r8">  237 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;transform&quot;</span><span class="r14">], </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;correct&quot;</span><span class="r14">]</span><span class="r12">     </span> |
|<span class="r8">  238 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                            )</span><span class="r12">                                                            </span> |
|<span class="r8">  239 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        ]</span><span class="r12">                                                                </span> |
|<span class="r8">  240 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    )</span><span class="r12">                                                                    </span> |
|<span class="r8">  241 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  242 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">def</span><span class="r14"> </span><span class="r17">setupMetaMask</span><span class="r14">(</span><span class="r18">self</span><span class="r14">):</span><span class="r12">                                                             </span> |
|<span class="r8">  243 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        meta_mask_seq </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                               </span> |
|<span class="r8">  244 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  245 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> idx, experiment </span><span class="r20">in</span><span class="r14"> </span><span class="r18">enumerate</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;experiments&quot;</span><span class="r14">]):</span><span class="r12">                  </span> |
|<span class="r8">  246 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">for</span><span class="r14"> feature </span><span class="r20">in</span><span class="r14"> experiment[</span><span class="r11">&quot;scores&quot;</span><span class="r14">]:</span><span class="r12">                                         </span> |
|<span class="r8">  247 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">if</span><span class="r14"> feature[</span><span class="r11">&quot;type&quot;</span><span class="r14">] </span><span class="r20">in</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">scores:</span><span class="r12">                                       </span> |
|<span class="r8">  248 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    settings </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">scores[feature[</span><span class="r11">&quot;type&quot;</span><span class="r14">]]</span><span class="r19">.</span><span class="r14">get_settings(feature)</span><span class="r12">        </span> |
|<span class="r8">  249 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    meta_mask </span><span class="r19">=</span><span class="r14"> settings</span><span class="r19">.</span><span class="r14">meta_mask</span><span class="r12">                                       </span> |
|<span class="r8">  250 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    count </span><span class="r19">=</span><span class="r14"> settings</span><span class="r19">.</span><span class="r14">count</span><span class="r12">                                               </span> |
|<span class="r8">  251 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r21"># multiprocessing.get_logger().info(&#x27;%s %s %s %s&#x27;, idx, feature, meta</span> |
|<span class="r8">  252 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  253 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    meta_mask_seq</span><span class="r19">.</span><span class="r14">extend(</span><span class="r12">                                                </span> |
|<span class="r8">  254 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        [</span><span class="r12">                                                                </span> |
|<span class="r8">  255 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                            meta_mask,</span><span class="r12">                                                   </span> |
|<span class="r8">  256 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        ]</span><span class="r12">                                                                </span> |
|<span class="r8">  257 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        </span><span class="r19">*</span><span class="r14"> count</span><span class="r12">                                                          </span> |
|<span class="r8">  258 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    )</span><span class="r12">                                                                    </span> |
|<span class="r8">  259 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21"># multiprocessing.get_logger().info(&quot;%s&quot;, meta_mask_seq)</span><span class="r12">                         </span> |
|<span class="r8">  260 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">meta_mask </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array(meta_mask_seq)</span><span class="r12">                                      </span> |
|<span class="r8">  261 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  262 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">def</span><span class="r14"> </span><span class="r17">setupSettings</span><span class="r14">(</span><span class="r18">self</span><span class="r14">):</span><span class="r12">                                                             </span> |
|<span class="r8">  263 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        settings_file </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">json_path)</span><span class="r12">                                             </span> |
|<span class="r8">  264 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">with</span><span class="r14"> settings_file</span><span class="r19">.</span><span class="r14">open() </span><span class="r13">as</span><span class="r14"> json_data:</span><span class="r12">                                          </span> |
|<span class="r8">  265 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings </span><span class="r19">=</span><span class="r14"> jstyleson</span><span class="r19">.</span><span class="r14">load(json_data)</span><span class="r12">                                    </span> |
|<span class="r8">  266 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  267 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;CSV&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings:</span><span class="r12">                                                   </span> |
|<span class="r8">  268 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;csv&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;CSV&quot;</span><span class="r14">]</span><span class="r12">                              </span> |
|<span class="r8">  269 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;csv&quot;</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings:</span><span class="r12">                                               </span> |
|<span class="r8">  270 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;csv&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r11">&quot;results.csv&quot;</span><span class="r12">                                     </span> |
|<span class="r8">  271 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  272 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r21">#convert features to scores</span><span class="r12">                                                  </span> |
|<span class="r8">  273 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">for</span><span class="r14"> experiment </span><span class="r20">in</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&#x27;experiments&#x27;</span><span class="r14">]:</span><span class="r12">                              </span> |
|<span class="r8">  274 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;features&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> experiment:</span><span class="r12">                                             </span> |
|<span class="r8">  275 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    experiment[</span><span class="r11">&#x27;scores&#x27;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> experiment[</span><span class="r11">&#x27;features&#x27;</span><span class="r14">]</span><span class="r12">                        </span> |
|<span class="r8">  276 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  277 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r13">for</span><span class="r14"> score </span><span class="r20">in</span><span class="r14"> experiment[</span><span class="r11">&#x27;scores&#x27;</span><span class="r14">]:</span><span class="r12">                                   </span> |
|<span class="r8">  278 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;isotherm&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> score:</span><span class="r12">                                          </span> |
|<span class="r8">  279 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                            score[</span><span class="r11">&#x27;output_path&#x27;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> score[</span><span class="r11">&#x27;isotherm&#x27;</span><span class="r14">]</span><span class="r12">                     </span> |
|<span class="r8">  280 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  281 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;isotherm&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> experiment:</span><span class="r12">                                             </span> |
|<span class="r8">  282 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    experiment[</span><span class="r11">&quot;output_path&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> experiment[</span><span class="r11">&quot;isotherm&quot;</span><span class="r14">]</span><span class="r12">                   </span> |
|<span class="r8">  283 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  284 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;featuresAlt&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> experiment:</span><span class="r12">                                          </span> |
|<span class="r8">  285 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    experiment[</span><span class="r11">&#x27;scoresAlt&#x27;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> experiment[</span><span class="r11">&#x27;featureAlt&#x27;</span><span class="r14">]</span><span class="r12">                   </span> |
|<span class="r8">  286 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  287 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r13">for</span><span class="r14"> score </span><span class="r20">in</span><span class="r14"> experiment[</span><span class="r11">&#x27;scoresAlt&#x27;</span><span class="r14">]:</span><span class="r12">                                </span> |
|<span class="r8">  288 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;isotherm&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> score:</span><span class="r12">                                          </span> |
|<span class="r8">  289 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                            score[</span><span class="r11">&#x27;output_path&#x27;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> score[</span><span class="r11">&#x27;isotherm&#x27;</span><span class="r14">]</span><span class="r12">                     </span> |
|<span class="r8">  290 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  291 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;searchMethod&quot;</span><span class="r14">] </span><span class="r19">==</span><span class="r14"> </span><span class="r11">&quot;Gradient&quot;</span><span class="r14">:</span><span class="r12">                              </span> |
|<span class="r8">  292 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;population&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1</span><span class="r12">                                          </span> |
|<span class="r8">  293 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                        </span> |
|<span class="r8">  294 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;population&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;population&quot;</span><span class="r14">])</span><span class="r12">           </span> |
|<span class="r8">  295 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  296 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;maxPopulation&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(</span><span class="r12">                                        </span> |
|<span class="r8">  297 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;maxPopulation&quot;</span><span class="r14">, </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;population&quot;</span><span class="r14">])</span><span class="r12">          </span> |
|<span class="r8">  298 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            )</span><span class="r12">                                                                            </span> |
|<span class="r8">  299 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;minPopulation&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(</span><span class="r12">                                        </span> |
|<span class="r8">  300 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;minPopulation&quot;</span><span class="r14">, </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;population&quot;</span><span class="r14">])</span><span class="r12">          </span> |
|<span class="r8">  301 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            )</span><span class="r12">                                                                            </span> |
|<span class="r8">  302 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  303 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;bootstrap&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings:</span><span class="r12">                                             </span> |
|<span class="r8">  304 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;bootstrap&quot;</span><span class="r14">][</span><span class="r11">&quot;samples&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(</span><span class="r12">                             </span> |
|<span class="r8">  305 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;bootstrap&quot;</span><span class="r14">][</span><span class="r11">&quot;samples&quot;</span><span class="r14">]</span><span class="r12">                                </span> |
|<span class="r8">  306 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                )</span><span class="r12">                                                                        </span> |
|<span class="r8">  307 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  308 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">def</span><span class="r14"> </span><span class="r17">setupHeaders</span><span class="r14">(</span><span class="r18">self</span><span class="r14">):</span><span class="r12">                                                              </span> |
|<span class="r8">  309 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">headers </span><span class="r19">=</span><span class="r14"> [</span><span class="r12">                                                                 </span> |
|<span class="r8">  310 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Time&quot;</span><span class="r14">,</span><span class="r12">                                                                      </span> |
|<span class="r8">  311 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Name&quot;</span><span class="r14">,</span><span class="r12">                                                                      </span> |
|<span class="r8">  312 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Method&quot;</span><span class="r14">,</span><span class="r12">                                                                    </span> |
|<span class="r8">  313 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Condition Number&quot;</span><span class="r14">,</span><span class="r12">                                                          </span> |
|<span class="r8">  314 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        ]</span><span class="r12">                                                                                </span> |
|<span class="r8">  315 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  316 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">numGoals </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                                                                </span> |
|<span class="r8">  317 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">badScore </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1.0</span><span class="r12">                                                              </span> |
|<span class="r8">  318 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  319 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        base </span><span class="r19">=</span><span class="r14"> </span><span class="r18">len</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">headers)</span><span class="r12">                                                         </span> |
|<span class="r8">  320 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  321 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        parameter_headers </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                           </span> |
|<span class="r8">  322 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        parameter_headers_actual </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                    </span> |
|<span class="r8">  323 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  324 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> parameter </span><span class="r20">in</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">parameters:</span><span class="r12">                                                </span> |
|<span class="r8">  325 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            parameter_headers</span><span class="r19">.</span><span class="r14">extend(parameter</span><span class="r19">.</span><span class="r14">getHeaders())</span><span class="r12">                             </span> |
|<span class="r8">  326 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            parameter_headers_actual</span><span class="r19">.</span><span class="r14">extend(parameter</span><span class="r19">.</span><span class="r14">getHeadersActual())</span><span class="r12">                </span> |
|<span class="r8">  327 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  328 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">parameter_headers </span><span class="r19">=</span><span class="r14"> parameter_headers</span><span class="r12">                                       </span> |
|<span class="r8">  329 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">parameter_headers_actual </span><span class="r19">=</span><span class="r14"> parameter_headers_actual</span><span class="r12">                         </span> |
|<span class="r8">  330 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  331 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">headers</span><span class="r19">.</span><span class="r14">extend(parameter_headers)</span><span class="r12">                                           </span> |
|<span class="r8">  332 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  333 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        parameters </span><span class="r19">=</span><span class="r14"> </span><span class="r18">len</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">headers)</span><span class="r12">                                                   </span> |
|<span class="r8">  334 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">parameter_indexes </span><span class="r19">=</span><span class="r14"> </span><span class="r18">list</span><span class="r14">(</span><span class="r18">range</span><span class="r14">(base, parameters))</span><span class="r12">                           </span> |
|<span class="r8">  335 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  336 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">score_headers </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                          </span> |
|<span class="r8">  337 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  338 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        badScore </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                    </span> |
|<span class="r8">  339 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  340 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> idx, experiment </span><span class="r20">in</span><span class="r14"> </span><span class="r18">enumerate</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;experiments&quot;</span><span class="r14">]):</span><span class="r12">                  </span> |
|<span class="r8">  341 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            experimentName </span><span class="r19">=</span><span class="r14"> experiment[</span><span class="r11">&quot;name&quot;</span><span class="r14">]</span><span class="r12">                                          </span> |
|<span class="r8">  342 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            experiment[</span><span class="r11">&quot;headers&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                   </span> |
|<span class="r8">  343 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">for</span><span class="r14"> feature </span><span class="r20">in</span><span class="r14"> experiment[</span><span class="r11">&quot;scores&quot;</span><span class="r14">]:</span><span class="r12">                                         </span> |
|<span class="r8">  344 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">if</span><span class="r14"> feature[</span><span class="r11">&quot;type&quot;</span><span class="r14">] </span><span class="r20">in</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">scores:</span><span class="r12">                                       </span> |
|<span class="r8">  345 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    temp </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">scores[feature[</span><span class="r11">&quot;type&quot;</span><span class="r14">]]</span><span class="r19">.</span><span class="r14">headers(experimentName, feature)</span><span class="r12"> </span> |
|<span class="r8">  346 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  347 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    settings </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">scores[feature[</span><span class="r11">&quot;type&quot;</span><span class="r14">]]</span><span class="r19">.</span><span class="r14">get_settings(feature)</span><span class="r12">        </span> |
|<span class="r8">  348 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  349 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r21"># if settings.meta_mask:</span><span class="r12">                                             </span> |
|<span class="r8">  350 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r18">self</span><span class="r19">.</span><span class="r14">numGoals </span><span class="r19">+=</span><span class="r14"> </span><span class="r18">len</span><span class="r14">(temp)</span><span class="r12">                                           </span> |
|<span class="r8">  351 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    badScore</span><span class="r19">.</span><span class="r14">append(settings</span><span class="r19">.</span><span class="r14">badScore)</span><span class="r12">                                   </span> |
|<span class="r8">  352 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  353 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r18">self</span><span class="r19">.</span><span class="r14">score_headers</span><span class="r19">.</span><span class="r14">extend(temp)</span><span class="r12">                                      </span> |
|<span class="r8">  354 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    experiment[</span><span class="r11">&quot;headers&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">extend(temp)</span><span class="r12">                                   </span> |
|<span class="r8">  355 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  356 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">badScores </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array(badScore)</span><span class="r12">                                           </span> |
|<span class="r8">  357 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">allScoreNorm </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">all(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">badScores </span><span class="r19">!=</span><span class="r14"> sys</span><span class="r19">.</span><span class="r14">float_info</span><span class="r19">.</span><span class="r14">max)</span><span class="r12">              </span> |
|<span class="r8">  358 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">allScoreSSE </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">all(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">badScores </span><span class="r19">==</span><span class="r14"> sys</span><span class="r19">.</span><span class="r14">float_info</span><span class="r19">.</span><span class="r14">max)</span><span class="r12">               </span> |
|<span class="r8">  359 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">badScore </span><span class="r19">=</span><span class="r14"> </span><span class="r18">max</span><span class="r14">(badScore)</span><span class="r12">                                                    </span> |
|<span class="r8">  360 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">numGoalsOrig </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">numGoals</span><span class="r12">                                                </span> |
|<span class="r8">  361 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  362 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">allScoreSSE </span><span class="r20">and</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">MultiObjectiveSSE </span><span class="r20">is</span><span class="r14"> </span><span class="r13">False</span><span class="r14">:</span><span class="r12">                         </span> |
|<span class="r8">  363 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">numGoals </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1</span><span class="r12">                                                            </span> |
|<span class="r8">  364 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  365 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">allScoreNorm:</span><span class="r12">                                                            </span> |
|<span class="r8">  366 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r21"># use the first 4 indexes to also keep the SSE</span><span class="r12">                               </span> |
|<span class="r8">  367 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">meta_slice </span><span class="r19">=</span><span class="r14"> </span><span class="r18">slice</span><span class="r14">(</span><span class="r19">0</span><span class="r14">, </span><span class="r19">3</span><span class="r14">, </span><span class="r19">1</span><span class="r14">)</span><span class="r12">                                             </span> |
|<span class="r8">  368 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">elif</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">allScoreSSE:</span><span class="r12">                                                           </span> |
|<span class="r8">  369 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">MultiObjectiveSSE:</span><span class="r12">                                                   </span> |
|<span class="r8">  370 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r21"># use the first 3 indexes</span><span class="r12">                                                </span> |
|<span class="r8">  371 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">meta_slice </span><span class="r19">=</span><span class="r14"> </span><span class="r18">slice</span><span class="r14">(</span><span class="r19">0</span><span class="r14">, </span><span class="r19">3</span><span class="r14">, </span><span class="r19">1</span><span class="r14">)</span><span class="r12">                                         </span> |
|<span class="r8">  372 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                        </span> |
|<span class="r8">  373 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r21"># only used index = 3</span><span class="r12">                                                    </span> |
|<span class="r8">  374 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">meta_slice </span><span class="r19">=</span><span class="r14"> </span><span class="r18">slice</span><span class="r14">(</span><span class="r19">3</span><span class="r14">, </span><span class="r19">4</span><span class="r14">, </span><span class="r19">1</span><span class="r14">)</span><span class="r12">                                         </span> |
|<span class="r8">  375 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  376 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">headers</span><span class="r19">.</span><span class="r14">extend(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">score_headers)</span><span class="r12">                                          </span> |
|<span class="r8">  377 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  378 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">meta_headers </span><span class="r19">=</span><span class="r14"> [</span><span class="r12">                                                            </span> |
|<span class="r8">  379 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Product Root Score&quot;</span><span class="r14">,</span><span class="r12">                                                        </span> |
|<span class="r8">  380 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Min Score&quot;</span><span class="r14">,</span><span class="r12">                                                                 </span> |
|<span class="r8">  381 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;Mean Score&quot;</span><span class="r14">,</span><span class="r12">                                                                </span> |
|<span class="r8">  382 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;SSE&quot;</span><span class="r14">,</span><span class="r12">                                                                       </span> |
|<span class="r8">  383 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;RMSE&quot;</span><span class="r14">,</span><span class="r12">                                                                      </span> |
|<span class="r8">  384 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        ]</span><span class="r12">                                                                                </span> |
|<span class="r8">  385 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  386 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">headers</span><span class="r19">.</span><span class="r14">extend(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">meta_headers)</span><span class="r12">                                           </span> |
|<span class="r8">  387 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  388 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        scores </span><span class="r19">=</span><span class="r14"> </span><span class="r18">len</span><span class="r14">(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">headers)</span><span class="r12">                                                       </span> |
|<span class="r8">  389 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">score_indexes </span><span class="r19">=</span><span class="r14"> </span><span class="r18">list</span><span class="r14">(</span><span class="r18">range</span><span class="r14">(parameters, scores))</span><span class="r12">                             </span> |
|<span class="r8">  390 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  391 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">def</span><span class="r14"> </span><span class="r17">add_units_isotherm</span><span class="r14">(</span><span class="r18">self</span><span class="r14">, units_used, isotherm):</span><span class="r12">                                  </span> |
|<span class="r8">  392 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r18">isinstance</span><span class="r14">(isotherm, </span><span class="r18">list</span><span class="r14">):</span><span class="r12">                                               </span> |
|<span class="r8">  393 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            isotherm </span><span class="r19">=</span><span class="r14"> [</span><span class="r12">                                                                 </span> |
|<span class="r8">  394 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                isotherm,</span><span class="r12">                                                                </span> |
|<span class="r8">  395 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            ]</span><span class="r12">                                                                            </span> |
|<span class="r8">  396 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> path </span><span class="r20">in</span><span class="r14"> isotherm:</span><span class="r12">                                                            </span> |
|<span class="r8">  397 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">for</span><span class="r14"> element </span><span class="r20">in</span><span class="r14"> path</span><span class="r19">.</span><span class="r14">split(</span><span class="r11">&quot;/&quot;</span><span class="r14">):</span><span class="r12">                                              </span> |
|<span class="r8">  398 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">if</span><span class="r14"> element</span><span class="r19">.</span><span class="r14">startswith(</span><span class="r11">&quot;unit_&quot;</span><span class="r14">):</span><span class="r12">                                          </span> |
|<span class="r8">  399 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r13">if</span><span class="r14"> element </span><span class="r20">not</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> units_used:</span><span class="r12">                                        </span> |
|<span class="r8">  400 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        units_used</span><span class="r19">.</span><span class="r14">append(element)</span><span class="r12">                                       </span> |
|<span class="r8">  401 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  402 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">def</span><span class="r14"> </span><span class="r17">add_units_features_alt</span><span class="r14">(</span><span class="r18">self</span><span class="r14">, units_used, features_alt):</span><span class="r12">                          </span> |
|<span class="r8">  403 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> feature_alt </span><span class="r20">in</span><span class="r14"> features_alt:</span><span class="r12">                                                 </span> |
|<span class="r8">  404 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">add_units_isotherm(units_used, feature_alt</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;output_path&quot;</span><span class="r14">, </span><span class="r11">&quot;&quot;</span><span class="r14">))</span><span class="r12">      </span> |
|<span class="r8">  405 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">for</span><span class="r14"> feature </span><span class="r20">in</span><span class="r14"> feature_alt[</span><span class="r11">&quot;scores&quot;</span><span class="r14">]:</span><span class="r12">                                        </span> |
|<span class="r8">  406 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">add_units_isotherm(units_used, feature</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;output_path&quot;</span><span class="r14">, </span><span class="r11">&quot;&quot;</span><span class="r14">))</span><span class="r12">      </span> |
|<span class="r8">  407 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">add_units_isotherm(units_used, feature</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;unit_name&quot;</span><span class="r14">, </span><span class="r11">&quot;&quot;</span><span class="r14">))</span><span class="r12">        </span> |
|<span class="r8">  408 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  409 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">def</span><span class="r14"> </span><span class="r17">add_units_error_model</span><span class="r14">(</span><span class="r18">self</span><span class="r14">, error_models, target):</span><span class="r12">                               </span> |
|<span class="r8">  410 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> error_model </span><span class="r20">in</span><span class="r14"> error_models:</span><span class="r12">                                                 </span> |
|<span class="r8">  411 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            error_model_name </span><span class="r19">=</span><span class="r14"> error_model[</span><span class="r11">&quot;name&quot;</span><span class="r14">]</span><span class="r12">                                       </span> |
|<span class="r8">  412 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> error_model_name </span><span class="r20">in</span><span class="r14"> target:</span><span class="r12">                                               </span> |
|<span class="r8">  413 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                units_used </span><span class="r19">=</span><span class="r14"> target[error_model_name][</span><span class="r11">&quot;units_used&quot;</span><span class="r14">]</span><span class="r12">                      </span> |
|<span class="r8">  414 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">for</span><span class="r14"> unit </span><span class="r20">in</span><span class="r14"> error_model[</span><span class="r11">&quot;units&quot;</span><span class="r14">]:</span><span class="r12">                                        </span> |
|<span class="r8">  415 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    unit_name </span><span class="r19">=</span><span class="r14"> </span><span class="r11">&quot;unit_</span><span class="r22">%03d</span><span class="r11">&quot;</span><span class="r14"> </span><span class="r19">%</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(unit)</span><span class="r12">                                  </span> |
|<span class="r8">  416 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r13">if</span><span class="r14"> unit_name </span><span class="r20">not</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> units_used:</span><span class="r12">                                      </span> |
|<span class="r8">  417 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        units_used</span><span class="r19">.</span><span class="r14">append(unit_name)</span><span class="r12">                                     </span> |
|<span class="r8">  418 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  419 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">def</span><span class="r14"> </span><span class="r17">setupTarget</span><span class="r14">(</span><span class="r18">self</span><span class="r14">):</span><span class="r12">                                                               </span> |
|<span class="r8">  420 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">target </span><span class="r19">=</span><span class="r14"> {}</span><span class="r12">                                                                 </span> |
|<span class="r8">  421 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">adaptive </span><span class="r19">=</span><span class="r14"> </span><span class="r13">True</span><span class="r12">                                                             </span> |
|<span class="r8">  422 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  423 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> experiment </span><span class="r20">in</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;experiments&quot;</span><span class="r14">]:</span><span class="r12">                                  </span> |
|<span class="r8">  424 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">target[experiment[</span><span class="r11">&quot;name&quot;</span><span class="r14">]] </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">setupExperiment(experiment)</span><span class="r12">           </span> |
|<span class="r8">  425 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;errorModel&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings:</span><span class="r12">                                                </span> |
|<span class="r8">  426 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">add_units_error_model(</span><span class="r18">self</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;errorModel&quot;</span><span class="r14">], </span><span class="r18">self</span><span class="r19">.</span><span class="r14">target)</span><span class="r12">         </span> |
|<span class="r8">  427 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  428 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  429 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">def</span><span class="r14"> </span><span class="r17">setupExperiment</span><span class="r14">(</span><span class="r18">self</span><span class="r14">, experiment, sim</span><span class="r19">=</span><span class="r13">None</span><span class="r14">, dataFromSim</span><span class="r19">=0</span><span class="r14">):</span><span class="r12">                      </span> |
|<span class="r8">  430 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        temp </span><span class="r19">=</span><span class="r14"> {}</span><span class="r12">                                                                        </span> |
|<span class="r8">  431 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  432 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        units_used </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                  </span> |
|<span class="r8">  433 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  434 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        residence_time_unit </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(experiment</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&#x27;residence_time_unit&#x27;</span><span class="r14">, </span><span class="r19">1</span><span class="r14">))</span><span class="r12">              </span> |
|<span class="r8">  435 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  436 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> sim </span><span class="r20">is</span><span class="r14"> </span><span class="r13">None</span><span class="r14">:</span><span class="r12">                                                                  </span> |
|<span class="r8">  437 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim </span><span class="r19">=</span><span class="r14"> Cadet()</span><span class="r12">                                                                </span> |
|<span class="r8">  438 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">filename </span><span class="r19">=</span><span class="r14"> Path(experiment[</span><span class="r11">&quot;HDF5&quot;</span><span class="r14">])</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                           </span> |
|<span class="r8">  439 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">load()</span><span class="r12">                                                                   </span> |
|<span class="r8">  440 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">experiment_name </span><span class="r19">=</span><span class="r14"> experiment[</span><span class="r11">&quot;name&quot;</span><span class="r14">]</span><span class="r12">                                </span> |
|<span class="r8">  441 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  442 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        abstol </span><span class="r19">=</span><span class="r14"> sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">solver</span><span class="r19">.</span><span class="r14">time_integrator</span><span class="r19">.</span><span class="r14">abstol</span><span class="r12">                            </span> |
|<span class="r8">  443 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  444 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        conn </span><span class="r19">=</span><span class="r14"> sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">model</span><span class="r19">.</span><span class="r14">connections</span><span class="r19">.</span><span class="r14">switch_000</span><span class="r19">.</span><span class="r14">connections</span><span class="r12">                   </span> |
|<span class="r8">  445 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  446 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        conn </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array(conn)</span><span class="r12">                                                         </span> |
|<span class="r8">  447 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        conn </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">reshape(conn, [</span><span class="r19">-1</span><span class="r14">, </span><span class="r18">self</span><span class="r19">.</span><span class="r14">connectionNumberEntries])</span><span class="r12">                   </span> |
|<span class="r8">  448 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  449 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21"># find all the entries that connect to the column</span><span class="r12">                                </span> |
|<span class="r8">  450 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">filter</span><span class="r14"> </span><span class="r19">=</span><span class="r14"> conn[:, </span><span class="r19">1</span><span class="r14">] </span><span class="r19">==</span><span class="r14"> residence_time_unit</span><span class="r12">                                       </span> |
|<span class="r8">  451 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  452 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21"># flow is the sum of all flow rates that connect to this column which is in the l</span> |
|<span class="r8">  453 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        flow </span><span class="r19">=</span><span class="r14"> </span><span class="r18">sum</span><span class="r14">(conn[</span><span class="r18">filter</span><span class="r14">, </span><span class="r19">-1</span><span class="r14">])</span><span class="r12">                                                     </span> |
|<span class="r8">  454 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  455 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        unit </span><span class="r19">=</span><span class="r14"> sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">model[</span><span class="r11">f&#x27;unit_</span><span class="r22">{</span><span class="r14">residence_time_unit</span><span class="r22">:</span><span class="r11">03d</span><span class="r22">}</span><span class="r11">&#x27;</span><span class="r14">]</span><span class="r12">                   </span> |
|<span class="r8">  456 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  457 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> unit</span><span class="r19">.</span><span class="r14">unit_type </span><span class="r19">==</span><span class="r14"> </span><span class="r11">b&quot;CSTR&quot;</span><span class="r14">:</span><span class="r12">                                                    </span> |
|<span class="r8">  458 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            volume </span><span class="r19">=</span><span class="r14"> </span><span class="r18">float</span><span class="r14">(unit</span><span class="r19">.</span><span class="r14">init_volume)</span><span class="r12">                                             </span> |
|<span class="r8">  459 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  460 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            CV_time </span><span class="r19">=</span><span class="r14"> volume </span><span class="r19">/</span><span class="r14"> flow</span><span class="r12">                                                      </span> |
|<span class="r8">  461 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  462 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                            </span> |
|<span class="r8">  463 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r21"># CV needs to be based on superficial velocity not interstitial velocity</span><span class="r12">     </span> |
|<span class="r8">  464 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            length </span><span class="r19">=</span><span class="r14"> </span><span class="r18">float</span><span class="r14">(unit</span><span class="r19">.</span><span class="r14">col_length)</span><span class="r12">                                              </span> |
|<span class="r8">  465 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  466 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            velocity </span><span class="r19">=</span><span class="r14"> unit</span><span class="r19">.</span><span class="r14">velocity</span><span class="r12">                                                     </span> |
|<span class="r8">  467 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> velocity </span><span class="r19">==</span><span class="r14"> {}:</span><span class="r12">                                                           </span> |
|<span class="r8">  468 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                velocity </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1.0</span><span class="r12">                                                           </span> |
|<span class="r8">  469 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            velocity </span><span class="r19">=</span><span class="r14"> </span><span class="r18">float</span><span class="r14">(velocity)</span><span class="r12">                                                   </span> |
|<span class="r8">  470 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  471 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            area </span><span class="r19">=</span><span class="r14"> unit</span><span class="r19">.</span><span class="r14">cross_section_area</span><span class="r12">                                               </span> |
|<span class="r8">  472 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> area </span><span class="r19">==</span><span class="r14"> {}:</span><span class="r12">                                                               </span> |
|<span class="r8">  473 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                area </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1.0</span><span class="r12">                                                               </span> |
|<span class="r8">  474 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            area </span><span class="r19">=</span><span class="r14"> </span><span class="r18">float</span><span class="r14">(area)</span><span class="r12">                                                           </span> |
|<span class="r8">  475 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  476 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> area </span><span class="r19">==</span><span class="r14"> </span><span class="r19">1</span><span class="r14"> </span><span class="r20">and</span><span class="r14"> </span><span class="r18">abs</span><span class="r14">(velocity) </span><span class="r19">!=</span><span class="r14"> </span><span class="r19">1</span><span class="r14">:</span><span class="r12">                                         </span> |
|<span class="r8">  477 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                CV_time </span><span class="r19">=</span><span class="r14"> length </span><span class="r19">/</span><span class="r14"> velocity</span><span class="r12">                                              </span> |
|<span class="r8">  478 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                        </span> |
|<span class="r8">  479 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                CV_time </span><span class="r19">=</span><span class="r14"> (area </span><span class="r19">*</span><span class="r14"> length) </span><span class="r19">/</span><span class="r14"> flow</span><span class="r12">                                         </span> |
|<span class="r8">  480 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  481 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21"># force CSV to lowercase</span><span class="r12">                                                         </span> |
|<span class="r8">  482 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;CSV&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> experiment:</span><span class="r12">                                                          </span> |
|<span class="r8">  483 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            experiment[</span><span class="r11">&quot;csv&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> experiment[</span><span class="r11">&quot;CSV&quot;</span><span class="r14">]</span><span class="r12">                                        </span> |
|<span class="r8">  484 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  485 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> dataFromSim:</span><span class="r12">                                                                  </span> |
|<span class="r8">  486 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            temp[</span><span class="r11">&quot;time&quot;</span><span class="r14">], temp[</span><span class="r11">&quot;value&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> get_times_values(</span><span class="r12">                              </span> |
|<span class="r8">  487 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                sim, {</span><span class="r11">&quot;output_path&quot;</span><span class="r14">: experiment[</span><span class="r11">&quot;output_path&quot;</span><span class="r14">]}</span><span class="r12">                          </span> |
|<span class="r8">  488 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            )</span><span class="r12">                                                                            </span> |
|<span class="r8">  489 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  490 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">elif</span><span class="r14"> </span><span class="r11">&quot;csv&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> experiment:</span><span class="r12">                                                        </span> |
|<span class="r8">  491 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            data </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">loadtxt(experiment[</span><span class="r11">&quot;csv&quot;</span><span class="r14">], delimiter</span><span class="r19">=</span><span class="r11">&quot;,&quot;</span><span class="r14">)</span><span class="r12">                       </span> |
|<span class="r8">  492 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  493 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            temp[</span><span class="r11">&quot;time&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> data[:, </span><span class="r19">0</span><span class="r14">]</span><span class="r12">                                                    </span> |
|<span class="r8">  494 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            temp[</span><span class="r11">&quot;value&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> data[:, </span><span class="r19">1</span><span class="r14">]</span><span class="r12">                                                   </span> |
|<span class="r8">  495 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  496 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">normalizeOutput:</span><span class="r12">                                                     </span> |
|<span class="r8">  497 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                temp[</span><span class="r11">&quot;factor&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1.0</span><span class="r14"> </span><span class="r19">/</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">max(temp[</span><span class="r11">&quot;value&quot;</span><span class="r14">])</span><span class="r12">                          </span> |
|<span class="r8">  498 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                        </span> |
|<span class="r8">  499 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                temp[</span><span class="r11">&quot;factor&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1.0</span><span class="r12">                                                     </span> |
|<span class="r8">  500 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            temp[</span><span class="r11">&quot;valueFactor&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> temp[</span><span class="r11">&quot;value&quot;</span><span class="r14">] </span><span class="r19">*</span><span class="r14"> temp[</span><span class="r11">&quot;factor&quot;</span><span class="r14">]</span><span class="r12">                         </span> |
|<span class="r8">  501 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  502 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;scoresAlt&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> experiment:</span><span class="r12">                                                    </span> |
|<span class="r8">  503 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">altScores </span><span class="r19">=</span><span class="r14"> </span><span class="r13">True</span><span class="r12">                                                        </span> |
|<span class="r8">  504 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">altScoreNames </span><span class="r19">=</span><span class="r14"> [</span><span class="r12">                                                       </span> |
|<span class="r8">  505 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                altFeature[</span><span class="r11">&quot;name&quot;</span><span class="r14">] </span><span class="r13">for</span><span class="r14"> altFeature </span><span class="r20">in</span><span class="r14"> experiment[</span><span class="r11">&quot;scoresAlt&quot;</span><span class="r14">]</span><span class="r12">             </span> |
|<span class="r8">  506 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            ]</span><span class="r12">                                                                            </span> |
|<span class="r8">  507 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  508 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">add_units_features_alt(units_used, experiment[</span><span class="r11">&quot;scoresAlt&quot;</span><span class="r14">])</span><span class="r12">             </span> |
|<span class="r8">  509 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  510 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        peak_maxes </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                  </span> |
|<span class="r8">  511 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> feature </span><span class="r20">in</span><span class="r14"> experiment[</span><span class="r11">&quot;scores&quot;</span><span class="r14">]:</span><span class="r12">                                             </span> |
|<span class="r8">  512 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            featureName </span><span class="r19">=</span><span class="r14"> feature[</span><span class="r11">&quot;name&quot;</span><span class="r14">]</span><span class="r12">                                                </span> |
|<span class="r8">  513 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            featureType </span><span class="r19">=</span><span class="r14"> feature[</span><span class="r11">&quot;type&quot;</span><span class="r14">]</span><span class="r12">                                                </span> |
|<span class="r8">  514 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  515 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            temp[featureName] </span><span class="r19">=</span><span class="r14"> feature</span><span class="r12">                                                  </span> |
|<span class="r8">  516 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  517 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r21"># switch to lower case</span><span class="r12">                                                       </span> |
|<span class="r8">  518 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;CSV&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> feature:</span><span class="r12">                                                         </span> |
|<span class="r8">  519 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                feature[</span><span class="r11">&quot;csv&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> feature[</span><span class="r11">&quot;CSV&quot;</span><span class="r14">]</span><span class="r12">                                          </span> |
|<span class="r8">  520 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  521 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;csv&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> feature:</span><span class="r12">                                                         </span> |
|<span class="r8">  522 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">if</span><span class="r14"> dataFromSim:</span><span class="r12">                                                          </span> |
|<span class="r8">  523 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    (</span><span class="r12">                                                                    </span> |
|<span class="r8">  524 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        temp[featureName][</span><span class="r11">&quot;time&quot;</span><span class="r14">],</span><span class="r12">                                       </span> |
|<span class="r8">  525 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        temp[featureName][</span><span class="r11">&quot;value&quot;</span><span class="r14">],</span><span class="r12">                                      </span> |
|<span class="r8">  526 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    ) </span><span class="r19">=</span><span class="r14"> get_times_values(sim, {</span><span class="r11">&quot;output_path&quot;</span><span class="r14">: feature[</span><span class="r11">&quot;output_path&quot;</span><span class="r14">]})</span><span class="r12">   </span> |
|<span class="r8">  527 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                    </span> |
|<span class="r8">  528 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    dataLocal </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">loadtxt(feature[</span><span class="r11">&quot;csv&quot;</span><span class="r14">], delimiter</span><span class="r19">=</span><span class="r11">&quot;,&quot;</span><span class="r14">)</span><span class="r12">             </span> |
|<span class="r8">  529 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    temp[featureName][</span><span class="r11">&quot;time&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> dataLocal[:, </span><span class="r19">0</span><span class="r14">]</span><span class="r12">                          </span> |
|<span class="r8">  530 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    temp[featureName][</span><span class="r11">&quot;value&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> dataLocal[:, </span><span class="r19">1</span><span class="r14">]</span><span class="r12">                         </span> |
|<span class="r8">  531 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                        </span> |
|<span class="r8">  532 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                temp[featureName][</span><span class="r11">&quot;time&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> temp[</span><span class="r11">&quot;time&quot;</span><span class="r14">]</span><span class="r12">                                 </span> |
|<span class="r8">  533 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                temp[featureName][</span><span class="r11">&quot;value&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> temp[</span><span class="r11">&quot;value&quot;</span><span class="r14">]</span><span class="r12">                               </span> |
|<span class="r8">  534 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  535 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">normalizeOutput:</span><span class="r12">                                                     </span> |
|<span class="r8">  536 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                temp[featureName][</span><span class="r11">&quot;factor&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1.0</span><span class="r14"> </span><span class="r19">/</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">max(</span><span class="r12">                           </span> |
|<span class="r8">  537 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    temp[featureName][</span><span class="r11">&quot;value&quot;</span><span class="r14">]</span><span class="r12">                                           </span> |
|<span class="r8">  538 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                )</span><span class="r12">                                                                        </span> |
|<span class="r8">  539 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                temp[featureName][</span><span class="r11">&quot;value&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> (</span><span class="r12">                                           </span> |
|<span class="r8">  540 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    temp[featureName][</span><span class="r11">&quot;value&quot;</span><span class="r14">] </span><span class="r19">*</span><span class="r14"> temp[featureName][</span><span class="r11">&quot;factor&quot;</span><span class="r14">]</span><span class="r12">             </span> |
|<span class="r8">  541 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                )</span><span class="r12">                                                                        </span> |
|<span class="r8">  542 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                        </span> |
|<span class="r8">  543 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                temp[featureName][</span><span class="r11">&quot;factor&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1.0</span><span class="r12">                                        </span> |
|<span class="r8">  544 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  545 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">try</span><span class="r14">:</span><span class="r12">                                                                         </span> |
|<span class="r8">  546 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                featureStart </span><span class="r19">=</span><span class="r14"> </span><span class="r18">float</span><span class="r14">(feature[</span><span class="r11">&quot;start&quot;</span><span class="r14">])</span><span class="r12">                                   </span> |
|<span class="r8">  547 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                featureStop </span><span class="r19">=</span><span class="r14"> </span><span class="r18">float</span><span class="r14">(feature[</span><span class="r11">&quot;stop&quot;</span><span class="r14">])</span><span class="r12">                                     </span> |
|<span class="r8">  548 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">except</span><span class="r14"> </span><span class="r23">KeyError</span><span class="r14">:</span><span class="r12">                                                             </span> |
|<span class="r8">  549 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                feature[</span><span class="r11">&quot;start&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> featureStart </span><span class="r19">=</span><span class="r14"> temp[featureName][</span><span class="r11">&quot;time&quot;</span><span class="r14">][</span><span class="r19">0</span><span class="r14">]</span><span class="r12">           </span> |
|<span class="r8">  550 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                feature[</span><span class="r11">&quot;stop&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> featureStop </span><span class="r19">=</span><span class="r14"> temp[featureName][</span><span class="r11">&quot;time&quot;</span><span class="r14">][</span><span class="r19">-1</span><span class="r14">]</span><span class="r12">            </span> |
|<span class="r8">  551 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  552 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;output_path&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> feature:</span><span class="r12">                                                 </span> |
|<span class="r8">  553 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                temp[featureName][</span><span class="r11">&quot;output_path&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> feature[</span><span class="r11">&quot;output_path&quot;</span><span class="r14">]</span><span class="r12">                </span> |
|<span class="r8">  554 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                        </span> |
|<span class="r8">  555 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                temp[featureName][</span><span class="r11">&quot;output_path&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> experiment[</span><span class="r11">&quot;output_path&quot;</span><span class="r14">]</span><span class="r12">             </span> |
|<span class="r8">  556 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  557 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">self</span><span class="r19">.</span><span class="r14">add_units_isotherm(units_used, temp[featureName][</span><span class="r11">&quot;output_path&quot;</span><span class="r14">])</span><span class="r12">        </span> |
|<span class="r8">  558 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  559 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            temp[featureName][</span><span class="r11">&quot;selected&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> (</span><span class="r12">                                            </span> |
|<span class="r8">  560 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                temp[featureName][</span><span class="r11">&quot;time&quot;</span><span class="r14">] </span><span class="r19">&gt;=</span><span class="r14"> featureStart</span><span class="r12">                                </span> |
|<span class="r8">  561 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            ) </span><span class="r19">&amp;</span><span class="r14"> (temp[featureName][</span><span class="r11">&quot;time&quot;</span><span class="r14">] </span><span class="r19">&lt;=</span><span class="r14"> featureStop)</span><span class="r12">                               </span> |
|<span class="r8">  562 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  563 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            selectedTimes </span><span class="r19">=</span><span class="r14"> temp[featureName][</span><span class="r11">&quot;time&quot;</span><span class="r14">][temp[featureName][</span><span class="r11">&quot;selected&quot;</span><span class="r14">]]</span><span class="r12">     </span> |
|<span class="r8">  564 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            selectedValues </span><span class="r19">=</span><span class="r14"> temp[featureName][</span><span class="r11">&quot;value&quot;</span><span class="r14">][temp[featureName][</span><span class="r11">&quot;selected&quot;</span><span class="r14">]]</span><span class="r12">   </span> |
|<span class="r8">  565 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  566 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;unit_name&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> feature:</span><span class="r12">                                                   </span> |
|<span class="r8">  567 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">add_units_isotherm(units_used, feature[</span><span class="r11">&quot;unit_name&quot;</span><span class="r14">])</span><span class="r12">                </span> |
|<span class="r8">  568 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  569 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> featureType </span><span class="r20">in</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">scores:</span><span class="r12">                                               </span> |
|<span class="r8">  570 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                temp[featureName]</span><span class="r19">.</span><span class="r14">update(</span><span class="r12">                                                </span> |
|<span class="r8">  571 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r18">self</span><span class="r19">.</span><span class="r14">scores[featureType]</span><span class="r19">.</span><span class="r14">setup(</span><span class="r12">                                      </span> |
|<span class="r8">  572 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        sim,</span><span class="r12">                                                             </span> |
|<span class="r8">  573 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        feature,</span><span class="r12">                                                         </span> |
|<span class="r8">  574 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        selectedTimes,</span><span class="r12">                                                   </span> |
|<span class="r8">  575 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        selectedValues,</span><span class="r12">                                                  </span> |
|<span class="r8">  576 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        CV_time,</span><span class="r12">                                                         </span> |
|<span class="r8">  577 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        abstol,</span><span class="r12">                                                          </span> |
|<span class="r8">  578 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        </span><span class="r18">self</span><span class="r14">,</span><span class="r12">                                                            </span> |
|<span class="r8">  579 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    )</span><span class="r12">                                                                    </span> |
|<span class="r8">  580 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                )</span><span class="r12">                                                                        </span> |
|<span class="r8">  581 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                settings </span><span class="r19">=</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">scores[featureType]</span><span class="r19">.</span><span class="r14">get_settings(feature)</span><span class="r12">                </span> |
|<span class="r8">  582 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">adaptive </span><span class="r19">=</span><span class="r14"> settings</span><span class="r19">.</span><span class="r14">adaptive</span><span class="r12">                                        </span> |
|<span class="r8">  583 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;peak_max&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> temp[featureName]:</span><span class="r12">                                      </span> |
|<span class="r8">  584 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    peak_maxes</span><span class="r19">.</span><span class="r14">append(</span><span class="r12">                                                   </span> |
|<span class="r8">  585 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        temp[featureName][</span><span class="r11">&quot;peak_max&quot;</span><span class="r14">] </span><span class="r19">/</span><span class="r14"> temp[featureName][</span><span class="r11">&quot;factor&quot;</span><span class="r14">]</span><span class="r12">      </span> |
|<span class="r8">  586 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    )</span><span class="r12">                                                                    </span> |
|<span class="r8">  587 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  588 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        temp[</span><span class="r11">&quot;smallest_peak&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r18">min</span><span class="r14">(peak_maxes)</span><span class="r12">                                          </span> |
|<span class="r8">  589 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        temp[</span><span class="r11">&quot;largest_peak&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r18">max</span><span class="r14">(peak_maxes)</span><span class="r12">                                           </span> |
|<span class="r8">  590 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  591 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21">#if min(peak_maxes) == max(peak_maxes):</span><span class="r12">                                          </span> |
|<span class="r8">  592 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21">#    self.dynamicTolerance = False</span><span class="r12">                                               </span> |
|<span class="r8">  593 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  594 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        temp[</span><span class="r11">&quot;units_used&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> units_used</span><span class="r12">                                                  </span> |
|<span class="r8">  595 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">return</span><span class="r14"> temp</span><span class="r12">                                                                      </span> |
|<span class="r8">  596 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  597 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">def</span><span class="r14"> </span><span class="r17">setupMinMax</span><span class="r14">(</span><span class="r18">self</span><span class="r14">):</span><span class="r12">                                                               </span> |
|<span class="r8">  598 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r11">&quot;build the minimum and maximum parameter boundaries&quot;</span><span class="r12">                             </span> |
|<span class="r8">  599 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">MIN_VALUE </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                              </span> |
|<span class="r8">  600 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">MAX_VALUE </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                              </span> |
|<span class="r8">  601 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21"># self.MIN_VALUE_GRAD = []</span><span class="r12">                                                       </span> |
|<span class="r8">  602 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21"># self.MAX_VALUE_GRAD = []</span><span class="r12">                                                       </span> |
|<span class="r8">  603 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r18">self</span><span class="r19">.</span><span class="r14">transform </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                              </span> |
|<span class="r8">  604 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21"># self.grad_transform = []</span><span class="r12">                                                       </span> |
|<span class="r8">  605 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  606 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> parameter </span><span class="r20">in</span><span class="r14"> </span><span class="r18">self</span><span class="r19">.</span><span class="r14">parameters:</span><span class="r12">                                                </span> |
|<span class="r8">  607 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            minValues, maxValues </span><span class="r19">=</span><span class="r14"> parameter</span><span class="r19">.</span><span class="r14">getBounds()</span><span class="r12">                                 </span> |
|<span class="r8">  608 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r21"># minGradValues, maxGradValues = self.transforms[transform].getGradBounds(par</span> |
|<span class="r8">  609 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            transforms </span><span class="r19">=</span><span class="r14"> parameter</span><span class="r19">.</span><span class="r14">transform()</span><span class="r12">                                           </span> |
|<span class="r8">  610 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r21"># grad_transforms = self.transforms[transform].grad_transform(parameter)</span><span class="r12">     </span> |
|<span class="r8">  611 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  612 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> minValues:</span><span class="r12">                                                                </span> |
|<span class="r8">  613 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">MIN_VALUE</span><span class="r19">.</span><span class="r14">extend(minValues)</span><span class="r12">                                         </span> |
|<span class="r8">  614 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">MAX_VALUE</span><span class="r19">.</span><span class="r14">extend(maxValues)</span><span class="r12">                                         </span> |
|<span class="r8">  615 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">self</span><span class="r19">.</span><span class="r14">transform</span><span class="r19">.</span><span class="r14">extend(transforms)</span><span class="r12">                                        </span> |
|<span class="r8">  616 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r21"># self.grad_transform.extend(grad_transforms)</span><span class="r12">                            </span> |
|<span class="r8">  617 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r21"># self.MIN_VALUE_GRAD.extend(minGradValues)</span><span class="r12">                              </span> |
|<span class="r8">  618 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r21"># self.MAX_VALUE_GRAD.extend(maxGradValues)</span><span class="r12">                              </span> |
|<span class="r8">  619 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  620 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  621 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">cache </span><span class="r19">=</span><span class="r14"> Cache()</span><span class="r12">                                                                          </span> |
|<span class="r8">  622 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  623 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  624 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">get_times_values</span><span class="r14">(simulation, target):</span><span class="r12">                                                </span> |
|<span class="r8">  625 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r11">&quot;simplified version of the function so that util does not have to be imported&quot;</span><span class="r12">       </span> |
|<span class="r8">  626 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    times </span><span class="r19">=</span><span class="r14"> simulation</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">output</span><span class="r19">.</span><span class="r14">solution</span><span class="r19">.</span><span class="r14">solution_times</span><span class="r12">                               </span> |
|<span class="r8">  627 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    output_path </span><span class="r19">=</span><span class="r14"> target[</span><span class="r11">&quot;output_path&quot;</span><span class="r14">]</span><span class="r12">                                                  </span> |
|<span class="r8">  628 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  629 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> </span><span class="r18">isinstance</span><span class="r14">(output_path, </span><span class="r18">list</span><span class="r14">):</span><span class="r12">                                                    </span> |
|<span class="r8">  630 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        values </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">sum([simulation[i] </span><span class="r13">for</span><span class="r14"> i </span><span class="r20">in</span><span class="r14"> output_path], </span><span class="r19">0</span><span class="r14">)</span><span class="r12">                      </span> |
|<span class="r8">  631 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                                </span> |
|<span class="r8">  632 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        values </span><span class="r19">=</span><span class="r14"> simulation[output_path]</span><span class="r12">                                                 </span> |
|<span class="r8">  633 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  634 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> times, values</span><span class="r12">                                                                 </span> |
|<span class="r8">  635 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
+---------------------------------------------------------------------------------------------------------------------------------+
<span class="r1">  C:\Users\kosh\OneDrive\Documents\Visual Studio 2017\Projects\CADETMatch\CADETMatch\util.py: % of time =  26.74% out of   1.41s.  </span>
+---------------------------------------------------------------------------------------------------------------------------------+
|<span class="r2">      </span>|<span class="r3">Time</span><span class="r2">   </span>|<span class="r3">––––––</span><span class="r2"> </span>|<span class="r3">––––––</span><span class="r2"> </span>|<span class="r4">––––––</span><span class="r2"> </span>|<span class="r2">                                                                                          </span>|
|<span class="r2"> </span><span class="r5">Line</span><span class="r2"> </span>|<span class="r6">Python</span><span class="r2"> </span>|<span class="r6">native</span><span class="r2"> </span>|<span class="r6">system</span><span class="r2"> </span>|<span class="r7">GPU</span><span class="r2">    </span>|<span class="r2">C:\Users\kosh\OneDrive\Documents\Visual Studio 2017\Projects\CADETMatch\CADETMatch\util.… </span>|
|------+-------+-------+-------+-------+------------------------------------------------------------------------------------------|
|<span class="r8">    1 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">copy</span><span class="r12">                                                                              </span> |
|<span class="r8">    2 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">csv</span><span class="r12">                                                                               </span> |
|<span class="r8">    3 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">decimal</span><span class="r14"> </span><span class="r13">as</span><span class="r14"> </span><span class="r15">decim</span><span class="r12">                                                                  </span> |
|<span class="r8">    4 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">hashlib</span><span class="r12">                                                                           </span> |
|<span class="r8">    5 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">multiprocessing</span><span class="r12">                                                                   </span> |
|<span class="r8">    6 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">os</span><span class="r12">                                                                                </span> |
|<span class="r8">    7 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">random</span><span class="r12">                                                                            </span> |
|<span class="r8">    8 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">subprocess</span><span class="r12">                                                                        </span> |
|<span class="r8">    9 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">sys</span><span class="r12">                                                                               </span> |
|<span class="r8">   10 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">tempfile</span><span class="r12">                                                                          </span> |
|<span class="r8">   11 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">time</span><span class="r12">                                                                              </span> |
|<span class="r8">   12 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">warnings</span><span class="r12">                                                                          </span> |
|<span class="r8">   13 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">from</span><span class="r14"> </span><span class="r15">pathlib</span><span class="r14"> </span><span class="r13">import</span><span class="r14"> Path</span><span class="r12">                                                                 </span> |
|<span class="r8">   14 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   15 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">jstyleson</span><span class="r12">                                                                         </span> |
|<span class="r8">   16 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">numpy</span><span class="r12">                                                                             </span> |
|<span class="r8">   17 </span>|<span class="r16">    4%</span><span class="r9"> </span>|<span class="r16">    2%</span><span class="r9"> </span>|<span class="r9">  16%  </span>|<span class="r16"> 30%</span><span class="r10">   </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">pandas</span><span class="r12">                                                                            </span> |
|<span class="r8">   18 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">psutil</span><span class="r12">                                                                            </span> |
|<span class="r8">   19 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">   2%  </span>|<span class="r10">  4%   </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">scipy.signal</span><span class="r12">                                                                      </span> |
|<span class="r8">   20 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">from</span><span class="r14"> </span><span class="r15">addict</span><span class="r14"> </span><span class="r13">import</span><span class="r14"> Dict</span><span class="r12">                                                                  </span> |
|<span class="r8">   21 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">from</span><span class="r14"> </span><span class="r15">cadet</span><span class="r14"> </span><span class="r13">import</span><span class="r14"> H5, Cadet</span><span class="r12">                                                              </span> |
|<span class="r8">   22 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   23 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">   1%  </span>|<span class="r10">  2%   </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">CADETMatch.calc_coeff</span><span class="r14"> </span><span class="r13">as</span><span class="r14"> </span><span class="r15">calc_coeff</span><span class="r12">                                               </span> |
|<span class="r8">   24 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">CADETMatch.sub</span><span class="r14"> </span><span class="r13">as</span><span class="r14"> </span><span class="r15">sub</span><span class="r12">                                                             </span> |
|<span class="r8">   25 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">CADETMatch.pop</span><span class="r14"> </span><span class="r13">as</span><span class="r14"> </span><span class="r15">pop</span><span class="r12">                                                             </span> |
|<span class="r8">   26 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   27 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">decim</span><span class="r19">.</span><span class="r14">getcontext()</span><span class="r19">.</span><span class="r14">prec </span><span class="r19">=</span><span class="r14"> </span><span class="r19">64</span><span class="r12">                                                             </span> |
|<span class="r8">   28 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">__logBase10of2_decim </span><span class="r19">=</span><span class="r14"> decim</span><span class="r19">.</span><span class="r14">Decimal(</span><span class="r19">2</span><span class="r14">)</span><span class="r19">.</span><span class="r14">log10()</span><span class="r12">                                          </span> |
|<span class="r8">   29 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">__logBase10of2 </span><span class="r19">=</span><span class="r14"> </span><span class="r18">float</span><span class="r14">(__logBase10of2_decim)</span><span class="r12">                                             </span> |
|<span class="r8">   30 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   31 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">logging</span><span class="r12">                                                                           </span> |
|<span class="r8">   32 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">os</span><span class="r12">                                                                                </span> |
|<span class="r8">   33 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   34 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">SALib.sample.sobol_sequence</span><span class="r12">                                                       </span> |
|<span class="r8">   35 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">scipy.interpolate</span><span class="r12">                                                                 </span> |
|<span class="r8">   36 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   37 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">  2%   </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">CADETMatch.loggerwriter</span><span class="r14"> </span><span class="r13">as</span><span class="r14"> </span><span class="r15">loggerwriter</span><span class="r12">                                           </span> |
|<span class="r8">   38 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">CADETMatch.pareto</span><span class="r14"> </span><span class="r13">as</span><span class="r14"> </span><span class="r15">pareto</span><span class="r12">                                                       </span> |
|<span class="r8">   39 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">CADETMatch.synthetic_error</span><span class="r14"> </span><span class="r13">as</span><span class="r14"> </span><span class="r15">synthetic_error</span><span class="r12">                                     </span> |
|<span class="r8">   40 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   41 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r21"># numpy.warnings.filterwarnings(&#x27;error&#x27;, category=numpy.VisibleDeprecationWarning)</span><span class="r12">       </span> |
|<span class="r8">   42 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   43 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   44 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">get_times_values</span><span class="r14">(simulation, target, selected</span><span class="r19">=</span><span class="r13">None</span><span class="r14">):</span><span class="r12">                                 </span> |
|<span class="r8">   45 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   46 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">try</span><span class="r14">:</span><span class="r12">                                                                                 </span> |
|<span class="r8">   47 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        times </span><span class="r19">=</span><span class="r14"> simulation</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">output</span><span class="r19">.</span><span class="r14">solution</span><span class="r19">.</span><span class="r14">solution_times</span><span class="r12">                           </span> |
|<span class="r8">   48 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   49 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        output_path </span><span class="r19">=</span><span class="r14"> target[</span><span class="r11">&quot;output_path&quot;</span><span class="r14">]</span><span class="r12">                                              </span> |
|<span class="r8">   50 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   51 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> </span><span class="r18">isinstance</span><span class="r14">(output_path, </span><span class="r18">list</span><span class="r14">):</span><span class="r12">                                                </span> |
|<span class="r8">   52 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            values </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">sum([simulation[i] </span><span class="r13">for</span><span class="r14"> i </span><span class="r20">in</span><span class="r14"> output_path], </span><span class="r19">0</span><span class="r14">)</span><span class="r12">                  </span> |
|<span class="r8">   53 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                            </span> |
|<span class="r8">   54 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            values </span><span class="r19">=</span><span class="r14"> simulation[output_path]</span><span class="r12">                                             </span> |
|<span class="r8">   55 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">except</span><span class="r14"> (</span><span class="r23">AttributeError</span><span class="r14">, </span><span class="r23">KeyError</span><span class="r14">):</span><span class="r12">                                                   </span> |
|<span class="r8">   56 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        times </span><span class="r19">=</span><span class="r14"> simulation[:, </span><span class="r19">0</span><span class="r14">]</span><span class="r12">                                                         </span> |
|<span class="r8">   57 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        values </span><span class="r19">=</span><span class="r14"> simulation[:, </span><span class="r19">1</span><span class="r14">]</span><span class="r12">                                                        </span> |
|<span class="r8">   58 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   59 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> selected </span><span class="r20">is</span><span class="r14"> </span><span class="r13">None</span><span class="r14">:</span><span class="r12">                                                                 </span> |
|<span class="r8">   60 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        selected </span><span class="r19">=</span><span class="r14"> target[</span><span class="r11">&quot;selected&quot;</span><span class="r14">]</span><span class="r12">                                                    </span> |
|<span class="r8">   61 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> times[selected], values[selected] </span><span class="r19">*</span><span class="r14"> target[</span><span class="r11">&quot;factor&quot;</span><span class="r14">]</span><span class="r12">                          </span> |
|<span class="r8">   62 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   63 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   64 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">sse</span><span class="r14">(data1, data2):</span><span class="r12">                                                                   </span> |
|<span class="r8">   65 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">sum((data1 </span><span class="r19">-</span><span class="r14"> data2) </span><span class="r19">**</span><span class="r14"> </span><span class="r19">2</span><span class="r14">)</span><span class="r12">                                               </span> |
|<span class="r8">   66 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   67 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   68 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">find_peak</span><span class="r14">(times, data):</span><span class="r12">                                                              </span> |
|<span class="r8">   69 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r11">&quot;Return tuples of (times,data) for the peak we need&quot;</span><span class="r12">                                 </span> |
|<span class="r8">   70 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    minIdx </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">argmin(data)</span><span class="r12">                                                          </span> |
|<span class="r8">   71 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    maxIdx </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">argmax(data)</span><span class="r12">                                                          </span> |
|<span class="r8">   72 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   73 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> (times[maxIdx], data[maxIdx]), (times[minIdx], data[minIdx])</span><span class="r12">                  </span> |
|<span class="r8">   74 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   75 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   76 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">find_breakthrough</span><span class="r14">(times, data):</span><span class="r12">                                                      </span> |
|<span class="r8">   77 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r11">&quot;return tuple of time,value for the start breakthrough and end breakthrough&quot;</span><span class="r12">         </span> |
|<span class="r8">   78 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    selected </span><span class="r19">=</span><span class="r14"> data </span><span class="r19">&gt;</span><span class="r14"> </span><span class="r19">0.999</span><span class="r14"> </span><span class="r19">*</span><span class="r14"> </span><span class="r18">max</span><span class="r14">(data)</span><span class="r12">                                                  </span> |
|<span class="r8">   79 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    selected_times </span><span class="r19">=</span><span class="r14"> times[selected]</span><span class="r12">                                                     </span> |
|<span class="r8">   80 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> (selected_times[</span><span class="r19">0</span><span class="r14">], </span><span class="r18">max</span><span class="r14">(data)), (selected_times[</span><span class="r19">-1</span><span class="r14">], </span><span class="r18">max</span><span class="r14">(data))</span><span class="r12">               </span> |
|<span class="r8">   81 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   82 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   83 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">generateIndividual</span><span class="r14">(icls, size, imin, imax, cache):</span><span class="r12">                                   </span> |
|<span class="r8">   84 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> icls(numpy</span><span class="r19">.</span><span class="r14">random</span><span class="r19">.</span><span class="r14">uniform(imin, imax))</span><span class="r12">                                        </span> |
|<span class="r8">   85 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   86 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   87 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">initIndividual</span><span class="r14">(icls, cache, content):</span><span class="r12">                                                </span> |
|<span class="r8">   88 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> icls(content)</span><span class="r12">                                                                 </span> |
|<span class="r8">   89 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   90 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">sobolPopulation</span><span class="r14">(populationSize, populationDimension, lb, ub):</span><span class="r12">                        </span> |
|<span class="r8">   91 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    sobol </span><span class="r19">=</span><span class="r14"> SALib</span><span class="r19">.</span><span class="r14">sample</span><span class="r19">.</span><span class="r14">sobol_sequence</span><span class="r19">.</span><span class="r14">sample(populationSize, populationDimension)</span><span class="r12">      </span> |
|<span class="r8">   92 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    sobol </span><span class="r19">=</span><span class="r14"> sobol </span><span class="r19">*</span><span class="r14"> (ub </span><span class="r19">-</span><span class="r14"> lb) </span><span class="r19">+</span><span class="r14"> lb</span><span class="r12">                                                       </span> |
|<span class="r8">   93 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> sobol</span><span class="r12">                                                                         </span> |
|<span class="r8">   94 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   95 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   96 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">sobolGenerator</span><span class="r14">(icls, cache, n):</span><span class="r12">                                                      </span> |
|<span class="r8">   97 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> n </span><span class="r19">&gt;</span><span class="r14"> </span><span class="r19">0</span><span class="r14">:</span><span class="r12">                                                                            </span> |
|<span class="r8">   98 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        populationDimension </span><span class="r19">=</span><span class="r14"> </span><span class="r18">len</span><span class="r14">(cache</span><span class="r19">.</span><span class="r14">MIN_VALUE)</span><span class="r12">                                       </span> |
|<span class="r8">   99 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        populationSize </span><span class="r19">=</span><span class="r14"> n</span><span class="r12">                                                               </span> |
|<span class="r8">  100 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        sobol </span><span class="r19">=</span><span class="r14"> sobolPopulation(populationSize, populationDimension, numpy</span><span class="r19">.</span><span class="r14">array(cache</span><span class="r19">.</span><span class="r14">MI</span> |
|<span class="r8">  101 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        data </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">apply_along_axis(</span><span class="r18">list</span><span class="r14">, </span><span class="r19">1</span><span class="r14">, sobol)</span><span class="r12">                                    </span> |
|<span class="r8">  102 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        data </span><span class="r19">=</span><span class="r14"> </span><span class="r18">list</span><span class="r14">(</span><span class="r18">map</span><span class="r14">(icls, data))</span><span class="r12">                                                     </span> |
|<span class="r8">  103 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">return</span><span class="r14"> data</span><span class="r12">                                                                      </span> |
|<span class="r8">  104 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                                </span> |
|<span class="r8">  105 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">return</span><span class="r14"> []</span><span class="r12">                                                                        </span> |
|<span class="r8">  106 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  107 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  108 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">calcMetaScores</span><span class="r14">(scores, cache):</span><span class="r12">                                                       </span> |
|<span class="r8">  109 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    scores </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array(scores)[cache</span><span class="r19">.</span><span class="r14">meta_mask]</span><span class="r12">                                        </span> |
|<span class="r8">  110 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">allScoreSSE </span><span class="r20">and</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">MultiObjectiveSSE:</span><span class="r12">                                </span> |
|<span class="r8">  111 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        sse </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">sum(numpy</span><span class="r19">.</span><span class="r14">array(scores))</span><span class="r12">                                             </span> |
|<span class="r8">  112 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">return</span><span class="r14"> [sse, sse, sse]</span><span class="r12">                                                           </span> |
|<span class="r8">  113 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                                </span> |
|<span class="r8">  114 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        prod_score </span><span class="r19">=</span><span class="r14"> product_score(scores)</span><span class="r12">                                               </span> |
|<span class="r8">  115 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        min_score </span><span class="r19">=</span><span class="r14"> </span><span class="r18">max</span><span class="r14">(scores)</span><span class="r12">                                                          </span> |
|<span class="r8">  116 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        mean_score </span><span class="r19">=</span><span class="r14"> </span><span class="r18">sum</span><span class="r14">(scores) </span><span class="r19">/</span><span class="r14"> </span><span class="r18">len</span><span class="r14">(scores)</span><span class="r12">                                           </span> |
|<span class="r8">  117 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">return</span><span class="r14"> [prod_score, min_score, mean_score]</span><span class="r12">                                       </span> |
|<span class="r8">  118 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  119 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  120 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">product_score</span><span class="r14">(values):</span><span class="r12">                                                               </span> |
|<span class="r8">  121 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    values </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array(values)</span><span class="r12">                                                         </span> |
|<span class="r8">  122 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> </span><span class="r19">1.0</span><span class="r14"> </span><span class="r19">-</span><span class="r14"> scipy</span><span class="r19">.</span><span class="r14">stats</span><span class="r19">.</span><span class="r14">gmean(</span><span class="r19">1-</span><span class="r14">values)</span><span class="r12">                                             </span> |
|<span class="r8">  123 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  124 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  125 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">saveExperiments</span><span class="r14">(save_name_base, settings, target, results, directory, file_pattern):</span><span class="r12"> </span> |
|<span class="r8">  126 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> experiment </span><span class="r20">in</span><span class="r14"> settings[</span><span class="r11">&quot;experiments&quot;</span><span class="r14">]:</span><span class="r12">                                           </span> |
|<span class="r8">  127 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        experimentName </span><span class="r19">=</span><span class="r14"> experiment[</span><span class="r11">&quot;name&quot;</span><span class="r14">]</span><span class="r12">                                              </span> |
|<span class="r8">  128 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        simulation </span><span class="r19">=</span><span class="r14"> results[experimentName][</span><span class="r11">&quot;simulation&quot;</span><span class="r14">]</span><span class="r12">                               </span> |
|<span class="r8">  129 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">try</span><span class="r14">:</span><span class="r12">                                                                             </span> |
|<span class="r8">  130 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r21">#for addict 2.4.0 otherwise when variables are set below it can&#x27;t find __froz</span> |
|<span class="r8">  131 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            simulation</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">unfreeze()</span><span class="r12">                                                   </span> |
|<span class="r8">  132 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">except</span><span class="r14"> </span><span class="r23">TypeError</span><span class="r14">:</span><span class="r12">                                                                </span> |
|<span class="r8">  133 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">pass</span><span class="r12">                                                                         </span> |
|<span class="r8">  134 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  135 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        dst </span><span class="r19">=</span><span class="r14"> Path(directory, file_pattern </span><span class="r19">%</span><span class="r14"> (save_name_base, experimentName))</span><span class="r12">           </span> |
|<span class="r8">  136 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  137 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        same </span><span class="r19">=</span><span class="r14"> </span><span class="r13">False</span><span class="r12">                                                                     </span> |
|<span class="r8">  138 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> dst</span><span class="r19">.</span><span class="r14">is_file():</span><span class="r12">                                                                </span> |
|<span class="r8">  139 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r21"># load tolerance to see if the files are actually the same</span><span class="r12">                   </span> |
|<span class="r8">  140 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim_dst </span><span class="r19">=</span><span class="r14"> Cadet()</span><span class="r12">                                                            </span> |
|<span class="r8">  141 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim_dst</span><span class="r19">.</span><span class="r14">filename </span><span class="r19">=</span><span class="r14"> dst</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                                            </span> |
|<span class="r8">  142 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim_dst</span><span class="r19">.</span><span class="r14">load(</span><span class="r12">                                                                </span> |
|<span class="r8">  143 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                paths</span><span class="r19">=</span><span class="r14">[</span><span class="r12">                                                                  </span> |
|<span class="r8">  144 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r11">&quot;/input/solver/time_integrator&quot;</span><span class="r14">,</span><span class="r12">                                     </span> |
|<span class="r8">  145 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                ]</span><span class="r12">                                                                        </span> |
|<span class="r8">  146 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            )</span><span class="r12">                                                                            </span> |
|<span class="r8">  147 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  148 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            dst_tol </span><span class="r19">=</span><span class="r14"> sim_dst</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">solver</span><span class="r19">.</span><span class="r14">time_integrator</span><span class="r19">.</span><span class="r14">abstol</span><span class="r12">                   </span> |
|<span class="r8">  149 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim_tol </span><span class="r19">=</span><span class="r14"> simulation</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">solver</span><span class="r19">.</span><span class="r14">time_integrator</span><span class="r19">.</span><span class="r14">abstol</span><span class="r12">                </span> |
|<span class="r8">  150 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            same </span><span class="r19">=</span><span class="r14"> sim_tol </span><span class="r19">==</span><span class="r14"> dst_tol</span><span class="r12">                                                    </span> |
|<span class="r8">  151 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  152 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> same:</span><span class="r12">                                                                         </span> |
|<span class="r8">  153 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">return</span><span class="r14"> </span><span class="r13">False</span><span class="r12">                                                                 </span> |
|<span class="r8">  154 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                            </span> |
|<span class="r8">  155 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            simulation</span><span class="r19">.</span><span class="r14">filename </span><span class="r19">=</span><span class="r14"> dst</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                                         </span> |
|<span class="r8">  156 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  157 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">for</span><span class="r14"> (header, score) </span><span class="r20">in</span><span class="r14"> </span><span class="r18">zip</span><span class="r14">(</span><span class="r12">                                                  </span> |
|<span class="r8">  158 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                experiment[</span><span class="r11">&quot;headers&quot;</span><span class="r14">], results[experimentName][</span><span class="r11">&quot;scores&quot;</span><span class="r14">]</span><span class="r12">                 </span> |
|<span class="r8">  159 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            ):</span><span class="r12">                                                                           </span> |
|<span class="r8">  160 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                simulation</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">score[header] </span><span class="r19">=</span><span class="r14"> score</span><span class="r12">                                    </span> |
|<span class="r8">  161 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            simulation</span><span class="r19">.</span><span class="r14">save()</span><span class="r12">                                                            </span> |
|<span class="r8">  162 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  163 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> </span><span class="r13">True</span><span class="r12">                                                                          </span> |
|<span class="r8">  164 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  165 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  166 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">convert_individual_inputorder</span><span class="r14">(individual, cache):</span><span class="r12">                                    </span> |
|<span class="r8">  167 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cadetValues </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                     </span> |
|<span class="r8">  168 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  169 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    idx </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                                                                              </span> |
|<span class="r8">  170 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> parameter </span><span class="r20">in</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">parameters:</span><span class="r12">                                                   </span> |
|<span class="r8">  171 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        count </span><span class="r19">=</span><span class="r14"> parameter</span><span class="r19">.</span><span class="r14">count</span><span class="r12">                                                          </span> |
|<span class="r8">  172 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> count:</span><span class="r12">                                                                        </span> |
|<span class="r8">  173 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            seq </span><span class="r19">=</span><span class="r14"> individual[idx : idx </span><span class="r19">+</span><span class="r14"> count]</span><span class="r12">                                          </span> |
|<span class="r8">  174 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            values </span><span class="r19">=</span><span class="r14"> parameter</span><span class="r19">.</span><span class="r14">untransform_inputorder(seq)</span><span class="r12">                               </span> |
|<span class="r8">  175 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            cadetValues</span><span class="r19">.</span><span class="r14">extend(values)</span><span class="r12">                                                   </span> |
|<span class="r8">  176 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            idx </span><span class="r19">+=</span><span class="r14"> count</span><span class="r12">                                                                 </span> |
|<span class="r8">  177 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  178 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> cadetValues</span><span class="r12">                                                                   </span> |
|<span class="r8">  179 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  180 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  181 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">convert_individual</span><span class="r14">(individual, cache):</span><span class="r12">                                               </span> |
|<span class="r8">  182 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cadetValues </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                     </span> |
|<span class="r8">  183 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cadetValuesExtended </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                             </span> |
|<span class="r8">  184 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  185 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    idx </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                                                                              </span> |
|<span class="r8">  186 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> parameter </span><span class="r20">in</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">parameters:</span><span class="r12">                                                   </span> |
|<span class="r8">  187 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        count </span><span class="r19">=</span><span class="r14"> parameter</span><span class="r19">.</span><span class="r14">count</span><span class="r12">                                                          </span> |
|<span class="r8">  188 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> count:</span><span class="r12">                                                                        </span> |
|<span class="r8">  189 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            seq </span><span class="r19">=</span><span class="r14"> individual[idx : idx </span><span class="r19">+</span><span class="r14"> count]</span><span class="r12">                                          </span> |
|<span class="r8">  190 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            values, headerValues </span><span class="r19">=</span><span class="r14"> parameter</span><span class="r19">.</span><span class="r14">untransform(seq)</span><span class="r12">                            </span> |
|<span class="r8">  191 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            cadetValues</span><span class="r19">.</span><span class="r14">extend(values)</span><span class="r12">                                                   </span> |
|<span class="r8">  192 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            cadetValuesExtended</span><span class="r19">.</span><span class="r14">extend(headerValues)</span><span class="r12">                                     </span> |
|<span class="r8">  193 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            idx </span><span class="r19">+=</span><span class="r14"> count</span><span class="r12">                                                                 </span> |
|<span class="r8">  194 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  195 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> cadetValues, cadetValuesExtended</span><span class="r12">                                              </span> |
|<span class="r8">  196 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  197 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  198 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">convert_individual_grad</span><span class="r14">(individual, cache):</span><span class="r12">                                          </span> |
|<span class="r8">  199 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cadetValues </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                     </span> |
|<span class="r8">  200 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  201 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    idx </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                                                                              </span> |
|<span class="r8">  202 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> parameter </span><span class="r20">in</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">parameters:</span><span class="r12">                                                   </span> |
|<span class="r8">  203 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        count </span><span class="r19">=</span><span class="r14"> parameter</span><span class="r19">.</span><span class="r14">count</span><span class="r12">                                                          </span> |
|<span class="r8">  204 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> count:</span><span class="r12">                                                                        </span> |
|<span class="r8">  205 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            seq </span><span class="r19">=</span><span class="r14"> individual[idx : idx </span><span class="r19">+</span><span class="r14"> count]</span><span class="r12">                                          </span> |
|<span class="r8">  206 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            values </span><span class="r19">=</span><span class="r14"> parameter</span><span class="r19">.</span><span class="r14">grad_untransform(seq)</span><span class="r12">                                     </span> |
|<span class="r8">  207 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            cadetValues</span><span class="r19">.</span><span class="r14">extend(values)</span><span class="r12">                                                   </span> |
|<span class="r8">  208 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            idx </span><span class="r19">+=</span><span class="r14"> count</span><span class="r12">                                                                 </span> |
|<span class="r8">  209 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  210 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> cadetValues</span><span class="r12">                                                                   </span> |
|<span class="r8">  211 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  212 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  213 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">convert_population</span><span class="r14">(population, cache):</span><span class="r12">                                               </span> |
|<span class="r8">  214 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cadetValues </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">zeros(population</span><span class="r19">.</span><span class="r14">shape)</span><span class="r12">                                          </span> |
|<span class="r8">  215 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  216 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    idx </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                                                                              </span> |
|<span class="r8">  217 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> parameter </span><span class="r20">in</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">parameters:</span><span class="r12">                                                   </span> |
|<span class="r8">  218 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        count </span><span class="r19">=</span><span class="r14"> parameter</span><span class="r19">.</span><span class="r14">count</span><span class="r12">                                                          </span> |
|<span class="r8">  219 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> count:</span><span class="r12">                                                                        </span> |
|<span class="r8">  220 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            matrix </span><span class="r19">=</span><span class="r14"> population[:, idx : idx </span><span class="r19">+</span><span class="r14"> count]</span><span class="r12">                                    </span> |
|<span class="r8">  221 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            values </span><span class="r19">=</span><span class="r14"> parameter</span><span class="r19">.</span><span class="r14">untransform_matrix(matrix)</span><span class="r12">                                </span> |
|<span class="r8">  222 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            cadetValues[:, idx : idx </span><span class="r19">+</span><span class="r14"> count] </span><span class="r19">=</span><span class="r14"> values</span><span class="r12">                                   </span> |
|<span class="r8">  223 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            idx </span><span class="r19">+=</span><span class="r14"> count</span><span class="r12">                                                                 </span> |
|<span class="r8">  224 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  225 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> cadetValues</span><span class="r12">                                                                   </span> |
|<span class="r8">  226 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  227 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  228 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">convert_population_inputorder</span><span class="r14">(population, cache):</span><span class="r12">                                    </span> |
|<span class="r8">  229 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> </span><span class="r18">len</span><span class="r14">(population):</span><span class="r12">                                                                  </span> |
|<span class="r8">  230 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cadetValues </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">zeros(population</span><span class="r19">.</span><span class="r14">shape)</span><span class="r12">                                      </span> |
|<span class="r8">  231 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  232 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        idx </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                                                                          </span> |
|<span class="r8">  233 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> parameter </span><span class="r20">in</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">parameters:</span><span class="r12">                                               </span> |
|<span class="r8">  234 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            count </span><span class="r19">=</span><span class="r14"> parameter</span><span class="r19">.</span><span class="r14">count</span><span class="r12">                                                      </span> |
|<span class="r8">  235 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> count:</span><span class="r12">                                                                    </span> |
|<span class="r8">  236 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                matrix </span><span class="r19">=</span><span class="r14"> population[:, idx : idx </span><span class="r19">+</span><span class="r14"> count]</span><span class="r12">                                </span> |
|<span class="r8">  237 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                values </span><span class="r19">=</span><span class="r14"> parameter</span><span class="r19">.</span><span class="r14">untransform_matrix_inputorder(matrix)</span><span class="r12">                 </span> |
|<span class="r8">  238 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                cadetValues[:, idx : idx </span><span class="r19">+</span><span class="r14"> count] </span><span class="r19">=</span><span class="r14"> values</span><span class="r12">                               </span> |
|<span class="r8">  239 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                idx </span><span class="r19">+=</span><span class="r14"> count</span><span class="r12">                                                             </span> |
|<span class="r8">  240 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  241 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">return</span><span class="r14"> cadetValues</span><span class="r12">                                                               </span> |
|<span class="r8">  242 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                                </span> |
|<span class="r8">  243 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">return</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array([])</span><span class="r12">                                                           </span> |
|<span class="r8">  244 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  245 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  246 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">convert_individual_inverse</span><span class="r14">(individual, cache):</span><span class="r12">                                       </span> |
|<span class="r8">  247 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array([f(v) </span><span class="r13">for</span><span class="r14"> f, v </span><span class="r20">in</span><span class="r14"> </span><span class="r18">zip</span><span class="r14">(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;transform&quot;</span><span class="r14">], individual)])</span><span class="r12">  </span> |
|<span class="r8">  248 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  249 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  250 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">convert_individual_inverse_grad</span><span class="r14">(individual, cache):</span><span class="r12">                                  </span> |
|<span class="r8">  251 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array(</span><span class="r12">                                                                  </span> |
|<span class="r8">  252 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        [f(v) </span><span class="r13">for</span><span class="r14"> f, v </span><span class="r20">in</span><span class="r14"> </span><span class="r18">zip</span><span class="r14">(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;grad_transform&quot;</span><span class="r14">], individual)]</span><span class="r12">             </span> |
|<span class="r8">  253 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    )</span><span class="r12">                                                                                    </span> |
|<span class="r8">  254 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  255 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  256 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">set_simulation</span><span class="r14">(individual, simulation, settings, cache, experiment):</span><span class="r12">                 </span> |
|<span class="r8">  257 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">debug(</span><span class="r11">&quot;individual </span><span class="r22">%s</span><span class="r11">&quot;</span><span class="r14">, individual)</span><span class="r12">                      </span> |
|<span class="r8">  258 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  259 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cadetValues </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                     </span> |
|<span class="r8">  260 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cadetValuesKEQ </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                  </span> |
|<span class="r8">  261 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  262 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    idx </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                                                                              </span> |
|<span class="r8">  263 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> parameter </span><span class="r20">in</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">parameters:</span><span class="r12">                                                   </span> |
|<span class="r8">  264 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        count </span><span class="r19">=</span><span class="r14"> parameter</span><span class="r19">.</span><span class="r14">count</span><span class="r12">                                                          </span> |
|<span class="r8">  265 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21"># even if count is 0 this needs to be run so that setSimulation will be run for t</span> |
|<span class="r8">  266 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        seq </span><span class="r19">=</span><span class="r14"> individual[idx : idx </span><span class="r19">+</span><span class="r14"> count]</span><span class="r12">                                              </span> |
|<span class="r8">  267 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        values, headerValues </span><span class="r19">=</span><span class="r14"> parameter</span><span class="r19">.</span><span class="r14">setSimulation(simulation, seq, experiment)</span><span class="r12">      </span> |
|<span class="r8">  268 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cadetValues</span><span class="r19">.</span><span class="r14">extend(values)</span><span class="r12">                                                       </span> |
|<span class="r8">  269 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cadetValuesKEQ</span><span class="r19">.</span><span class="r14">extend(headerValues)</span><span class="r12">                                              </span> |
|<span class="r8">  270 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        idx </span><span class="r19">+=</span><span class="r14"> count</span><span class="r12">                                                                     </span> |
|<span class="r8">  271 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  272 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">debug(</span><span class="r11">&quot;finished setting hdf5&quot;</span><span class="r14">)</span><span class="r12">                          </span> |
|<span class="r8">  273 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> cadetValues, cadetValuesKEQ</span><span class="r12">                                                   </span> |
|<span class="r8">  274 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  275 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  276 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">getBoundOffset</span><span class="r14">(unit):</span><span class="r12">                                                                </span> |
|<span class="r8">  277 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> unit</span><span class="r19">.</span><span class="r14">unit_type </span><span class="r19">==</span><span class="r14"> </span><span class="r11">b&quot;CSTR&quot;</span><span class="r14">:</span><span class="r12">                                                        </span> |
|<span class="r8">  278 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        NBOUND </span><span class="r19">=</span><span class="r14"> unit</span><span class="r19">.</span><span class="r14">nbound</span><span class="r12">                                                             </span> |
|<span class="r8">  279 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                                </span> |
|<span class="r8">  280 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        NBOUND </span><span class="r19">=</span><span class="r14"> unit</span><span class="r19">.</span><span class="r14">discretization</span><span class="r19">.</span><span class="r14">nbound</span><span class="r12">                                              </span> |
|<span class="r8">  281 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  282 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r18">len</span><span class="r14">(NBOUND):</span><span class="r12">                                                                  </span> |
|<span class="r8">  283 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r11">&quot;If NBOUND is empty it is all zero&quot;</span><span class="r12">                                              </span> |
|<span class="r8">  284 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        NBOUND </span><span class="r19">=</span><span class="r14"> [</span><span class="r19">0</span><span class="r14">] </span><span class="r19">*</span><span class="r14"> unit</span><span class="r19">.</span><span class="r14">ncomp</span><span class="r12">                                                        </span> |
|<span class="r8">  285 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  286 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    boundOffset </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">cumsum(</span><span class="r12">                                                          </span> |
|<span class="r8">  287 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        numpy</span><span class="r19">.</span><span class="r14">concatenate(</span><span class="r12">                                                               </span> |
|<span class="r8">  288 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            [</span><span class="r12">                                                                            </span> |
|<span class="r8">  289 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                [</span><span class="r12">                                                                        </span> |
|<span class="r8">  290 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r19">0</span><span class="r14">,</span><span class="r12">                                                                   </span> |
|<span class="r8">  291 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                ],</span><span class="r12">                                                                       </span> |
|<span class="r8">  292 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                NBOUND,</span><span class="r12">                                                                  </span> |
|<span class="r8">  293 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            ]</span><span class="r12">                                                                            </span> |
|<span class="r8">  294 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        )</span><span class="r12">                                                                                </span> |
|<span class="r8">  295 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    )</span><span class="r12">                                                                                    </span> |
|<span class="r8">  296 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> boundOffset</span><span class="r12">                                                                   </span> |
|<span class="r8">  297 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  298 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  299 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">runExperiment</span><span class="r14">(</span><span class="r12">                                                                       </span> |
|<span class="r8">  300 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    individual,</span><span class="r12">                                                                          </span> |
|<span class="r8">  301 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    experiment,</span><span class="r12">                                                                          </span> |
|<span class="r8">  302 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    settings,</span><span class="r12">                                                                            </span> |
|<span class="r8">  303 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    target,</span><span class="r12">                                                                              </span> |
|<span class="r8">  304 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    template_sim,</span><span class="r12">                                                                        </span> |
|<span class="r8">  305 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    timeout,</span><span class="r12">                                                                             </span> |
|<span class="r8">  306 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache,</span><span class="r12">                                                                               </span> |
|<span class="r8">  307 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    post_function</span><span class="r19">=</span><span class="r13">None</span><span class="r14">,</span><span class="r12">                                                                  </span> |
|<span class="r8">  308 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">):</span><span class="r12">                                                                                       </span> |
|<span class="r8">  309 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    simulation </span><span class="r19">=</span><span class="r14"> Cadet(template_sim</span><span class="r19">.</span><span class="r14">root)</span><span class="r12">                                                </span> |
|<span class="r8">  310 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  311 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> simulation</span><span class="r19">.</span><span class="r14">is_file:</span><span class="r12">                                                               </span> |
|<span class="r8">  312 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        handle, path </span><span class="r19">=</span><span class="r14"> tempfile</span><span class="r19">.</span><span class="r14">mkstemp(suffix</span><span class="r19">=</span><span class="r11">&quot;.h5&quot;</span><span class="r14">, </span><span class="r18">dir</span><span class="r19">=</span><span class="r14">cache</span><span class="r19">.</span><span class="r14">tempDir)</span><span class="r12">                 </span> |
|<span class="r8">  313 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        os</span><span class="r19">.</span><span class="r14">close(handle)</span><span class="r12">                                                                 </span> |
|<span class="r8">  314 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r12">                                                                                     </span> |
|<span class="r8">  315 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        simulation</span><span class="r19">.</span><span class="r14">filename </span><span class="r19">=</span><span class="r14"> path</span><span class="r12">                                                       </span> |
|<span class="r8">  316 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  317 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    simulation</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">solver</span><span class="r19">.</span><span class="r14">nthreads </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;nThreads&quot;</span><span class="r14">, </span><span class="r19">1</span><span class="r14">))</span><span class="r12">             </span> |
|<span class="r8">  318 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  319 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> individual </span><span class="r20">is</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r13">None</span><span class="r14">:</span><span class="r12">                                                           </span> |
|<span class="r8">  320 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cadetValues, cadetValuesKEQ </span><span class="r19">=</span><span class="r14"> set_simulation(</span><span class="r12">                                    </span> |
|<span class="r8">  321 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            individual, simulation, settings, cache, experiment</span><span class="r12">                          </span> |
|<span class="r8">  322 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        )</span><span class="r12">                                                                                </span> |
|<span class="r8">  323 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                                </span> |
|<span class="r8">  324 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cadetValues </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                 </span> |
|<span class="r8">  325 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cadetValuesKEQ </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                              </span> |
|<span class="r8">  326 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  327 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> simulation</span><span class="r19">.</span><span class="r14">is_file:</span><span class="r12">                                                               </span> |
|<span class="r8">  328 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        simulation</span><span class="r19">.</span><span class="r14">save()</span><span class="r12">                                                                </span> |
|<span class="r8">  329 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  330 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">try</span><span class="r14">:</span><span class="r12">                                                                                 </span> |
|<span class="r8">  331 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        simulation</span><span class="r19">.</span><span class="r14">run(timeout</span><span class="r19">=</span><span class="r14">timeout, check</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                                      </span> |
|<span class="r8">  332 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">except</span><span class="r14"> subprocess</span><span class="r19">.</span><span class="r14">TimeoutExpired:</span><span class="r12">                                                    </span> |
|<span class="r8">  333 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">warn(</span><span class="r11">&quot;Simulation Timed Out&quot;</span><span class="r14">)</span><span class="r12">                        </span> |
|<span class="r8">  334 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        simulation</span><span class="r19">.</span><span class="r14">clear()</span><span class="r12">                                                               </span> |
|<span class="r8">  335 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> simulation</span><span class="r19">.</span><span class="r14">is_file:</span><span class="r12">                                                           </span> |
|<span class="r8">  336 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            os</span><span class="r19">.</span><span class="r14">remove(path)</span><span class="r12">                                                              </span> |
|<span class="r8">  337 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">return</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                                      </span> |
|<span class="r8">  338 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  339 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">except</span><span class="r14"> subprocess</span><span class="r19">.</span><span class="r14">CalledProcessError </span><span class="r13">as</span><span class="r14"> error:</span><span class="r12">                                       </span> |
|<span class="r8">  340 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">error(</span><span class="r11">&quot;The simulation failed </span><span class="r22">%s</span><span class="r11">&quot;</span><span class="r14">, individual)</span><span class="r12">       </span> |
|<span class="r8">  341 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        logError(cache, cadetValuesKEQ, error)</span><span class="r12">                                           </span> |
|<span class="r8">  342 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        simulation</span><span class="r19">.</span><span class="r14">clear()</span><span class="r12">                                                               </span> |
|<span class="r8">  343 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">return</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                                      </span> |
|<span class="r8">  344 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  345 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r21"># read sim data</span><span class="r12">                                                                      </span> |
|<span class="r8">  346 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    simulation</span><span class="r19">.</span><span class="r14">load_results()</span><span class="r12">                                                            </span> |
|<span class="r8">  347 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    simulation</span><span class="r19">.</span><span class="r14">clear()</span><span class="r12">                                                                   </span> |
|<span class="r8">  348 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  349 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> simulation</span><span class="r19">.</span><span class="r14">is_file:</span><span class="r12">                                                               </span> |
|<span class="r8">  350 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        os</span><span class="r19">.</span><span class="r14">remove(path)</span><span class="r12">                                                                  </span> |
|<span class="r8">  351 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  352 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    user_solution_times </span><span class="r19">=</span><span class="r14"> simulation</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">solver</span><span class="r19">.</span><span class="r14">user_solution_times</span><span class="r12">               </span> |
|<span class="r8">  353 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    simulationFailed </span><span class="r19">=</span><span class="r14"> </span><span class="r18">len</span><span class="r14">(simulation</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">output</span><span class="r19">.</span><span class="r14">solution</span><span class="r19">.</span><span class="r14">solution_times) </span><span class="r19">!=</span><span class="r14"> </span><span class="r18">len</span><span class="r14">(user_so</span> |
|<span class="r8">  354 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> simulationFailed:</span><span class="r12">                                                                 </span> |
|<span class="r8">  355 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> simulation</span><span class="r19">.</span><span class="r14">is_file:</span><span class="r12">                                                       </span> |
|<span class="r8">  356 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            path </span><span class="r19">=</span><span class="r14"> </span><span class="r11">&quot;dll interface&quot;</span><span class="r12">                                                       </span> |
|<span class="r8">  357 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">error(</span><span class="r12">                                              </span> |
|<span class="r8">  358 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;</span><span class="r22">%s</span><span class="r11"> sim must have failed </span><span class="r22">%s</span><span class="r11">&quot;</span><span class="r14">, individual, path</span><span class="r12">                               </span> |
|<span class="r8">  359 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        )</span><span class="r12">                                                                                </span> |
|<span class="r8">  360 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">return</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                                      </span> |
|<span class="r8">  361 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">debug(</span><span class="r11">&quot;Everything ran fine&quot;</span><span class="r14">)</span><span class="r12">                            </span> |
|<span class="r8">  362 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  363 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> post_function:</span><span class="r12">                                                                    </span> |
|<span class="r8">  364 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        post_function(simulation)</span><span class="r12">                                                        </span> |
|<span class="r8">  365 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  366 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    temp </span><span class="r19">=</span><span class="r14"> {}</span><span class="r12">                                                                            </span> |
|<span class="r8">  367 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    temp[</span><span class="r11">&quot;simulation&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> simulation</span><span class="r12">                                                      </span> |
|<span class="r8">  368 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    temp[</span><span class="r11">&quot;path&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> path </span><span class="r13">if</span><span class="r14"> simulation</span><span class="r19">.</span><span class="r14">is_file </span><span class="r13">else</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                  </span> |
|<span class="r8">  369 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    temp[</span><span class="r11">&quot;scores&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                  </span> |
|<span class="r8">  370 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    temp[</span><span class="r11">&quot;error&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0.0</span><span class="r12">                                                                  </span> |
|<span class="r8">  371 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    temp[</span><span class="r11">&quot;error_count&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0.0</span><span class="r12">                                                            </span> |
|<span class="r8">  372 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    temp[</span><span class="r11">&quot;cadetValues&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> cadetValues</span><span class="r12">                                                    </span> |
|<span class="r8">  373 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    temp[</span><span class="r11">&quot;cadetValuesKEQ&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> cadetValuesKEQ</span><span class="r12">                                              </span> |
|<span class="r8">  374 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  375 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> individual </span><span class="r20">is</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r13">None</span><span class="r14">:</span><span class="r12">                                                           </span> |
|<span class="r8">  376 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        temp[</span><span class="r11">&quot;individual&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r18">tuple</span><span class="r14">(individual)</span><span class="r12">                                           </span> |
|<span class="r8">  377 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    temp[</span><span class="r11">&quot;diff&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                    </span> |
|<span class="r8">  378 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    temp[</span><span class="r11">&quot;sim_time&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                </span> |
|<span class="r8">  379 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    temp[</span><span class="r11">&quot;sim_value&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                               </span> |
|<span class="r8">  380 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    temp[</span><span class="r11">&quot;exp_value&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                               </span> |
|<span class="r8">  381 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  382 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> feature </span><span class="r20">in</span><span class="r14"> experiment[</span><span class="r11">&quot;scores&quot;</span><span class="r14">]:</span><span class="r12">                                                 </span> |
|<span class="r8">  383 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        featureType </span><span class="r19">=</span><span class="r14"> feature[</span><span class="r11">&quot;type&quot;</span><span class="r14">]</span><span class="r12">                                                    </span> |
|<span class="r8">  384 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        featureName </span><span class="r19">=</span><span class="r14"> feature[</span><span class="r11">&quot;name&quot;</span><span class="r14">]</span><span class="r12">                                                    </span> |
|<span class="r8">  385 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  386 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> featureType </span><span class="r20">in</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">scores:</span><span class="r12">                                                  </span> |
|<span class="r8">  387 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r21">#try:</span><span class="r12">                                                                        </span> |
|<span class="r8">  388 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            (</span><span class="r12">                                                                            </span> |
|<span class="r8">  389 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                scores,</span><span class="r12">                                                                  </span> |
|<span class="r8">  390 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                sse,</span><span class="r12">                                                                     </span> |
|<span class="r8">  391 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                sse_count,</span><span class="r12">                                                               </span> |
|<span class="r8">  392 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                sim_time,</span><span class="r12">                                                                </span> |
|<span class="r8">  393 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                sim_value,</span><span class="r12">                                                               </span> |
|<span class="r8">  394 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                exp_value</span><span class="r12">                                                                </span> |
|<span class="r8">  395 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            ) </span><span class="r19">=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">scores[featureType]</span><span class="r19">.</span><span class="r14">run(</span><span class="r12">                                           </span> |
|<span class="r8">  396 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                temp, target[experiment[</span><span class="r11">&quot;name&quot;</span><span class="r14">]][featureName]</span><span class="r12">                            </span> |
|<span class="r8">  397 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            )</span><span class="r12">                                                                            </span> |
|<span class="r8">  398 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r21">#except TypeError:</span><span class="r12">                                                           </span> |
|<span class="r8">  399 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r21">#    return None</span><span class="r12">                                                             </span> |
|<span class="r8">  400 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  401 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            diff </span><span class="r19">=</span><span class="r14"> sim_value </span><span class="r19">-</span><span class="r14"> exp_value</span><span class="r12">                                                 </span> |
|<span class="r8">  402 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  403 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            temp[</span><span class="r11">&quot;scores&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">extend(scores)</span><span class="r12">                                                </span> |
|<span class="r8">  404 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            temp[</span><span class="r11">&quot;error&quot;</span><span class="r14">] </span><span class="r19">+=</span><span class="r14"> sse</span><span class="r12">                                                         </span> |
|<span class="r8">  405 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            temp[</span><span class="r11">&quot;error_count&quot;</span><span class="r14">] </span><span class="r19">+=</span><span class="r14"> sse_count</span><span class="r12">                                             </span> |
|<span class="r8">  406 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            temp[</span><span class="r11">&quot;diff&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">extend(diff)</span><span class="r12">                                                    </span> |
|<span class="r8">  407 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            temp[</span><span class="r11">&quot;sim_time&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">append(sim_time)</span><span class="r12">                                            </span> |
|<span class="r8">  408 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            temp[</span><span class="r11">&quot;sim_value&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">append(sim_value)</span><span class="r12">                                          </span> |
|<span class="r8">  409 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            temp[</span><span class="r11">&quot;exp_value&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">append(exp_value)</span><span class="r12">                                          </span> |
|<span class="r8">  410 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  411 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> temp</span><span class="r12">                                                                          </span> |
|<span class="r8">  412 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  413 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  414 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">logError</span><span class="r14">(cache, values, error):</span><span class="r12">                                                      </span> |
|<span class="r8">  415 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">with</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">error_path</span><span class="r19">.</span><span class="r14">open(</span><span class="r11">&quot;a&quot;</span><span class="r14">, newline</span><span class="r19">=</span><span class="r11">&quot;&quot;</span><span class="r14">) </span><span class="r13">as</span><span class="r14"> csvfile:</span><span class="r12">                              </span> |
|<span class="r8">  416 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        writer </span><span class="r19">=</span><span class="r14"> csv</span><span class="r19">.</span><span class="r14">writer(csvfile, delimiter</span><span class="r19">=</span><span class="r11">&quot;,&quot;</span><span class="r14">, quoting</span><span class="r19">=</span><span class="r14">csv</span><span class="r19">.</span><span class="r14">QUOTE_ALL)</span><span class="r12">               </span> |
|<span class="r8">  417 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  418 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        row </span><span class="r19">=</span><span class="r14"> </span><span class="r18">list</span><span class="r14">(values)</span><span class="r12">                                                               </span> |
|<span class="r8">  419 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        row</span><span class="r19">.</span><span class="r14">append(error</span><span class="r19">.</span><span class="r14">returncode)</span><span class="r12">                                                     </span> |
|<span class="r8">  420 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        row</span><span class="r19">.</span><span class="r14">append(error</span><span class="r19">.</span><span class="r14">stdout)</span><span class="r12">                                                         </span> |
|<span class="r8">  421 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        row</span><span class="r19">.</span><span class="r14">append(error</span><span class="r19">.</span><span class="r14">stderr)</span><span class="r12">                                                         </span> |
|<span class="r8">  422 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  423 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        writer</span><span class="r19">.</span><span class="r14">writerow(row)</span><span class="r12">                                                             </span> |
|<span class="r8">  424 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  425 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  426 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">repeatSimulation</span><span class="r14">(idx):</span><span class="r12">                                                               </span> |
|<span class="r8">  427 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r11">&quot;read the original json file and copy it to a subdirectory for each repeat and change</span> |
|<span class="r8">  428 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    settings_file </span><span class="r19">=</span><span class="r14"> Path(sys</span><span class="r19">.</span><span class="r14">argv[</span><span class="r19">1</span><span class="r14">])</span><span class="r12">                                                    </span> |
|<span class="r8">  429 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">with</span><span class="r14"> settings_file</span><span class="r19">.</span><span class="r14">open() </span><span class="r13">as</span><span class="r14"> json_data:</span><span class="r12">                                              </span> |
|<span class="r8">  430 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        settings </span><span class="r19">=</span><span class="r14"> jstyleson</span><span class="r19">.</span><span class="r14">load(json_data)</span><span class="r12">                                             </span> |
|<span class="r8">  431 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  432 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        baseDir </span><span class="r19">=</span><span class="r14"> settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;baseDir&quot;</span><span class="r14">, </span><span class="r13">None</span><span class="r14">)</span><span class="r12">                                          </span> |
|<span class="r8">  433 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> baseDir </span><span class="r20">is</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r13">None</span><span class="r14">:</span><span class="r12">                                                          </span> |
|<span class="r8">  434 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            baseDir </span><span class="r19">=</span><span class="r14"> Path(baseDir)</span><span class="r12">                                                      </span> |
|<span class="r8">  435 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> baseDir </span><span class="r19">/</span><span class="r14"> settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]</span><span class="r12">                    </span> |
|<span class="r8">  436 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  437 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        resultDir </span><span class="r19">=</span><span class="r14"> Path(settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r18">str</span><span class="r14">(idx)</span><span class="r12">                              </span> |
|<span class="r8">  438 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        resultDir</span><span class="r19">.</span><span class="r14">mkdir(parents</span><span class="r19">=</span><span class="r13">True</span><span class="r14">, exist_ok</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                                     </span> |
|<span class="r8">  439 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  440 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        settings[</span><span class="r11">&quot;resultsDirOriginal&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">               </span> |
|<span class="r8">  441 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> resultDir</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                                    </span> |
|<span class="r8">  442 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  443 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> baseDir </span><span class="r20">is</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r13">None</span><span class="r14">:</span><span class="r12">                                                          </span> |
|<span class="r8">  444 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            settings[</span><span class="r11">&quot;baseDir&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> baseDir</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                                     </span> |
|<span class="r8">  445 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  446 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        new_settings_file </span><span class="r19">=</span><span class="r14"> resultDir </span><span class="r19">/</span><span class="r14"> settings_file</span><span class="r19">.</span><span class="r14">name</span><span class="r12">                               </span> |
|<span class="r8">  447 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">with</span><span class="r14"> new_settings_file</span><span class="r19">.</span><span class="r14">open(mode</span><span class="r19">=</span><span class="r11">&quot;w&quot;</span><span class="r14">) </span><span class="r13">as</span><span class="r14"> json_data:</span><span class="r12">                              </span> |
|<span class="r8">  448 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            jstyleson</span><span class="r19">.</span><span class="r14">dump(settings, json_data, indent</span><span class="r19">=4</span><span class="r14">, sort_keys</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                </span> |
|<span class="r8">  449 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">return</span><span class="r14"> new_settings_file</span><span class="r12">                                                         </span> |
|<span class="r8">  450 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  451 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  452 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">setupMCMC</span><span class="r14">(cache):</span><span class="r12">                                                                    </span> |
|<span class="r8">  453 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r11">&quot;read the original json file and make an mcmc file based on it with new boundaries&quot;</span><span class="r12">  </span> |
|<span class="r8">  454 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    settings_file </span><span class="r19">=</span><span class="r14"> Path(sys</span><span class="r19">.</span><span class="r14">argv[</span><span class="r19">1</span><span class="r14">])</span><span class="r12">                                                    </span> |
|<span class="r8">  455 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">with</span><span class="r14"> settings_file</span><span class="r19">.</span><span class="r14">open() </span><span class="r13">as</span><span class="r14"> json_data:</span><span class="r12">                                              </span> |
|<span class="r8">  456 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        settings </span><span class="r19">=</span><span class="r14"> jstyleson</span><span class="r19">.</span><span class="r14">load(json_data)</span><span class="r12">                                             </span> |
|<span class="r8">  457 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        settings[</span><span class="r11">&quot;continueMCMC&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                                                     </span> |
|<span class="r8">  458 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  459 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        baseDir </span><span class="r19">=</span><span class="r14"> settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;baseDir&quot;</span><span class="r14">, </span><span class="r13">None</span><span class="r14">)</span><span class="r12">                                          </span> |
|<span class="r8">  460 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> baseDir </span><span class="r20">is</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r13">None</span><span class="r14">:</span><span class="r12">                                                          </span> |
|<span class="r8">  461 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            baseDir </span><span class="r19">=</span><span class="r14"> Path(baseDir)</span><span class="r12">                                                      </span> |
|<span class="r8">  462 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> baseDir </span><span class="r19">/</span><span class="r14"> settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]</span><span class="r12">                    </span> |
|<span class="r8">  463 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  464 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        resultDirOriginal </span><span class="r19">=</span><span class="r14"> Path(settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">])</span><span class="r12">                                 </span> |
|<span class="r8">  465 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        resultsOriginal </span><span class="r19">=</span><span class="r14"> resultDirOriginal </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;result.h5&quot;</span><span class="r12">                                </span> |
|<span class="r8">  466 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        resultDir </span><span class="r19">=</span><span class="r14"> resultDirOriginal </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;mcmc_refine&quot;</span><span class="r12">                                    </span> |
|<span class="r8">  467 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        resultDir</span><span class="r19">.</span><span class="r14">mkdir(parents</span><span class="r19">=</span><span class="r13">True</span><span class="r14">, exist_ok</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                                     </span> |
|<span class="r8">  468 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  469 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        settings[</span><span class="r11">&quot;resultsDirOriginal&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> resultDirOriginal</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                    </span> |
|<span class="r8">  470 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> resultDir</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                                    </span> |
|<span class="r8">  471 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        settings[</span><span class="r11">&quot;PreviousResults&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> resultsOriginal</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                         </span> |
|<span class="r8">  472 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  473 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> baseDir </span><span class="r20">is</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r13">None</span><span class="r14">:</span><span class="r12">                                                          </span> |
|<span class="r8">  474 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            settings[</span><span class="r11">&quot;baseDir&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> baseDir</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                                     </span> |
|<span class="r8">  475 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  476 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;mcmc_h5&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> settings:</span><span class="r12">                                                        </span> |
|<span class="r8">  477 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            update_json_mcmc(settings)</span><span class="r12">                                                   </span> |
|<span class="r8">  478 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  479 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        settings[</span><span class="r11">&quot;searchMethod&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r11">&quot;MCMC&quot;</span><span class="r12">                                                </span> |
|<span class="r8">  480 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  481 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> experiment </span><span class="r20">in</span><span class="r14"> settings[</span><span class="r11">&quot;experiments&quot;</span><span class="r14">]:</span><span class="r12">                                       </span> |
|<span class="r8">  482 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            foundAbsoluteTime </span><span class="r19">=</span><span class="r14"> </span><span class="r13">False</span><span class="r12">                                                    </span> |
|<span class="r8">  483 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            foundAbsoluteHeight </span><span class="r19">=</span><span class="r14"> </span><span class="r13">False</span><span class="r12">                                                  </span> |
|<span class="r8">  484 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">for</span><span class="r14"> feature </span><span class="r20">in</span><span class="r14"> experiment[</span><span class="r11">&quot;scores&quot;</span><span class="r14">]:</span><span class="r12">                                         </span> |
|<span class="r8">  485 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">if</span><span class="r14"> feature[</span><span class="r11">&quot;type&quot;</span><span class="r14">] </span><span class="r19">==</span><span class="r14"> </span><span class="r11">&quot;AbsoluteTime&quot;</span><span class="r14">:</span><span class="r12">                                    </span> |
|<span class="r8">  486 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    foundAbsoluteTime </span><span class="r19">=</span><span class="r14"> </span><span class="r13">True</span><span class="r12">                                             </span> |
|<span class="r8">  487 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">if</span><span class="r14"> feature[</span><span class="r11">&quot;type&quot;</span><span class="r14">] </span><span class="r19">==</span><span class="r14"> </span><span class="r11">&quot;AbsoluteHeight&quot;</span><span class="r14">:</span><span class="r12">                                  </span> |
|<span class="r8">  488 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    foundAbsoluteHeight </span><span class="r19">=</span><span class="r14"> </span><span class="r13">True</span><span class="r12">                                           </span> |
|<span class="r8">  489 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> foundAbsoluteTime </span><span class="r20">is</span><span class="r14"> </span><span class="r13">False</span><span class="r14">:</span><span class="r12">                                               </span> |
|<span class="r8">  490 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                experiment[</span><span class="r11">&quot;scores&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">append(</span><span class="r12">                                             </span> |
|<span class="r8">  491 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    {</span><span class="r11">&quot;name&quot;</span><span class="r14">: </span><span class="r11">&quot;AbsoluteTime&quot;</span><span class="r14">, </span><span class="r11">&quot;type&quot;</span><span class="r14">: </span><span class="r11">&quot;AbsoluteTime&quot;</span><span class="r14">}</span><span class="r12">                     </span> |
|<span class="r8">  492 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                )</span><span class="r12">                                                                        </span> |
|<span class="r8">  493 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> foundAbsoluteHeight </span><span class="r20">is</span><span class="r14"> </span><span class="r13">False</span><span class="r14">:</span><span class="r12">                                             </span> |
|<span class="r8">  494 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                experiment[</span><span class="r11">&quot;scores&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">append(</span><span class="r12">                                             </span> |
|<span class="r8">  495 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    {</span><span class="r11">&quot;name&quot;</span><span class="r14">: </span><span class="r11">&quot;AbsoluteHeight&quot;</span><span class="r14">, </span><span class="r11">&quot;type&quot;</span><span class="r14">: </span><span class="r11">&quot;AbsoluteHeight&quot;</span><span class="r14">}</span><span class="r12">                 </span> |
|<span class="r8">  496 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                )</span><span class="r12">                                                                        </span> |
|<span class="r8">  497 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  498 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;errorModel&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> settings:</span><span class="r12">                                                     </span> |
|<span class="r8">  499 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            individual </span><span class="r19">=</span><span class="r14"> getBestIndividual(cache)</span><span class="r12">                                        </span> |
|<span class="r8">  500 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            found </span><span class="r19">=</span><span class="r14"> createSimulationBestIndividual(individual, cache)</span><span class="r12">                    </span> |
|<span class="r8">  501 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">for</span><span class="r14"> experiment </span><span class="r20">in</span><span class="r14"> settings[</span><span class="r11">&quot;errorModel&quot;</span><span class="r14">]:</span><span class="r12">                                    </span> |
|<span class="r8">  502 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                experiment[</span><span class="r11">&quot;file_path&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> found[experiment[</span><span class="r11">&quot;name&quot;</span><span class="r14">]]</span><span class="r12">                      </span> |
|<span class="r8">  503 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  504 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        new_settings_file </span><span class="r19">=</span><span class="r14"> resultDir </span><span class="r19">/</span><span class="r14"> settings_file</span><span class="r19">.</span><span class="r14">name</span><span class="r12">                               </span> |
|<span class="r8">  505 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">with</span><span class="r14"> new_settings_file</span><span class="r19">.</span><span class="r14">open(mode</span><span class="r19">=</span><span class="r11">&quot;w&quot;</span><span class="r14">) </span><span class="r13">as</span><span class="r14"> json_data:</span><span class="r12">                              </span> |
|<span class="r8">  506 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            jstyleson</span><span class="r19">.</span><span class="r14">dump(settings, json_data, indent</span><span class="r19">=4</span><span class="r14">, sort_keys</span><span class="r19">=</span><span class="r13">False</span><span class="r14">)</span><span class="r12">               </span> |
|<span class="r8">  507 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">return</span><span class="r14"> new_settings_file</span><span class="r12">                                                         </span> |
|<span class="r8">  508 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  509 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  510 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">update_json_mcmc</span><span class="r14">(settings):</span><span class="r12">                                                          </span> |
|<span class="r8">  511 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    data </span><span class="r19">=</span><span class="r14"> H5()</span><span class="r12">                                                                          </span> |
|<span class="r8">  512 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    data</span><span class="r19">.</span><span class="r14">filename </span><span class="r19">=</span><span class="r14"> settings[</span><span class="r11">&quot;mcmc_h5&quot;</span><span class="r14">]</span><span class="r12">                                                  </span> |
|<span class="r8">  513 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    data</span><span class="r19">.</span><span class="r14">load(paths</span><span class="r19">=</span><span class="r14">[</span><span class="r11">&quot;/bounds_change/json&quot;</span><span class="r14">], lock</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                                  </span> |
|<span class="r8">  514 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    prior_parameters </span><span class="r19">=</span><span class="r14"> jstyleson</span><span class="r19">.</span><span class="r14">loads(</span><span class="r18">str</span><span class="r14">(data</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">bounds_change</span><span class="r19">.</span><span class="r14">json, </span><span class="r11">&quot;ascii&quot;</span><span class="r14">))</span><span class="r12">       </span> |
|<span class="r8">  515 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  516 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    replace </span><span class="r19">=</span><span class="r14"> [</span><span class="r11">&#x27;transform&#x27;</span><span class="r14">, </span><span class="r11">&#x27;min&#x27;</span><span class="r14">, </span><span class="r11">&#x27;max&#x27;</span><span class="r14">, </span><span class="r11">&#x27;minKA&#x27;</span><span class="r14">, </span><span class="r11">&#x27;maxKA&#x27;</span><span class="r14">,</span><span class="r12">                              </span> |
|<span class="r8">  517 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                      </span><span class="r11">&#x27;minKEQ&#x27;</span><span class="r14">, </span><span class="r11">&#x27;maxKEQ&#x27;</span><span class="r14">, </span><span class="r11">&#x27;factor&#x27;</span><span class="r14">, </span><span class="r11">&#x27;minNu&#x27;</span><span class="r14">, </span><span class="r11">&#x27;maxNu&#x27;</span><span class="r14">,</span><span class="r12">                    </span> |
|<span class="r8">  518 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                      </span><span class="r11">&#x27;minSigma&#x27;</span><span class="r14">, </span><span class="r11">&#x27;maxSigma&#x27;</span><span class="r14">, </span><span class="r11">&#x27;minVolume&#x27;</span><span class="r14">, </span><span class="r11">&#x27;maxVolume&#x27;</span><span class="r14">,</span><span class="r12">                  </span> |
|<span class="r8">  519 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                      </span><span class="r11">&#x27;minArea&#x27;</span><span class="r14">, </span><span class="r11">&#x27;maxArea&#x27;</span><span class="r14">, </span><span class="r11">&#x27;minLength&#x27;</span><span class="r14">, </span><span class="r11">&#x27;maxLength&#x27;</span><span class="r14">]</span><span class="r12">                    </span> |
|<span class="r8">  520 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  521 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;parameters_mcmc&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> settings:</span><span class="r12">                                                    </span> |
|<span class="r8">  522 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        parameters </span><span class="r19">=</span><span class="r14"> settings[</span><span class="r11">&quot;parameters_mcmc&quot;</span><span class="r14">]</span><span class="r12">                                         </span> |
|<span class="r8">  523 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  524 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        parameters_iter </span><span class="r19">=</span><span class="r14"> (parameter </span><span class="r13">for</span><span class="r14"> parameter </span><span class="r20">in</span><span class="r14"> parameters </span><span class="r13">if</span><span class="r14"> parameter[</span><span class="r11">&#x27;transform&#x27;</span> |
|<span class="r8">  525 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        prior_parameters_iter </span><span class="r19">=</span><span class="r14"> (parameter </span><span class="r13">for</span><span class="r14"> parameter </span><span class="r20">in</span><span class="r14"> prior_parameters </span><span class="r13">if</span><span class="r14"> parameter</span> |
|<span class="r8">  526 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  527 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> new, prior </span><span class="r20">in</span><span class="r14"> </span><span class="r18">zip</span><span class="r14">(parameters_iter, prior_parameters_iter):</span><span class="r12">                   </span> |
|<span class="r8">  528 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            ok_location </span><span class="r19">=</span><span class="r14"> </span><span class="r11">&quot;location&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> new </span><span class="r20">and</span><span class="r14"> new[</span><span class="r11">&quot;location&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">split(</span><span class="r11">&quot;/&quot;</span><span class="r14">)[</span><span class="r19">-1</span><span class="r14">] </span><span class="r19">==</span><span class="r14"> prior[</span><span class="r11">&quot;</span> |
|<span class="r8">  529 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            ok_location_from </span><span class="r19">=</span><span class="r14"> </span><span class="r11">&quot;locationFrom&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> new </span><span class="r20">and</span><span class="r14"> new[</span><span class="r11">&quot;locationFrom&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">split(</span><span class="r11">&quot;/&quot;</span><span class="r14">)[</span><span class="r19">-</span> |
|<span class="r8">  530 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  531 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> ok_location </span><span class="r20">or</span><span class="r14"> ok_location_from:</span><span class="r12">                                          </span> |
|<span class="r8">  532 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r21">#update just the location data everthing else needs to remain the same</span><span class="r12">   </span> |
|<span class="r8">  533 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">for</span><span class="r14"> key, value </span><span class="r20">in</span><span class="r14"> new</span><span class="r19">.</span><span class="r14">items():</span><span class="r12">                                           </span> |
|<span class="r8">  534 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r13">if</span><span class="r14"> key </span><span class="r20">in</span><span class="r14"> replace:</span><span class="r12">                                                   </span> |
|<span class="r8">  535 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        new[key] </span><span class="r19">=</span><span class="r14"> prior[key]</span><span class="r12">                                            </span> |
|<span class="r8">  536 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                        </span> |
|<span class="r8">  537 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(</span><span class="r12">                                       </span> |
|<span class="r8">  538 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r11">&quot;parameters_mcmc does not have the same transform and variables in th</span> |
|<span class="r8">  539 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                )</span><span class="r12">                                                                        </span> |
|<span class="r8">  540 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                sys</span><span class="r19">.</span><span class="r14">exit()     </span><span class="r12">                                                          </span> |
|<span class="r8">  541 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                                </span> |
|<span class="r8">  542 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        parameters </span><span class="r19">=</span><span class="r14"> prior_parameters</span><span class="r12">                                                    </span> |
|<span class="r8">  543 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">       </span><span class="r12">                                                                                  </span> |
|<span class="r8">  544 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    settings[</span><span class="r11">&quot;parameters&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">extend(parameters)</span><span class="r12">                                            </span> |
|<span class="r8">  545 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  546 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  547 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">setupAltFeature</span><span class="r14">(cache, name):</span><span class="r12">                                                        </span> |
|<span class="r8">  548 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r11">&quot;read the original json file and make an mcmc file based on it with new boundaries&quot;</span><span class="r12">  </span> |
|<span class="r8">  549 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    settings_file </span><span class="r19">=</span><span class="r14"> Path(sys</span><span class="r19">.</span><span class="r14">argv[</span><span class="r19">1</span><span class="r14">])</span><span class="r12">                                                    </span> |
|<span class="r8">  550 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">with</span><span class="r14"> settings_file</span><span class="r19">.</span><span class="r14">open() </span><span class="r13">as</span><span class="r14"> json_data:</span><span class="r12">                                              </span> |
|<span class="r8">  551 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        settings </span><span class="r19">=</span><span class="r14"> jstyleson</span><span class="r19">.</span><span class="r14">load(json_data)</span><span class="r12">                                             </span> |
|<span class="r8">  552 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  553 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        baseDir </span><span class="r19">=</span><span class="r14"> settings</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;baseDir&quot;</span><span class="r14">, </span><span class="r13">None</span><span class="r14">)</span><span class="r12">                                          </span> |
|<span class="r8">  554 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> baseDir </span><span class="r20">is</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r13">None</span><span class="r14">:</span><span class="r12">                                                          </span> |
|<span class="r8">  555 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            baseDir </span><span class="r19">=</span><span class="r14"> Path(baseDir)</span><span class="r12">                                                      </span> |
|<span class="r8">  556 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> baseDir </span><span class="r19">/</span><span class="r14"> settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]</span><span class="r12">                    </span> |
|<span class="r8">  557 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  558 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        resultDirOriginal </span><span class="r19">=</span><span class="r14"> Path(settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">])</span><span class="r12">                                 </span> |
|<span class="r8">  559 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        resultsOriginal </span><span class="r19">=</span><span class="r14"> resultDirOriginal </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;result.h5&quot;</span><span class="r12">                                </span> |
|<span class="r8">  560 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        resultDir </span><span class="r19">=</span><span class="r14"> resultDirOriginal </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;altScore&quot;</span><span class="r14"> </span><span class="r19">/</span><span class="r14"> name</span><span class="r12">                                </span> |
|<span class="r8">  561 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        resultDir</span><span class="r19">.</span><span class="r14">mkdir(parents</span><span class="r19">=</span><span class="r13">True</span><span class="r14">, exist_ok</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                                     </span> |
|<span class="r8">  562 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  563 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        settings[</span><span class="r11">&quot;resultsDirOriginal&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> resultDirOriginal</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                    </span> |
|<span class="r8">  564 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> resultDir</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                                    </span> |
|<span class="r8">  565 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        settings[</span><span class="r11">&quot;PreviousResults&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> resultsOriginal</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                         </span> |
|<span class="r8">  566 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  567 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> baseDir </span><span class="r20">is</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r13">None</span><span class="r14">:</span><span class="r12">                                                          </span> |
|<span class="r8">  568 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            settings[</span><span class="r11">&quot;baseDir&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> baseDir</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                                     </span> |
|<span class="r8">  569 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  570 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        settings[</span><span class="r11">&quot;searchMethod&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r11">&quot;AltScore&quot;</span><span class="r12">                                            </span> |
|<span class="r8">  571 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  572 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> experiment </span><span class="r20">in</span><span class="r14"> settings[</span><span class="r11">&quot;experiments&quot;</span><span class="r14">]:</span><span class="r12">                                       </span> |
|<span class="r8">  573 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">for</span><span class="r14"> feature </span><span class="r20">in</span><span class="r14"> experiment[</span><span class="r11">&quot;scoresAlt&quot;</span><span class="r14">]:</span><span class="r12">                                      </span> |
|<span class="r8">  574 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">if</span><span class="r14"> feature[</span><span class="r11">&quot;name&quot;</span><span class="r14">] </span><span class="r19">==</span><span class="r14"> name:</span><span class="r12">                                              </span> |
|<span class="r8">  575 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    experiment[</span><span class="r11">&quot;scores&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> feature[</span><span class="r11">&quot;scores&quot;</span><span class="r14">]</span><span class="r12">                             </span> |
|<span class="r8">  576 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">del</span><span class="r14"> experiment[</span><span class="r11">&quot;scoresAlt&quot;</span><span class="r14">]</span><span class="r12">                                                  </span> |
|<span class="r8">  577 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  578 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        new_settings_file </span><span class="r19">=</span><span class="r14"> resultDir </span><span class="r19">/</span><span class="r14"> settings_file</span><span class="r19">.</span><span class="r14">name</span><span class="r12">                               </span> |
|<span class="r8">  579 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">with</span><span class="r14"> new_settings_file</span><span class="r19">.</span><span class="r14">open(mode</span><span class="r19">=</span><span class="r11">&quot;w&quot;</span><span class="r14">) </span><span class="r13">as</span><span class="r14"> json_data:</span><span class="r12">                              </span> |
|<span class="r8">  580 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            jstyleson</span><span class="r19">.</span><span class="r14">dump(settings, json_data, indent</span><span class="r19">=4</span><span class="r14">, sort_keys</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                </span> |
|<span class="r8">  581 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">return</span><span class="r14"> new_settings_file</span><span class="r12">                                                         </span> |
|<span class="r8">  582 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  583 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  584 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">createSimulationBestIndividual</span><span class="r14">(individual, cache):</span><span class="r12">                                   </span> |
|<span class="r8">  585 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    temp </span><span class="r19">=</span><span class="r14"> {}</span><span class="r12">                                                                            </span> |
|<span class="r8">  586 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> experiment </span><span class="r20">in</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;experiments&quot;</span><span class="r14">]:</span><span class="r12">                                     </span> |
|<span class="r8">  587 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        name </span><span class="r19">=</span><span class="r14"> experiment[</span><span class="r11">&quot;name&quot;</span><span class="r14">]</span><span class="r12">                                                        </span> |
|<span class="r8">  588 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        templatePath </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r12">                                                             </span> |
|<span class="r8">  589 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMisc&quot;</span><span class="r14">], </span><span class="r11">&quot;template_</span><span class="r22">%s</span><span class="r11">_base.h5&quot;</span><span class="r14"> </span><span class="r19">%</span><span class="r14"> name</span><span class="r12">               </span> |
|<span class="r8">  590 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        )</span><span class="r12">                                                                                </span> |
|<span class="r8">  591 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        templateSim </span><span class="r19">=</span><span class="r14"> Cadet()</span><span class="r12">                                                            </span> |
|<span class="r8">  592 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        templateSim</span><span class="r19">.</span><span class="r14">filename </span><span class="r19">=</span><span class="r14"> templatePath</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                                   </span> |
|<span class="r8">  593 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        templateSim</span><span class="r19">.</span><span class="r14">load()</span><span class="r12">                                                               </span> |
|<span class="r8">  594 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  595 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cadetValues, cadetValuesKEQ </span><span class="r19">=</span><span class="r14"> set_simulation(</span><span class="r12">                                    </span> |
|<span class="r8">  596 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            individual, templateSim, cache</span><span class="r19">.</span><span class="r14">settings, cache, experiment</span><span class="r12">                   </span> |
|<span class="r8">  597 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        )</span><span class="r12">                                                                                </span> |
|<span class="r8">  598 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  599 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        bestPath </span><span class="r19">=</span><span class="r14"> Path(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMisc&quot;</span><span class="r14">], </span><span class="r11">&quot;best_</span><span class="r22">%s</span><span class="r11">_base.h5&quot;</span><span class="r14"> </span><span class="r19">%</span><span class="r14"> name)</span><span class="r12">      </span> |
|<span class="r8">  600 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        templateSim</span><span class="r19">.</span><span class="r14">filename </span><span class="r19">=</span><span class="r14"> bestPath</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                                       </span> |
|<span class="r8">  601 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        templateSim</span><span class="r19">.</span><span class="r14">save()</span><span class="r12">                                                               </span> |
|<span class="r8">  602 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        temp[name] </span><span class="r19">=</span><span class="r14"> bestPath</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                                                 </span> |
|<span class="r8">  603 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> temp</span><span class="r12">                                                                          </span> |
|<span class="r8">  604 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  605 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  606 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">getBestIndividual</span><span class="r14">(cache):</span><span class="r12">                                                            </span> |
|<span class="r8">  607 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r11">&quot;return the path to the best item based on meta min score&quot;</span><span class="r12">                           </span> |
|<span class="r8">  608 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    progress_path </span><span class="r19">=</span><span class="r14"> Path(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirBase&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;result.h5&quot;</span><span class="r12">                 </span> |
|<span class="r8">  609 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    results </span><span class="r19">=</span><span class="r14"> H5()</span><span class="r12">                                                                       </span> |
|<span class="r8">  610 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    results</span><span class="r19">.</span><span class="r14">filename </span><span class="r19">=</span><span class="r14"> progress_path</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                                          </span> |
|<span class="r8">  611 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    results</span><span class="r19">.</span><span class="r14">load(paths</span><span class="r19">=</span><span class="r14">[</span><span class="r11">&quot;/meta_score&quot;</span><span class="r14">, </span><span class="r11">&quot;/meta_population&quot;</span><span class="r14">], lock</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                   </span> |
|<span class="r8">  612 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  613 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    idx </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">argmin(results</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">meta_score[:, </span><span class="r19">0</span><span class="r14">])</span><span class="r12">                                    </span> |
|<span class="r8">  614 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    individual </span><span class="r19">=</span><span class="r14"> results</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">meta_population[idx, :]</span><span class="r12">                                    </span> |
|<span class="r8">  615 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> individual</span><span class="r12">                                                                    </span> |
|<span class="r8">  616 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  617 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  618 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">copyCSVWithNoise</span><span class="r14">(idx, center, noise):</span><span class="r12">                                                </span> |
|<span class="r8">  619 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r11">&quot;read the original json file and create a new set of simulation data and simulation f</span> |
|<span class="r8">  620 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    settings_file </span><span class="r19">=</span><span class="r14"> Path(sys</span><span class="r19">.</span><span class="r14">argv[</span><span class="r19">1</span><span class="r14">])</span><span class="r12">                                                    </span> |
|<span class="r8">  621 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">with</span><span class="r14"> settings_file</span><span class="r19">.</span><span class="r14">open() </span><span class="r13">as</span><span class="r14"> json_data:</span><span class="r12">                                              </span> |
|<span class="r8">  622 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        settings </span><span class="r19">=</span><span class="r14"> jstyleson</span><span class="r19">.</span><span class="r14">load(json_data)</span><span class="r12">                                             </span> |
|<span class="r8">  623 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  624 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        baseDir </span><span class="r19">=</span><span class="r14"> Path(settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r18">str</span><span class="r14">(idx)</span><span class="r12">                                </span> |
|<span class="r8">  625 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        baseDir</span><span class="r19">.</span><span class="r14">mkdir(parents</span><span class="r19">=</span><span class="r13">True</span><span class="r14">, exist_ok</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                                       </span> |
|<span class="r8">  626 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  627 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        settings[</span><span class="r11">&quot;resultsDir&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r18">str</span><span class="r14">(baseDir)</span><span class="r12">                                            </span> |
|<span class="r8">  628 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  629 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">del</span><span class="r14"> settings[</span><span class="r11">&quot;bootstrap&quot;</span><span class="r14">]</span><span class="r12">                                                        </span> |
|<span class="r8">  630 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  631 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21"># find CSV files</span><span class="r12">                                                                 </span> |
|<span class="r8">  632 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> experiment </span><span class="r20">in</span><span class="r14"> settings[</span><span class="r11">&quot;experiments&quot;</span><span class="r14">]:</span><span class="r12">                                       </span> |
|<span class="r8">  633 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;csv&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> experiment:</span><span class="r12">                                                      </span> |
|<span class="r8">  634 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                data </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">genfromtxt(experiment[</span><span class="r11">&quot;csv&quot;</span><span class="r14">], delimiter</span><span class="r19">=</span><span class="r11">&quot;,&quot;</span><span class="r14">)</span><span class="r12">                </span> |
|<span class="r8">  635 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                addNoise(data, center, noise)</span><span class="r12">                                            </span> |
|<span class="r8">  636 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                csv_path </span><span class="r19">=</span><span class="r14"> Path(experiment[</span><span class="r11">&quot;csv&quot;</span><span class="r14">])</span><span class="r12">                                       </span> |
|<span class="r8">  637 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                new_csv_path </span><span class="r19">=</span><span class="r14"> baseDir </span><span class="r19">/</span><span class="r14"> csv_path</span><span class="r19">.</span><span class="r14">name</span><span class="r12">                                   </span> |
|<span class="r8">  638 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">savetxt(</span><span class="r18">str</span><span class="r14">(new_csv_path), data, delimiter</span><span class="r19">=</span><span class="r11">&quot;,&quot;</span><span class="r14">)</span><span class="r12">                    </span> |
|<span class="r8">  639 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                experiment[</span><span class="r11">&quot;csv&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r18">str</span><span class="r14">(new_csv_path)</span><span class="r12">                                    </span> |
|<span class="r8">  640 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">for</span><span class="r14"> feature </span><span class="r20">in</span><span class="r14"> experiment[</span><span class="r11">&quot;scores&quot;</span><span class="r14">]:</span><span class="r12">                                         </span> |
|<span class="r8">  641 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;csv&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> feature:</span><span class="r12">                                                     </span> |
|<span class="r8">  642 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    data </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">genfromtxt(feature[</span><span class="r11">&quot;csv&quot;</span><span class="r14">], delimiter</span><span class="r19">=</span><span class="r11">&quot;,&quot;</span><span class="r14">)</span><span class="r12">               </span> |
|<span class="r8">  643 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    addNoise(data, center, noise)</span><span class="r12">                                        </span> |
|<span class="r8">  644 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    csv_path </span><span class="r19">=</span><span class="r14"> Path(feature[</span><span class="r11">&quot;csv&quot;</span><span class="r14">])</span><span class="r12">                                      </span> |
|<span class="r8">  645 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    new_csv_path </span><span class="r19">=</span><span class="r14"> baseDir </span><span class="r19">/</span><span class="r14"> csv_path</span><span class="r19">.</span><span class="r14">name</span><span class="r12">                               </span> |
|<span class="r8">  646 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    numpy</span><span class="r19">.</span><span class="r14">savetxt(</span><span class="r18">str</span><span class="r14">(new_csv_path), data, delimiter</span><span class="r19">=</span><span class="r11">&quot;,&quot;</span><span class="r14">)</span><span class="r12">                </span> |
|<span class="r8">  647 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    feature[</span><span class="r11">&quot;csv&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r18">str</span><span class="r14">(new_csv_path)</span><span class="r12">                                   </span> |
|<span class="r8">  648 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  649 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        new_settings_file </span><span class="r19">=</span><span class="r14"> baseDir </span><span class="r19">/</span><span class="r14"> settings_file</span><span class="r19">.</span><span class="r14">name</span><span class="r12">                                 </span> |
|<span class="r8">  650 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">with</span><span class="r14"> new_settings_file</span><span class="r19">.</span><span class="r14">open(mode</span><span class="r19">=</span><span class="r11">&quot;w&quot;</span><span class="r14">) </span><span class="r13">as</span><span class="r14"> json_data:</span><span class="r12">                              </span> |
|<span class="r8">  651 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            jstyleson</span><span class="r19">.</span><span class="r14">dump(settings, json_data)</span><span class="r12">                                          </span> |
|<span class="r8">  652 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">return</span><span class="r14"> new_settings_file</span><span class="r12">                                                         </span> |
|<span class="r8">  653 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  654 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  655 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">addNoise</span><span class="r14">(array, center, noise):</span><span class="r12">                                                      </span> |
|<span class="r8">  656 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r11">&quot;add noise to an array&quot;</span><span class="r12">                                                              </span> |
|<span class="r8">  657 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    maxValue </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">max(array[:, </span><span class="r19">1</span><span class="r14">])</span><span class="r12">                                                    </span> |
|<span class="r8">  658 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    randomNoise </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">random</span><span class="r19">.</span><span class="r14">normal(center, noise </span><span class="r19">*</span><span class="r14"> maxValue, </span><span class="r18">len</span><span class="r14">(array))</span><span class="r12">              </span> |
|<span class="r8">  659 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    array[:, </span><span class="r19">1</span><span class="r14">] </span><span class="r19">+=</span><span class="r14"> randomNoise</span><span class="r12">                                                           </span> |
|<span class="r8">  660 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  661 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  662 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">bestMinScore</span><span class="r14">(hof):</span><span class="r12">                                                                   </span> |
|<span class="r8">  663 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r11">&quot;find the best score based on the minimum of the scores&quot;</span><span class="r12">                             </span> |
|<span class="r8">  664 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    idxMax </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">argmax([</span><span class="r18">min</span><span class="r14">(i</span><span class="r19">.</span><span class="r14">fitness</span><span class="r19">.</span><span class="r14">values) </span><span class="r13">for</span><span class="r14"> i </span><span class="r20">in</span><span class="r14"> hof])</span><span class="r12">                          </span> |
|<span class="r8">  665 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> hof[idxMax]</span><span class="r12">                                                                   </span> |
|<span class="r8">  666 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  667 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  668 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">fracStat</span><span class="r14">(time_center, value):</span><span class="r12">                                                        </span> |
|<span class="r8">  669 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    mean_time </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">sum(time_center </span><span class="r19">*</span><span class="r14"> value) </span><span class="r19">/</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">sum(value)</span><span class="r12">                        </span> |
|<span class="r8">  670 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    variance_time </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">sum((time_center </span><span class="r19">-</span><span class="r14"> mean_time) </span><span class="r19">**</span><span class="r14"> </span><span class="r19">2</span><span class="r14"> </span><span class="r19">*</span><span class="r14"> value) </span><span class="r19">/</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">sum(value)</span><span class="r12"> </span> |
|<span class="r8">  671 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    skew_time </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">sum((time_center </span><span class="r19">-</span><span class="r14"> mean_time) </span><span class="r19">**</span><span class="r14"> </span><span class="r19">3</span><span class="r14"> </span><span class="r19">*</span><span class="r14"> value) </span><span class="r19">/</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">sum(value)</span><span class="r12">     </span> |
|<span class="r8">  672 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  673 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    mean_value </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">sum(time_center </span><span class="r19">*</span><span class="r14"> value) </span><span class="r19">/</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">sum(time_center)</span><span class="r12">                 </span> |
|<span class="r8">  674 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    variance_value </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">sum((value </span><span class="r19">-</span><span class="r14"> mean_value) </span><span class="r19">**</span><span class="r14"> </span><span class="r19">2</span><span class="r14"> </span><span class="r19">*</span><span class="r14"> time_center) </span><span class="r19">/</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">sum(</span><span class="r12">     </span> |
|<span class="r8">  675 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        time_center</span><span class="r12">                                                                      </span> |
|<span class="r8">  676 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    )</span><span class="r12">                                                                                    </span> |
|<span class="r8">  677 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    skew_value </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">sum((value </span><span class="r19">-</span><span class="r14"> mean_value) </span><span class="r19">**</span><span class="r14"> </span><span class="r19">3</span><span class="r14"> </span><span class="r19">*</span><span class="r14"> time_center) </span><span class="r19">/</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">sum(</span><span class="r12">         </span> |
|<span class="r8">  678 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        time_center</span><span class="r12">                                                                      </span> |
|<span class="r8">  679 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    )</span><span class="r12">                                                                                    </span> |
|<span class="r8">  680 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  681 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> mean_time, variance_time, skew_time, mean_value, variance_value, skew_value</span><span class="r12">   </span> |
|<span class="r8">  682 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  683 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  684 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">fractionate_spline</span><span class="r14">(start_seq, stop_seq, spline):</span><span class="r12">                                     </span> |
|<span class="r8">  685 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    temp </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                            </span> |
|<span class="r8">  686 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> (start, stop) </span><span class="r20">in</span><span class="r14"> </span><span class="r18">zip</span><span class="r14">(start_seq, stop_seq):</span><span class="r12">                                       </span> |
|<span class="r8">  687 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        temp</span><span class="r19">.</span><span class="r14">append(spline</span><span class="r19">.</span><span class="r14">integral(start, stop) </span><span class="r19">/</span><span class="r14"> (stop </span><span class="r19">-</span><span class="r14"> start))</span><span class="r12">                       </span> |
|<span class="r8">  688 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array(temp)</span><span class="r12">                                                             </span> |
|<span class="r8">  689 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  690 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  691 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">find_opt_poly</span><span class="r14">(x, y, index):</span><span class="r12">                                                          </span> |
|<span class="r8">  692 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> index </span><span class="r19">==</span><span class="r14"> </span><span class="r19">0</span><span class="r14">:</span><span class="r12">                                                                       </span> |
|<span class="r8">  693 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        indexes </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array([index, index </span><span class="r19">+</span><span class="r14"> </span><span class="r19">1</span><span class="r14">, index </span><span class="r19">+</span><span class="r14"> </span><span class="r19">2</span><span class="r14">])</span><span class="r12">                             </span> |
|<span class="r8">  694 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">elif</span><span class="r14"> index </span><span class="r19">==</span><span class="r14"> (</span><span class="r18">len</span><span class="r14">(x) </span><span class="r19">-</span><span class="r14"> </span><span class="r19">1</span><span class="r14">):</span><span class="r12">                                                          </span> |
|<span class="r8">  695 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        indexes </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array([index </span><span class="r19">-</span><span class="r14"> </span><span class="r19">2</span><span class="r14">, index </span><span class="r19">-</span><span class="r14"> </span><span class="r19">1</span><span class="r14">, index])</span><span class="r12">                             </span> |
|<span class="r8">  696 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                                </span> |
|<span class="r8">  697 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        indexes </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array([index </span><span class="r19">-</span><span class="r14"> </span><span class="r19">1</span><span class="r14">, index, index </span><span class="r19">+</span><span class="r14"> </span><span class="r19">1</span><span class="r14">])</span><span class="r12">                             </span> |
|<span class="r8">  698 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  699 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    x </span><span class="r19">=</span><span class="r14"> x[indexes]</span><span class="r12">                                                                       </span> |
|<span class="r8">  700 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    y </span><span class="r19">=</span><span class="r14"> y[indexes]</span><span class="r12">                                                                       </span> |
|<span class="r8">  701 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  702 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> x[</span><span class="r19">0</span><span class="r14">] </span><span class="r19">&gt;</span><span class="r14"> x[</span><span class="r19">-1</span><span class="r14">]:  </span><span class="r21"># need to invert order</span><span class="r12">                                             </span> |
|<span class="r8">  703 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        x </span><span class="r19">=</span><span class="r14"> x[::</span><span class="r19">-1</span><span class="r14">]</span><span class="r12">                                                                      </span> |
|<span class="r8">  704 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        y </span><span class="r19">=</span><span class="r14"> y[::</span><span class="r19">-1</span><span class="r14">]</span><span class="r12">                                                                      </span> |
|<span class="r8">  705 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  706 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">try</span><span class="r14">:</span><span class="r12">                                                                                 </span> |
|<span class="r8">  707 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        poly, res </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">polynomial</span><span class="r19">.</span><span class="r14">Polynomial</span><span class="r19">.</span><span class="r14">fit(x, y, </span><span class="r19">2</span><span class="r14">, full</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                  </span> |
|<span class="r8">  708 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">except</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">linalg</span><span class="r19">.</span><span class="r14">LinAlgError:</span><span class="r12">                                                     </span> |
|<span class="r8">  709 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">error(</span><span class="r11">&quot;Polyfit failed for  </span><span class="r22">%s</span><span class="r11"> </span><span class="r22">%s</span><span class="r11">&quot;</span><span class="r14">, x, y)</span><span class="r12">            </span> |
|<span class="r8">  710 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">try</span><span class="r14">:</span><span class="r12">                                                                                 </span> |
|<span class="r8">  711 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        root </span><span class="r19">=</span><span class="r14"> poly</span><span class="r19">.</span><span class="r14">deriv()</span><span class="r19">.</span><span class="r14">roots()[</span><span class="r19">0</span><span class="r14">]</span><span class="r12">                                                   </span> |
|<span class="r8">  712 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">except</span><span class="r14"> </span><span class="r23">IndexError</span><span class="r14">:</span><span class="r12">                                                                   </span> |
|<span class="r8">  713 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21"># this happens if all y values are the same in which case just take the center va</span> |
|<span class="r8">  714 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        root </span><span class="r19">=</span><span class="r14"> x[</span><span class="r19">0</span><span class="r14">]</span><span class="r12">                                                                      </span> |
|<span class="r8">  715 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    root </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">clip(root, x[</span><span class="r19">0</span><span class="r14">], x[</span><span class="r19">1</span><span class="r14">])</span><span class="r12">                                                  </span> |
|<span class="r8">  716 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> root, x, y</span><span class="r12">                                                                    </span> |
|<span class="r8">  717 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  718 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  719 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">metaCSV</span><span class="r14">(cache):</span><span class="r12">                                                                      </span> |
|<span class="r8">  720 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    repeat </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;repeat&quot;</span><span class="r14">])</span><span class="r12">                                               </span> |
|<span class="r8">  721 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  722 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    generations </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                     </span> |
|<span class="r8">  723 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    timeToComplete </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                  </span> |
|<span class="r8">  724 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    timePerGeneration </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                               </span> |
|<span class="r8">  725 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    totalCPUTime </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                    </span> |
|<span class="r8">  726 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    paretoFront </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                     </span> |
|<span class="r8">  727 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    avergeScore </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                     </span> |
|<span class="r8">  728 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    minimumScore </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                    </span> |
|<span class="r8">  729 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    productScore </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                    </span> |
|<span class="r8">  730 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    paretoAverageScore </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                              </span> |
|<span class="r8">  731 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    paretoMinimumScore </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                              </span> |
|<span class="r8">  732 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    paretoProductScore </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                              </span> |
|<span class="r8">  733 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    population </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                                    </span> |
|<span class="r8">  734 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    dimensionIn </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                                   </span> |
|<span class="r8">  735 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    dimensionOut </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                                  </span> |
|<span class="r8">  736 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    searchMethod </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                                  </span> |
|<span class="r8">  737 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  738 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r21"># read base progress csv and append each score</span><span class="r12">                                       </span> |
|<span class="r8">  739 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    base_dir </span><span class="r19">=</span><span class="r14"> Path(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirOriginal&quot;</span><span class="r14">])</span><span class="r12">                                </span> |
|<span class="r8">  740 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    paths </span><span class="r19">=</span><span class="r14"> [</span><span class="r12">                                                                            </span> |
|<span class="r8">  741 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        base_dir </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;progress.csv&quot;</span><span class="r14">,</span><span class="r12">                                                       </span> |
|<span class="r8">  742 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    ]</span><span class="r12">                                                                                    </span> |
|<span class="r8">  743 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> idx </span><span class="r20">in</span><span class="r14"> </span><span class="r18">range</span><span class="r14">(repeat):</span><span class="r12">                                                            </span> |
|<span class="r8">  744 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        paths</span><span class="r19">.</span><span class="r14">append(base_dir </span><span class="r19">/</span><span class="r14"> </span><span class="r18">str</span><span class="r14">(idx) </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;progress.csv&quot;</span><span class="r14">)</span><span class="r12">                               </span> |
|<span class="r8">  745 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  746 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> idx, path </span><span class="r20">in</span><span class="r14"> </span><span class="r18">enumerate</span><span class="r14">(paths):</span><span class="r12">                                                   </span> |
|<span class="r8">  747 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        data </span><span class="r19">=</span><span class="r14"> pandas</span><span class="r19">.</span><span class="r14">read_csv(path)</span><span class="r12">                                                     </span> |
|<span class="r8">  748 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  749 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> idx </span><span class="r19">==</span><span class="r14"> </span><span class="r19">0</span><span class="r14">:</span><span class="r12">                                                                     </span> |
|<span class="r8">  750 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            population </span><span class="r19">=</span><span class="r14"> data[</span><span class="r11">&quot;Population&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">iloc[</span><span class="r19">-1</span><span class="r14">]</span><span class="r12">                                     </span> |
|<span class="r8">  751 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            dimensionIn </span><span class="r19">=</span><span class="r14"> data[</span><span class="r11">&quot;Dimension In&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">iloc[</span><span class="r19">-1</span><span class="r14">]</span><span class="r12">                                  </span> |
|<span class="r8">  752 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            dimensionOut </span><span class="r19">=</span><span class="r14"> data[</span><span class="r11">&quot;Dimension Out&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">iloc[</span><span class="r19">-1</span><span class="r14">]</span><span class="r12">                                </span> |
|<span class="r8">  753 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            searchMethod </span><span class="r19">=</span><span class="r14"> data[</span><span class="r11">&quot;Search Method&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">iloc[</span><span class="r19">-1</span><span class="r14">]</span><span class="r12">                                </span> |
|<span class="r8">  754 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  755 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        generations</span><span class="r19">.</span><span class="r14">append(data[</span><span class="r11">&quot;Generation&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">iloc[</span><span class="r19">-1</span><span class="r14">])</span><span class="r12">                                  </span> |
|<span class="r8">  756 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        timeToComplete</span><span class="r19">.</span><span class="r14">append(data[</span><span class="r11">&quot;Elapsed Time&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">iloc[</span><span class="r19">-1</span><span class="r14">])</span><span class="r12">                             </span> |
|<span class="r8">  757 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        timePerGeneration</span><span class="r19">.</span><span class="r14">append(numpy</span><span class="r19">.</span><span class="r14">mean(data[</span><span class="r11">&quot;Generation Time&quot;</span><span class="r14">]))</span><span class="r12">                    </span> |
|<span class="r8">  758 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        paretoFront</span><span class="r19">.</span><span class="r14">append(data[</span><span class="r11">&quot;Pareto Front&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">iloc[</span><span class="r19">-1</span><span class="r14">])</span><span class="r12">                                </span> |
|<span class="r8">  759 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        avergeScore</span><span class="r19">.</span><span class="r14">append(data[</span><span class="r11">&quot;Average Score&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">iloc[</span><span class="r19">-1</span><span class="r14">])</span><span class="r12">                               </span> |
|<span class="r8">  760 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        minimumScore</span><span class="r19">.</span><span class="r14">append(data[</span><span class="r11">&quot;Minimum Score&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">iloc[</span><span class="r19">-1</span><span class="r14">])</span><span class="r12">                              </span> |
|<span class="r8">  761 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        productScore</span><span class="r19">.</span><span class="r14">append(data[</span><span class="r11">&quot;Product Score&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">iloc[</span><span class="r19">-1</span><span class="r14">])</span><span class="r12">                              </span> |
|<span class="r8">  762 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        totalCPUTime</span><span class="r19">.</span><span class="r14">append(data[</span><span class="r11">&quot;Total CPU Time&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">iloc[</span><span class="r19">-1</span><span class="r14">])</span><span class="r12">                             </span> |
|<span class="r8">  763 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        paretoAverageScore </span><span class="r19">=</span><span class="r14"> [data[</span><span class="r11">&quot;Pareto Mean Average Score&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">iloc[</span><span class="r19">-1</span><span class="r14">]]</span><span class="r12">                </span> |
|<span class="r8">  764 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        paretoMinimumScore </span><span class="r19">=</span><span class="r14"> [data[</span><span class="r11">&quot;Pareto Mean Minimum Score&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">iloc[</span><span class="r19">-1</span><span class="r14">]]</span><span class="r12">                </span> |
|<span class="r8">  765 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        paretoProductScore </span><span class="r19">=</span><span class="r14"> [data[</span><span class="r11">&quot;Pareto Mean Product Score&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">iloc[</span><span class="r19">-1</span><span class="r14">]]</span><span class="r12">                </span> |
|<span class="r8">  766 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        paretoProductScore </span><span class="r19">=</span><span class="r14"> [data[</span><span class="r11">&quot;Pareto Mean Product Score&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">iloc[</span><span class="r19">-1</span><span class="r14">]]</span><span class="r12">                </span> |
|<span class="r8">  767 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  768 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    meta_progress </span><span class="r19">=</span><span class="r14"> base_dir </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;meta_progress.csv&quot;</span><span class="r12">                                       </span> |
|<span class="r8">  769 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">with</span><span class="r14"> meta_progress</span><span class="r19">.</span><span class="r14">open(</span><span class="r11">&quot;w&quot;</span><span class="r14">, newline</span><span class="r19">=</span><span class="r11">&quot;&quot;</span><span class="r14">) </span><span class="r13">as</span><span class="r14"> csvfile:</span><span class="r12">                                 </span> |
|<span class="r8">  770 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        writer </span><span class="r19">=</span><span class="r14"> csv</span><span class="r19">.</span><span class="r14">writer(csvfile, delimiter</span><span class="r19">=</span><span class="r11">&quot;,&quot;</span><span class="r14">, quoting</span><span class="r19">=</span><span class="r14">csv</span><span class="r19">.</span><span class="r14">QUOTE_ALL)</span><span class="r12">               </span> |
|<span class="r8">  771 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  772 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        writer</span><span class="r19">.</span><span class="r14">writerow(</span><span class="r12">                                                                 </span> |
|<span class="r8">  773 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            [</span><span class="r12">                                                                            </span> |
|<span class="r8">  774 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Population&quot;</span><span class="r14">,</span><span class="r12">                                                            </span> |
|<span class="r8">  775 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Dimension In&quot;</span><span class="r14">,</span><span class="r12">                                                          </span> |
|<span class="r8">  776 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Dimension Out&quot;</span><span class="r14">,</span><span class="r12">                                                         </span> |
|<span class="r8">  777 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Search Method&quot;</span><span class="r14">,</span><span class="r12">                                                         </span> |
|<span class="r8">  778 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Generation&quot;</span><span class="r14">,</span><span class="r12">                                                            </span> |
|<span class="r8">  779 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Generation STDDEV&quot;</span><span class="r14">,</span><span class="r12">                                                     </span> |
|<span class="r8">  780 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Elapsed Time&quot;</span><span class="r14">,</span><span class="r12">                                                          </span> |
|<span class="r8">  781 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Elapsed Time STDDEV&quot;</span><span class="r14">,</span><span class="r12">                                                   </span> |
|<span class="r8">  782 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Generation Time&quot;</span><span class="r14">,</span><span class="r12">                                                       </span> |
|<span class="r8">  783 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Geneation Time STDDEV&quot;</span><span class="r14">,</span><span class="r12">                                                 </span> |
|<span class="r8">  784 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Pareto Front&quot;</span><span class="r14">,</span><span class="r12">                                                          </span> |
|<span class="r8">  785 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Paret Front STDDEV&quot;</span><span class="r14">,</span><span class="r12">                                                    </span> |
|<span class="r8">  786 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Average Score&quot;</span><span class="r14">,</span><span class="r12">                                                         </span> |
|<span class="r8">  787 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Average Score STDDEV&quot;</span><span class="r14">,</span><span class="r12">                                                  </span> |
|<span class="r8">  788 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Minimum Score&quot;</span><span class="r14">,</span><span class="r12">                                                         </span> |
|<span class="r8">  789 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Minimum Score STDDEV&quot;</span><span class="r14">,</span><span class="r12">                                                  </span> |
|<span class="r8">  790 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Product Score&quot;</span><span class="r14">,</span><span class="r12">                                                         </span> |
|<span class="r8">  791 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Product Score STDDEV&quot;</span><span class="r14">,</span><span class="r12">                                                  </span> |
|<span class="r8">  792 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Pareto Mean Average Score&quot;</span><span class="r14">,</span><span class="r12">                                             </span> |
|<span class="r8">  793 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Pareto Mean Average Score STDDEV&quot;</span><span class="r14">,</span><span class="r12">                                      </span> |
|<span class="r8">  794 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Pareto Mean Minimum Score&quot;</span><span class="r14">,</span><span class="r12">                                             </span> |
|<span class="r8">  795 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Pareto Mean Minimum Score STDDEV&quot;</span><span class="r14">,</span><span class="r12">                                      </span> |
|<span class="r8">  796 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Pareto Mean Product Score&quot;</span><span class="r14">,</span><span class="r12">                                             </span> |
|<span class="r8">  797 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Pareto Mean Product Score STDDEV&quot;</span><span class="r14">,</span><span class="r12">                                      </span> |
|<span class="r8">  798 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Total CPU Time&quot;</span><span class="r14">,</span><span class="r12">                                                        </span> |
|<span class="r8">  799 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Total CPU Time STDDEV&quot;</span><span class="r14">,</span><span class="r12">                                                 </span> |
|<span class="r8">  800 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            ]</span><span class="r12">                                                                            </span> |
|<span class="r8">  801 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        )</span><span class="r12">                                                                                </span> |
|<span class="r8">  802 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  803 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        writer</span><span class="r19">.</span><span class="r14">writerow(</span><span class="r12">                                                                 </span> |
|<span class="r8">  804 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            [</span><span class="r12">                                                                            </span> |
|<span class="r8">  805 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                population,</span><span class="r12">                                                              </span> |
|<span class="r8">  806 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                dimensionIn,</span><span class="r12">                                                             </span> |
|<span class="r8">  807 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                dimensionOut,</span><span class="r12">                                                            </span> |
|<span class="r8">  808 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                searchMethod,</span><span class="r12">                                                            </span> |
|<span class="r8">  809 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">mean(generations),</span><span class="r12">                                                 </span> |
|<span class="r8">  810 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">std(generations),</span><span class="r12">                                                  </span> |
|<span class="r8">  811 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">mean(timeToComplete),</span><span class="r12">                                              </span> |
|<span class="r8">  812 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">std(timeToComplete),</span><span class="r12">                                               </span> |
|<span class="r8">  813 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">mean(timePerGeneration),</span><span class="r12">                                           </span> |
|<span class="r8">  814 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">std(timePerGeneration),</span><span class="r12">                                            </span> |
|<span class="r8">  815 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">mean(paretoFront),</span><span class="r12">                                                 </span> |
|<span class="r8">  816 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">std(paretoFront),</span><span class="r12">                                                  </span> |
|<span class="r8">  817 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">mean(avergeScore),</span><span class="r12">                                                 </span> |
|<span class="r8">  818 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">std(avergeScore),</span><span class="r12">                                                  </span> |
|<span class="r8">  819 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">mean(minimumScore),</span><span class="r12">                                                </span> |
|<span class="r8">  820 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">std(minimumScore),</span><span class="r12">                                                 </span> |
|<span class="r8">  821 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">mean(productScore),</span><span class="r12">                                                </span> |
|<span class="r8">  822 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">std(productScore),</span><span class="r12">                                                 </span> |
|<span class="r8">  823 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">mean(paretoAverageScore),</span><span class="r12">                                          </span> |
|<span class="r8">  824 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">std(paretoAverageScore),</span><span class="r12">                                           </span> |
|<span class="r8">  825 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">mean(paretoMinimumScore),</span><span class="r12">                                          </span> |
|<span class="r8">  826 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">std(paretoMinimumScore),</span><span class="r12">                                           </span> |
|<span class="r8">  827 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">mean(paretoProductScore),</span><span class="r12">                                          </span> |
|<span class="r8">  828 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">std(paretoProductScore),</span><span class="r12">                                           </span> |
|<span class="r8">  829 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">mean(totalCPUTime),</span><span class="r12">                                                </span> |
|<span class="r8">  830 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy</span><span class="r19">.</span><span class="r14">std(totalCPUTime),</span><span class="r12">                                                 </span> |
|<span class="r8">  831 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            ]</span><span class="r12">                                                                            </span> |
|<span class="r8">  832 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        )</span><span class="r12">                                                                                </span> |
|<span class="r8">  833 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  834 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  835 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">update_result_data</span><span class="r14">(cache, ind, fit, result_data, results, meta_scores):</span><span class="r12">              </span> |
|<span class="r8">  836 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> result_data </span><span class="r20">is</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r13">None</span><span class="r14"> </span><span class="r20">and</span><span class="r14"> results </span><span class="r20">is</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r13">None</span><span class="r14">:</span><span class="r12">                                  </span> |
|<span class="r8">  837 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        result_data[</span><span class="r11">&quot;input&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">append(</span><span class="r18">tuple</span><span class="r14">(ind))</span><span class="r12">                                          </span> |
|<span class="r8">  838 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        result_data[</span><span class="r11">&quot;output&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">append(</span><span class="r18">tuple</span><span class="r14">(fit))</span><span class="r12">                                         </span> |
|<span class="r8">  839 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        result_data[</span><span class="r11">&quot;output_meta&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">append(</span><span class="r18">tuple</span><span class="r14">(meta_scores))</span><span class="r12">                            </span> |
|<span class="r8">  840 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  841 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> result </span><span class="r20">in</span><span class="r14"> results</span><span class="r19">.</span><span class="r14">values():</span><span class="r12">                                                  </span> |
|<span class="r8">  842 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            result_data[</span><span class="r11">&quot;input_transform&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">append(</span><span class="r18">tuple</span><span class="r14">(result[</span><span class="r11">&quot;cadetValues&quot;</span><span class="r14">]))</span><span class="r12">          </span> |
|<span class="r8">  843 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            result_data[</span><span class="r11">&quot;input_transform_extended&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">append(</span><span class="r12">                              </span> |
|<span class="r8">  844 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">tuple</span><span class="r14">(result[</span><span class="r11">&quot;cadetValuesKEQ&quot;</span><span class="r14">])</span><span class="r12">                                          </span> |
|<span class="r8">  845 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            )</span><span class="r12">                                                                            </span> |
|<span class="r8">  846 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  847 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r21"># All results have the same parameter set so we only need the first one</span><span class="r12">      </span> |
|<span class="r8">  848 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">break</span><span class="r12">                                                                        </span> |
|<span class="r8">  849 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  850 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">fullTrainingData:</span><span class="r12">                                                       </span> |
|<span class="r8">  851 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;results&quot;</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> result_data:</span><span class="r12">                                             </span> |
|<span class="r8">  852 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                result_data[</span><span class="r11">&quot;results&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> {}</span><span class="r12">                                              </span> |
|<span class="r8">  853 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  854 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;times&quot;</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> result_data:</span><span class="r12">                                               </span> |
|<span class="r8">  855 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                result_data[</span><span class="r11">&quot;times&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> {}</span><span class="r12">                                                </span> |
|<span class="r8">  856 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  857 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">for</span><span class="r14"> experimentName, experiment </span><span class="r20">in</span><span class="r14"> results</span><span class="r19">.</span><span class="r14">items():</span><span class="r12">                           </span> |
|<span class="r8">  858 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                units_used </span><span class="r19">=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">target[experimentName][</span><span class="r11">&quot;units_used&quot;</span><span class="r14">]</span><span class="r12">                  </span> |
|<span class="r8">  859 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                sim </span><span class="r19">=</span><span class="r14"> experiment[</span><span class="r11">&quot;simulation&quot;</span><span class="r14">]</span><span class="r12">                                           </span> |
|<span class="r8">  860 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                times </span><span class="r19">=</span><span class="r14"> sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">output</span><span class="r19">.</span><span class="r14">solution</span><span class="r19">.</span><span class="r14">solution_times</span><span class="r12">                          </span> |
|<span class="r8">  861 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  862 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                timeName </span><span class="r19">=</span><span class="r14"> </span><span class="r11">&quot;</span><span class="r22">%s</span><span class="r11">_time&quot;</span><span class="r14"> </span><span class="r19">%</span><span class="r14"> experimentName</span><span class="r12">                                    </span> |
|<span class="r8">  863 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  864 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">if</span><span class="r14"> timeName </span><span class="r20">not</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> result_data[</span><span class="r11">&quot;times&quot;</span><span class="r14">]:</span><span class="r12">                                 </span> |
|<span class="r8">  865 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    result_data[</span><span class="r11">&quot;times&quot;</span><span class="r14">][timeName] </span><span class="r19">=</span><span class="r14"> times</span><span class="r12">                               </span> |
|<span class="r8">  866 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  867 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">for</span><span class="r14"> unitName </span><span class="r20">in</span><span class="r14"> units_used:</span><span class="r12">                                              </span> |
|<span class="r8">  868 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    unit </span><span class="r19">=</span><span class="r14"> sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">output</span><span class="r19">.</span><span class="r14">solution[unitName]</span><span class="r12">                            </span> |
|<span class="r8">  869 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r13">for</span><span class="r14"> solutionName, solution </span><span class="r20">in</span><span class="r14"> unit</span><span class="r19">.</span><span class="r14">items():</span><span class="r12">                          </span> |
|<span class="r8">  870 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                        </span><span class="r13">if</span><span class="r14"> solutionName</span><span class="r19">.</span><span class="r14">startswith(</span><span class="r11">&quot;solution_outlet_comp&quot;</span><span class="r14">):</span><span class="r12">              </span> |
|<span class="r8">  871 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                            comp </span><span class="r19">=</span><span class="r14"> solutionName</span><span class="r19">.</span><span class="r14">replace(</span><span class="r11">&quot;solution_outlet_comp_&quot;</span><span class="r14">, </span><span class="r11">&quot;&quot;</span><span class="r14">)</span><span class="r12">     </span> |
|<span class="r8">  872 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  873 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                            name </span><span class="r19">=</span><span class="r14"> </span><span class="r11">&quot;</span><span class="r22">%s</span><span class="r11">_</span><span class="r22">%s</span><span class="r11">_</span><span class="r22">%s</span><span class="r11">&quot;</span><span class="r14"> </span><span class="r19">%</span><span class="r14"> (experimentName, unitName, comp)</span><span class="r12">         </span> |
|<span class="r8">  874 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  875 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                            </span><span class="r13">if</span><span class="r14"> name </span><span class="r20">not</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> result_data[</span><span class="r11">&quot;results&quot;</span><span class="r14">]:</span><span class="r12">                       </span> |
|<span class="r8">  876 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                                result_data[</span><span class="r11">&quot;results&quot;</span><span class="r14">][name] </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                        </span> |
|<span class="r8">  877 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  878 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                            result_data[</span><span class="r11">&quot;results&quot;</span><span class="r14">][name]</span><span class="r19">.</span><span class="r14">append(</span><span class="r18">tuple</span><span class="r14">(solution))</span><span class="r12">         </span> |
|<span class="r8">  879 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  880 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  881 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">calcFitness</span><span class="r14">(scores_orig, cache):</span><span class="r12">                                                     </span> |
|<span class="r8">  882 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    scores </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array(scores_orig)[cache</span><span class="r19">.</span><span class="r14">meta_mask]</span><span class="r12">                                   </span> |
|<span class="r8">  883 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  884 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">allScoreSSE </span><span class="r20">and</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">MultiObjectiveSSE </span><span class="r20">is</span><span class="r14"> </span><span class="r13">False</span><span class="r14">:</span><span class="r12">                           </span> |
|<span class="r8">  885 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        scores </span><span class="r19">=</span><span class="r14"> (numpy</span><span class="r19">.</span><span class="r14">sum(scores),)</span><span class="r12">                                                    </span> |
|<span class="r8">  886 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> </span><span class="r18">tuple</span><span class="r14">(scores)</span><span class="r12">                                                                 </span> |
|<span class="r8">  887 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  888 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  889 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">process_population</span><span class="r14">(</span><span class="r12">                                                                  </span> |
|<span class="r8">  890 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache,</span><span class="r12">                                                                               </span> |
|<span class="r8">  891 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    population,</span><span class="r12">                                                                          </span> |
|<span class="r8">  892 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    fitnesses,</span><span class="r12">                                                                           </span> |
|<span class="r8">  893 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    writer,</span><span class="r12">                                                                              </span> |
|<span class="r8">  894 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    csvfile,</span><span class="r12">                                                                             </span> |
|<span class="r8">  895 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    halloffame,</span><span class="r12">                                                                          </span> |
|<span class="r8">  896 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    meta_hof,</span><span class="r12">                                                                            </span> |
|<span class="r8">  897 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    progress_hof,</span><span class="r12">                                                                        </span> |
|<span class="r8">  898 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    generation,</span><span class="r12">                                                                          </span> |
|<span class="r8">  899 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    result_data</span><span class="r19">=</span><span class="r13">None</span><span class="r14">,</span><span class="r12">                                                                    </span> |
|<span class="r8">  900 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">):</span><span class="r12">                                                                                       </span> |
|<span class="r8">  901 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    csv_lines </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                       </span> |
|<span class="r8">  902 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    meta_csv_lines </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                  </span> |
|<span class="r8">  903 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  904 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    made_progress </span><span class="r19">=</span><span class="r14"> </span><span class="r13">False</span><span class="r12">                                                                </span> |
|<span class="r8">  905 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  906 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> meta_hof:</span><span class="r12">                                                                         </span> |
|<span class="r8">  907 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        best_min </span><span class="r19">=</span><span class="r14"> </span><span class="r18">max</span><span class="r14">([i</span><span class="r19">.</span><span class="r14">fitness</span><span class="r19">.</span><span class="r14">values[</span><span class="r19">2</span><span class="r14">] </span><span class="r13">for</span><span class="r14"> i </span><span class="r20">in</span><span class="r14"> meta_hof</span><span class="r19">.</span><span class="r14">items])</span><span class="r12">                    </span> |
|<span class="r8">  908 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                                </span> |
|<span class="r8">  909 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21"># just in case if the SSE score is used this will make sure that it has to be gre</span> |
|<span class="r8">  910 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        best_min </span><span class="r19">=</span><span class="r14"> </span><span class="r19">-1e308</span><span class="r12">                                                                </span> |
|<span class="r8">  911 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  912 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    lookup </span><span class="r19">=</span><span class="r14"> create_lookup(population)</span><span class="r12">                                                   </span> |
|<span class="r8">  913 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  914 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    last_time </span><span class="r19">=</span><span class="r14"> time</span><span class="r19">.</span><span class="r14">time()</span><span class="r12">                                                              </span> |
|<span class="r8">  915 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    elapsed </span><span class="r19">=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">progress_elapsed_time</span><span class="r12">                                                </span> |
|<span class="r8">  916 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  917 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> idx, result </span><span class="r20">in</span><span class="r14"> </span><span class="r18">enumerate</span><span class="r14">(fitnesses):</span><span class="r12">                                             </span> |
|<span class="r8">  918 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  919 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> (time</span><span class="r19">.</span><span class="r14">time() </span><span class="r19">-</span><span class="r14"> last_time) </span><span class="r19">&gt;</span><span class="r14"> elapsed:</span><span class="r12">                                          </span> |
|<span class="r8">  920 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            percent </span><span class="r19">=</span><span class="r14"> idx </span><span class="r19">/</span><span class="r14"> </span><span class="r18">len</span><span class="r14">(population)</span><span class="r12">                                              </span> |
|<span class="r8">  921 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(</span><span class="r12">                                           </span> |
|<span class="r8">  922 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;Generation </span><span class="r22">%s</span><span class="r11"> approximately </span><span class="r22">%.1f</span><span class="r11"> </span><span class="r22">%%</span><span class="r11"> complete with </span><span class="r22">%s</span><span class="r11">/</span><span class="r22">%s</span><span class="r11"> done&quot;</span><span class="r14">,</span><span class="r12">          </span> |
|<span class="r8">  923 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                generation,</span><span class="r12">                                                              </span> |
|<span class="r8">  924 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                percent </span><span class="r19">*</span><span class="r14"> </span><span class="r19">100</span><span class="r14">,</span><span class="r12">                                                           </span> |
|<span class="r8">  925 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                idx,</span><span class="r12">                                                                     </span> |
|<span class="r8">  926 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r18">len</span><span class="r14">(population),</span><span class="r12">                                                         </span> |
|<span class="r8">  927 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            )</span><span class="r12">                                                                            </span> |
|<span class="r8">  928 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            last_time </span><span class="r19">=</span><span class="r14"> time</span><span class="r19">.</span><span class="r14">time()</span><span class="r12">                                                      </span> |
|<span class="r8">  929 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  930 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        fit, csv_line, meta_score, results, individual </span><span class="r19">=</span><span class="r14"> result</span><span class="r12">                          </span> |
|<span class="r8">  931 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  932 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        ind </span><span class="r19">=</span><span class="r14"> pop_lookup(lookup, individual)</span><span class="r12">                                             </span> |
|<span class="r8">  933 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  934 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        save_name_base </span><span class="r19">=</span><span class="r14"> hashlib</span><span class="r19">.</span><span class="r14">md5(</span><span class="r12">                                                    </span> |
|<span class="r8">  935 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r18">str</span><span class="r14">(</span><span class="r18">list</span><span class="r14">(ind))</span><span class="r19">.</span><span class="r14">encode(</span><span class="r11">&quot;utf-8&quot;</span><span class="r14">, </span><span class="r11">&quot;ignore&quot;</span><span class="r14">)</span><span class="r12">                                     </span> |
|<span class="r8">  936 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        )</span><span class="r19">.</span><span class="r14">hexdigest()</span><span class="r12">                                                                    </span> |
|<span class="r8">  937 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  938 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        ind</span><span class="r19">.</span><span class="r14">fitness</span><span class="r19">.</span><span class="r14">values </span><span class="r19">=</span><span class="r14"> calcFitness(fit, cache)</span><span class="r12">                                     </span> |
|<span class="r8">  939 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        ind</span><span class="r19">.</span><span class="r14">csv_line </span><span class="r19">=</span><span class="r14"> [time</span><span class="r19">.</span><span class="r14">ctime(), save_name_base] </span><span class="r19">+</span><span class="r14"> csv_line</span><span class="r12">                         </span> |
|<span class="r8">  940 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  941 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        ind_meta </span><span class="r19">=</span><span class="r14"> pop</span><span class="r19">.</span><span class="r14">Individual(ind)</span><span class="r12">                                                   </span> |
|<span class="r8">  942 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  943 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        ind_meta</span><span class="r19">.</span><span class="r14">fitness</span><span class="r19">.</span><span class="r14">values </span><span class="r19">=</span><span class="r14"> meta_score</span><span class="r12">                                             </span> |
|<span class="r8">  944 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        ind_meta</span><span class="r19">.</span><span class="r14">csv_line </span><span class="r19">=</span><span class="r14"> [time</span><span class="r19">.</span><span class="r14">ctime(), save_name_base] </span><span class="r19">+</span><span class="r14"> csv_line</span><span class="r12">                    </span> |
|<span class="r8">  945 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  946 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        update_result_data(cache, ind, fit, result_data, results, meta_score)</span><span class="r12">            </span> |
|<span class="r8">  947 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  948 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> csv_line:</span><span class="r12">                                                                     </span> |
|<span class="r8">  949 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            csv_lines</span><span class="r19">.</span><span class="r14">append([time</span><span class="r19">.</span><span class="r14">ctime(), save_name_base] </span><span class="r19">+</span><span class="r14"> csv_line)</span><span class="r12">                  </span> |
|<span class="r8">  950 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  951 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> halloffame </span><span class="r20">is</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r13">None</span><span class="r14">:</span><span class="r12">                                                   </span> |
|<span class="r8">  952 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                onFront, significant </span><span class="r19">=</span><span class="r14"> pareto</span><span class="r19">.</span><span class="r14">updateParetoFront(halloffame, ind)</span><span class="r12">         </span> |
|<span class="r8">  953 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">if</span><span class="r14"> onFront </span><span class="r20">and</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">metaResultsOnly:</span><span class="r12">                                </span> |
|<span class="r8">  954 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    processResults(save_name_base, ind, cache, results)</span><span class="r12">                  </span> |
|<span class="r8">  955 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  956 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            onFrontMeta, significant_meta </span><span class="r19">=</span><span class="r14"> pareto</span><span class="r19">.</span><span class="r14">updateParetoFront(meta_hof, ind_meta)</span><span class="r12"> </span> |
|<span class="r8">  957 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> onFrontMeta:</span><span class="r12">                                                              </span> |
|<span class="r8">  958 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                meta_csv_lines</span><span class="r19">.</span><span class="r14">append([time</span><span class="r19">.</span><span class="r14">ctime(), save_name_base] </span><span class="r19">+</span><span class="r14"> csv_line)</span><span class="r12">         </span> |
|<span class="r8">  959 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                processResultsMeta(save_name_base, ind, cache, results)</span><span class="r12">                  </span> |
|<span class="r8">  960 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  961 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r21"># If this is None progress can never be made and the algorithm will terminate</span> |
|<span class="r8">  962 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r21"># None if used with algorithms like multistart or scoretest which don&#x27;t need </span> |
|<span class="r8">  963 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> progress_hof </span><span class="r20">is</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r13">None</span><span class="r14">:</span><span class="r12">                                                 </span> |
|<span class="r8">  964 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                onFrontProgress, significant_progress </span><span class="r19">=</span><span class="r14"> pareto</span><span class="r19">.</span><span class="r14">updateParetoFront(</span><span class="r12">        </span> |
|<span class="r8">  965 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    copy</span><span class="r19">.</span><span class="r14">deepcopy(progress_hof), ind_meta</span><span class="r12">                                </span> |
|<span class="r8">  966 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                )</span><span class="r12">                                                                        </span> |
|<span class="r8">  967 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">if</span><span class="r14"> significant_progress:</span><span class="r12">                                                 </span> |
|<span class="r8">  968 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    made_progress </span><span class="r19">=</span><span class="r14"> </span><span class="r13">True</span><span class="r12">                                                 </span> |
|<span class="r8">  969 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    pareto</span><span class="r19">.</span><span class="r14">updateParetoFront(progress_hof, ind_meta)</span><span class="r12">                     </span> |
|<span class="r8">  970 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  971 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    writer</span><span class="r19">.</span><span class="r14">writerows(csv_lines)</span><span class="r12">                                                          </span> |
|<span class="r8">  972 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  973 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    new_best_min </span><span class="r19">=</span><span class="r14"> </span><span class="r18">max</span><span class="r14">([i</span><span class="r19">.</span><span class="r14">fitness</span><span class="r19">.</span><span class="r14">values[</span><span class="r19">2</span><span class="r14">] </span><span class="r13">for</span><span class="r14"> i </span><span class="r20">in</span><span class="r14"> meta_hof</span><span class="r19">.</span><span class="r14">items])</span><span class="r12">                    </span> |
|<span class="r8">  974 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  975 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r21"># if the min value is zero then use the old method to determine progress of adding to</span> |
|<span class="r8">  976 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r21"># this should catch later stages where real progress is not being made but you have a</span> |
|<span class="r8">  977 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r21"># if new_best_min &gt; 0:</span><span class="r12">                                                               </span> |
|<span class="r8">  978 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r21">#    if new_best_min &gt; best_min:</span><span class="r12">                                                     </span> |
|<span class="r8">  979 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r21">#        made_progress = True</span><span class="r12">                                                        </span> |
|<span class="r8">  980 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r21">#    else:</span><span class="r12">                                                                           </span> |
|<span class="r8">  981 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r21">#        made_progress = False</span><span class="r12">                                                       </span> |
|<span class="r8">  982 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  983 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r21"># flush before returning</span><span class="r12">                                                             </span> |
|<span class="r8">  984 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    csvfile</span><span class="r19">.</span><span class="r14">flush()</span><span class="r12">                                                                      </span> |
|<span class="r8">  985 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  986 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> made_progress:</span><span class="r12">                                                                    </span> |
|<span class="r8">  987 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> generation </span><span class="r19">!=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">lastProgressGeneration:</span><span class="r12">                                   </span> |
|<span class="r8">  988 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            cache</span><span class="r19">.</span><span class="r14">generationsOfProgress </span><span class="r19">+=</span><span class="r14"> </span><span class="r19">1</span><span class="r12">                                             </span> |
|<span class="r8">  989 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            cache</span><span class="r19">.</span><span class="r14">lastProgressGeneration </span><span class="r19">=</span><span class="r14"> generation</span><span class="r12">                                    </span> |
|<span class="r8">  990 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">elif</span><span class="r14"> generation </span><span class="r19">!=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">lastProgressGeneration:</span><span class="r12">                                     </span> |
|<span class="r8">  991 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cache</span><span class="r19">.</span><span class="r14">generationsOfProgress </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                                                  </span> |
|<span class="r8">  992 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  993 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    path_meta_csv </span><span class="r19">=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMeta&quot;</span><span class="r14">] </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;results.csv&quot;</span><span class="r12">                     </span> |
|<span class="r8">  994 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">with</span><span class="r14"> path_meta_csv</span><span class="r19">.</span><span class="r14">open(</span><span class="r11">&quot;a&quot;</span><span class="r14">, newline</span><span class="r19">=</span><span class="r11">&quot;&quot;</span><span class="r14">) </span><span class="r13">as</span><span class="r14"> csvfile:</span><span class="r12">                                 </span> |
|<span class="r8">  995 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        writer </span><span class="r19">=</span><span class="r14"> csv</span><span class="r19">.</span><span class="r14">writer(csvfile, delimiter</span><span class="r19">=</span><span class="r11">&quot;,&quot;</span><span class="r14">, quoting</span><span class="r19">=</span><span class="r14">csv</span><span class="r19">.</span><span class="r14">QUOTE_ALL)</span><span class="r12">               </span> |
|<span class="r8">  996 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        writer</span><span class="r19">.</span><span class="r14">writerows(meta_csv_lines)</span><span class="r12">                                                 </span> |
|<span class="r8">  997 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  998 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cleanupFront(cache, halloffame, meta_hof)</span><span class="r12">                                            </span> |
|<span class="r8">  999 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    writeMetaFront(cache, meta_hof, path_meta_csv)</span><span class="r12">                                       </span> |
|<span class="r8"> 1000 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1001 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    stalled </span><span class="r19">=</span><span class="r14"> (generation </span><span class="r19">-</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">lastProgressGeneration) </span><span class="r19">&gt;=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">stallGenerations</span><span class="r12">      </span> |
|<span class="r8"> 1002 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    stallWarn </span><span class="r19">=</span><span class="r14"> (generation </span><span class="r19">-</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">lastProgressGeneration) </span><span class="r19">&gt;=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">stallCorrect</span><span class="r12">        </span> |
|<span class="r8"> 1003 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    progressWarn </span><span class="r19">=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">generationsOfProgress </span><span class="r19">&gt;=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">progressCorrect</span><span class="r12">                  </span> |
|<span class="r8"> 1004 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1005 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> stalled, stallWarn, progressWarn</span><span class="r12">                                              </span> |
|<span class="r8"> 1006 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1007 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1008 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">eval_population</span><span class="r14">(</span><span class="r12">                                                                     </span> |
|<span class="r8"> 1009 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache,</span><span class="r12">                                                                               </span> |
|<span class="r8"> 1010 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    invalid_ind,</span><span class="r12">                                                                         </span> |
|<span class="r8"> 1011 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    writer,</span><span class="r12">                                                                              </span> |
|<span class="r8"> 1012 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    csvfile,</span><span class="r12">                                                                             </span> |
|<span class="r8"> 1013 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    halloffame,</span><span class="r12">                                                                          </span> |
|<span class="r8"> 1014 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    meta_hof,</span><span class="r12">                                                                            </span> |
|<span class="r8"> 1015 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    progress_hof,</span><span class="r12">                                                                        </span> |
|<span class="r8"> 1016 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    generation,</span><span class="r12">                                                                          </span> |
|<span class="r8"> 1017 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    result_data</span><span class="r19">=</span><span class="r13">None</span><span class="r14">,</span><span class="r12">                                                                    </span> |
|<span class="r8"> 1018 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">):</span><span class="r12">                                                                                       </span> |
|<span class="r8"> 1019 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> eval_population_base(</span><span class="r12">                                                         </span> |
|<span class="r8"> 1020 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cache</span><span class="r19">.</span><span class="r14">eval</span><span class="r19">.</span><span class="r14">evaluate,</span><span class="r12">                                                             </span> |
|<span class="r8"> 1021 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cache,</span><span class="r12">                                                                           </span> |
|<span class="r8"> 1022 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        invalid_ind,</span><span class="r12">                                                                     </span> |
|<span class="r8"> 1023 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        writer,</span><span class="r12">                                                                          </span> |
|<span class="r8"> 1024 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        csvfile,</span><span class="r12">                                                                         </span> |
|<span class="r8"> 1025 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        halloffame,</span><span class="r12">                                                                      </span> |
|<span class="r8"> 1026 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        meta_hof,</span><span class="r12">                                                                        </span> |
|<span class="r8"> 1027 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        progress_hof,</span><span class="r12">                                                                    </span> |
|<span class="r8"> 1028 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        generation,</span><span class="r12">                                                                      </span> |
|<span class="r8"> 1029 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        result_data,</span><span class="r12">                                                                     </span> |
|<span class="r8"> 1030 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    )</span><span class="r12">                                                                                    </span> |
|<span class="r8"> 1031 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1032 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1033 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">eval_population_final</span><span class="r14">(</span><span class="r12">                                                               </span> |
|<span class="r8"> 1034 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache,</span><span class="r12">                                                                               </span> |
|<span class="r8"> 1035 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    invalid_ind,</span><span class="r12">                                                                         </span> |
|<span class="r8"> 1036 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    writer,</span><span class="r12">                                                                              </span> |
|<span class="r8"> 1037 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    csvfile,</span><span class="r12">                                                                             </span> |
|<span class="r8"> 1038 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    halloffame,</span><span class="r12">                                                                          </span> |
|<span class="r8"> 1039 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    meta_hof,</span><span class="r12">                                                                            </span> |
|<span class="r8"> 1040 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    progress_hof,</span><span class="r12">                                                                        </span> |
|<span class="r8"> 1041 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    generation,</span><span class="r12">                                                                          </span> |
|<span class="r8"> 1042 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    result_data</span><span class="r19">=</span><span class="r13">None</span><span class="r14">,</span><span class="r12">                                                                    </span> |
|<span class="r8"> 1043 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">):</span><span class="r12">                                                                                       </span> |
|<span class="r8"> 1044 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> eval_population_base(</span><span class="r12">                                                         </span> |
|<span class="r8"> 1045 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cache</span><span class="r19">.</span><span class="r14">eval</span><span class="r19">.</span><span class="r14">evaluate_final,</span><span class="r12">                                                       </span> |
|<span class="r8"> 1046 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cache,</span><span class="r12">                                                                           </span> |
|<span class="r8"> 1047 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        invalid_ind,</span><span class="r12">                                                                     </span> |
|<span class="r8"> 1048 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        writer,</span><span class="r12">                                                                          </span> |
|<span class="r8"> 1049 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        csvfile,</span><span class="r12">                                                                         </span> |
|<span class="r8"> 1050 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        halloffame,</span><span class="r12">                                                                      </span> |
|<span class="r8"> 1051 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        meta_hof,</span><span class="r12">                                                                        </span> |
|<span class="r8"> 1052 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        progress_hof,</span><span class="r12">                                                                    </span> |
|<span class="r8"> 1053 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        generation,</span><span class="r12">                                                                      </span> |
|<span class="r8"> 1054 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        result_data,</span><span class="r12">                                                                     </span> |
|<span class="r8"> 1055 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    )</span><span class="r12">                                                                                    </span> |
|<span class="r8"> 1056 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1057 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1058 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">eval_population_base</span><span class="r14">(</span><span class="r12">                                                                </span> |
|<span class="r8"> 1059 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    evaluate,</span><span class="r12">                                                                            </span> |
|<span class="r8"> 1060 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache,</span><span class="r12">                                                                               </span> |
|<span class="r8"> 1061 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    invalid_ind,</span><span class="r12">                                                                         </span> |
|<span class="r8"> 1062 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    writer,</span><span class="r12">                                                                              </span> |
|<span class="r8"> 1063 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    csvfile,</span><span class="r12">                                                                             </span> |
|<span class="r8"> 1064 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    halloffame,</span><span class="r12">                                                                          </span> |
|<span class="r8"> 1065 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    meta_hof,</span><span class="r12">                                                                            </span> |
|<span class="r8"> 1066 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    progress_hof,</span><span class="r12">                                                                        </span> |
|<span class="r8"> 1067 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    generation,</span><span class="r12">                                                                          </span> |
|<span class="r8"> 1068 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    result_data</span><span class="r19">=</span><span class="r13">None</span><span class="r14">,</span><span class="r12">                                                                    </span> |
|<span class="r8"> 1069 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">):</span><span class="r12">                                                                                       </span> |
|<span class="r8"> 1070 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    fitnesses </span><span class="r19">=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">map_function(evaluate, </span><span class="r18">map</span><span class="r14">(</span><span class="r18">list</span><span class="r14">, invalid_ind))</span><span class="r12">                     </span> |
|<span class="r8"> 1071 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1072 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> process_population(</span><span class="r12">                                                           </span> |
|<span class="r8"> 1073 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cache,</span><span class="r12">                                                                           </span> |
|<span class="r8"> 1074 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        invalid_ind,</span><span class="r12">                                                                     </span> |
|<span class="r8"> 1075 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        fitnesses,</span><span class="r12">                                                                       </span> |
|<span class="r8"> 1076 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        writer,</span><span class="r12">                                                                          </span> |
|<span class="r8"> 1077 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        csvfile,</span><span class="r12">                                                                         </span> |
|<span class="r8"> 1078 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        halloffame,</span><span class="r12">                                                                      </span> |
|<span class="r8"> 1079 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        meta_hof,</span><span class="r12">                                                                        </span> |
|<span class="r8"> 1080 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        progress_hof,</span><span class="r12">                                                                    </span> |
|<span class="r8"> 1081 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        generation,</span><span class="r12">                                                                      </span> |
|<span class="r8"> 1082 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        result_data,</span><span class="r12">                                                                     </span> |
|<span class="r8"> 1083 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    )</span><span class="r12">                                                                                    </span> |
|<span class="r8"> 1084 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1085 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1086 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">get_grad_tolerance</span><span class="r14">(cache, name):</span><span class="r12">                                                     </span> |
|<span class="r8"> 1087 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    smallest_peak </span><span class="r19">=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">target[name][</span><span class="r11">&quot;smallest_peak&quot;</span><span class="r14">]</span><span class="r12">                                  </span> |
|<span class="r8"> 1088 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    largest_peak </span><span class="r19">=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">target[name][</span><span class="r11">&quot;largest_peak&quot;</span><span class="r14">]</span><span class="r12">                                    </span> |
|<span class="r8"> 1089 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1090 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    grad_tol </span><span class="r19">=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">abstolFactorGrad </span><span class="r19">*</span><span class="r14"> smallest_peak</span><span class="r12">                                    </span> |
|<span class="r8"> 1091 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    grad_tol_min </span><span class="r19">=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">abstolFactorGradMax </span><span class="r19">*</span><span class="r14"> largest_peak</span><span class="r12">                              </span> |
|<span class="r8"> 1092 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1093 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> </span><span class="r18">max</span><span class="r14">([grad_tol, grad_tol_min])</span><span class="r12">                                                 </span> |
|<span class="r8"> 1094 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1095 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1096 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">get_evo_tolerance</span><span class="r14">(cache, name):</span><span class="r12">                                                      </span> |
|<span class="r8"> 1097 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    smallest_peak </span><span class="r19">=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">target[name][</span><span class="r11">&quot;smallest_peak&quot;</span><span class="r14">]</span><span class="r12">                                  </span> |
|<span class="r8"> 1098 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    largest_peak </span><span class="r19">=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">target[name][</span><span class="r11">&quot;largest_peak&quot;</span><span class="r14">]</span><span class="r12">                                    </span> |
|<span class="r8"> 1099 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1100 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    evo_tol </span><span class="r19">=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">abstolFactor </span><span class="r19">*</span><span class="r14"> smallest_peak</span><span class="r12">                                         </span> |
|<span class="r8"> 1101 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    evo_tol_min </span><span class="r19">=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">abstolFactorGradMax </span><span class="r19">*</span><span class="r14"> largest_peak</span><span class="r12">                               </span> |
|<span class="r8"> 1102 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1103 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> </span><span class="r18">max</span><span class="r14">([evo_tol, evo_tol_min])</span><span class="r12">                                                   </span> |
|<span class="r8"> 1104 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1105 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1106 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">writeMetaFront</span><span class="r14">(cache, meta_hof, path_meta_csv):</span><span class="r12">                                      </span> |
|<span class="r8"> 1107 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    new_data </span><span class="r19">=</span><span class="r14"> [individual</span><span class="r19">.</span><span class="r14">csv_line </span><span class="r13">for</span><span class="r14"> individual </span><span class="r20">in</span><span class="r14"> meta_hof</span><span class="r19">.</span><span class="r14">items]</span><span class="r12">                    </span> |
|<span class="r8"> 1108 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    new_data </span><span class="r19">=</span><span class="r14"> pandas</span><span class="r19">.</span><span class="r14">DataFrame(new_data, columns</span><span class="r19">=</span><span class="r14">cache</span><span class="r19">.</span><span class="r14">headers)</span><span class="r12">                         </span> |
|<span class="r8"> 1109 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1110 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    new_data</span><span class="r19">.</span><span class="r14">to_csv(path_meta_csv, quoting</span><span class="r19">=</span><span class="r14">csv</span><span class="r19">.</span><span class="r14">QUOTE_ALL, index</span><span class="r19">=</span><span class="r13">False</span><span class="r14">)</span><span class="r12">                   </span> |
|<span class="r8"> 1111 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    new_data</span><span class="r19">.</span><span class="r14">to_excel(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMeta&quot;</span><span class="r14">] </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;results.xlsx&quot;</span><span class="r14">, index</span><span class="r19">=</span><span class="r13">False</span><span class="r14">)</span><span class="r12">    </span> |
|<span class="r8"> 1112 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1113 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1114 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">processResultsGrad</span><span class="r14">(save_name_base, individual, cache, results):</span><span class="r12">                      </span> |
|<span class="r8"> 1115 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    saveExperiments(</span><span class="r12">                                                                     </span> |
|<span class="r8"> 1116 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        save_name_base,</span><span class="r12">                                                                  </span> |
|<span class="r8"> 1117 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cache</span><span class="r19">.</span><span class="r14">settings,</span><span class="r12">                                                                  </span> |
|<span class="r8"> 1118 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cache</span><span class="r19">.</span><span class="r14">target,</span><span class="r12">                                                                    </span> |
|<span class="r8"> 1119 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        results,</span><span class="r12">                                                                         </span> |
|<span class="r8"> 1120 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirGrad&quot;</span><span class="r14">],</span><span class="r12">                                                </span> |
|<span class="r8"> 1121 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r11">&quot;</span><span class="r22">%s</span><span class="r11">_</span><span class="r22">%s</span><span class="r11">_GRAD.h5&quot;</span><span class="r14">,</span><span class="r12">                                                                 </span> |
|<span class="r8"> 1122 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    )</span><span class="r12">                                                                                    </span> |
|<span class="r8"> 1123 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1124 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1125 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">processResults</span><span class="r14">(save_name_base, individual, cache, results):</span><span class="r12">                          </span> |
|<span class="r8"> 1126 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    saveExperiments(</span><span class="r12">                                                                     </span> |
|<span class="r8"> 1127 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        save_name_base,</span><span class="r12">                                                                  </span> |
|<span class="r8"> 1128 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cache</span><span class="r19">.</span><span class="r14">settings,</span><span class="r12">                                                                  </span> |
|<span class="r8"> 1129 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cache</span><span class="r19">.</span><span class="r14">target,</span><span class="r12">                                                                    </span> |
|<span class="r8"> 1130 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        results,</span><span class="r12">                                                                         </span> |
|<span class="r8"> 1131 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirEvo&quot;</span><span class="r14">],</span><span class="r12">                                                 </span> |
|<span class="r8"> 1132 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r11">&quot;</span><span class="r22">%s</span><span class="r11">_</span><span class="r22">%s</span><span class="r11">_EVO.h5&quot;</span><span class="r14">,</span><span class="r12">                                                                  </span> |
|<span class="r8"> 1133 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    )</span><span class="r12">                                                                                    </span> |
|<span class="r8"> 1134 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1135 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1136 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">processResultsMeta</span><span class="r14">(save_name_base, individual, cache, results):</span><span class="r12">                      </span> |
|<span class="r8"> 1137 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    saveExperiments(</span><span class="r12">                                                                     </span> |
|<span class="r8"> 1138 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        save_name_base,</span><span class="r12">                                                                  </span> |
|<span class="r8"> 1139 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cache</span><span class="r19">.</span><span class="r14">settings,</span><span class="r12">                                                                  </span> |
|<span class="r8"> 1140 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cache</span><span class="r19">.</span><span class="r14">target,</span><span class="r12">                                                                    </span> |
|<span class="r8"> 1141 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        results,</span><span class="r12">                                                                         </span> |
|<span class="r8"> 1142 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMeta&quot;</span><span class="r14">],</span><span class="r12">                                                </span> |
|<span class="r8"> 1143 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r11">&quot;</span><span class="r22">%s</span><span class="r11">_</span><span class="r22">%s</span><span class="r11">_meta.h5&quot;</span><span class="r14">,</span><span class="r12">                                                                 </span> |
|<span class="r8"> 1144 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    )</span><span class="r12">                                                                                    </span> |
|<span class="r8"> 1145 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1146 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1147 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">cleanupFront</span><span class="r14">(cache, halloffame</span><span class="r19">=</span><span class="r13">None</span><span class="r14">, meta_hof</span><span class="r19">=</span><span class="r13">None</span><span class="r14">, grad_hof</span><span class="r19">=</span><span class="r13">None</span><span class="r14">):</span><span class="r12">                  </span> |
|<span class="r8"> 1148 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> halloffame </span><span class="r20">is</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r13">None</span><span class="r14">:</span><span class="r12">                                                           </span> |
|<span class="r8"> 1149 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cleanDir(Path(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirEvo&quot;</span><span class="r14">]), halloffame)</span><span class="r12">                      </span> |
|<span class="r8"> 1150 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1151 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> meta_hof </span><span class="r20">is</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r13">None</span><span class="r14">:</span><span class="r12">                                                             </span> |
|<span class="r8"> 1152 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cleanDir(Path(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMeta&quot;</span><span class="r14">]), meta_hof)</span><span class="r12">                       </span> |
|<span class="r8"> 1153 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1154 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> grad_hof </span><span class="r20">is</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r13">None</span><span class="r14">:</span><span class="r12">                                                             </span> |
|<span class="r8"> 1155 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cleanDir(Path(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirGrad&quot;</span><span class="r14">]), grad_hof)</span><span class="r12">                       </span> |
|<span class="r8"> 1156 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1157 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1158 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">cleanDir</span><span class="r14">(</span><span class="r18">dir</span><span class="r14">, hof):</span><span class="r12">                                                                  </span> |
|<span class="r8"> 1159 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r21"># find all items in directory</span><span class="r12">                                                        </span> |
|<span class="r8"> 1160 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    paths </span><span class="r19">=</span><span class="r14"> </span><span class="r18">dir</span><span class="r19">.</span><span class="r14">glob(</span><span class="r11">&quot;*.h5&quot;</span><span class="r14">)</span><span class="r12">                                                             </span> |
|<span class="r8"> 1161 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1162 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r21"># make set of items based on removing everything after _</span><span class="r12">                             </span> |
|<span class="r8"> 1163 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    exists </span><span class="r19">=</span><span class="r14"> {</span><span class="r18">str</span><span class="r14">(path</span><span class="r19">.</span><span class="r14">name)</span><span class="r19">.</span><span class="r14">split(</span><span class="r11">&quot;_&quot;</span><span class="r14">, </span><span class="r19">1</span><span class="r14">)[</span><span class="r19">0</span><span class="r14">] </span><span class="r13">for</span><span class="r14"> path </span><span class="r20">in</span><span class="r14"> paths}</span><span class="r12">                         </span> |
|<span class="r8"> 1164 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1165 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r21"># make set of allowed keys based on hall of hame</span><span class="r12">                                     </span> |
|<span class="r8"> 1166 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    allowed </span><span class="r19">=</span><span class="r14"> hof</span><span class="r19">.</span><span class="r14">hashes()</span><span class="r12">                                                               </span> |
|<span class="r8"> 1167 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1168 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r21"># remove everything not in hall of fame</span><span class="r12">                                              </span> |
|<span class="r8"> 1169 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    remove </span><span class="r19">=</span><span class="r14"> exists </span><span class="r19">-</span><span class="r14"> allowed</span><span class="r12">                                                            </span> |
|<span class="r8"> 1170 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1171 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> save_name_base </span><span class="r20">in</span><span class="r14"> remove:</span><span class="r12">                                                        </span> |
|<span class="r8"> 1172 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> path </span><span class="r20">in</span><span class="r14"> </span><span class="r18">dir</span><span class="r19">.</span><span class="r14">glob(</span><span class="r11">&quot;</span><span class="r22">%s</span><span class="r11">*&quot;</span><span class="r14"> </span><span class="r19">%</span><span class="r14"> save_name_base):</span><span class="r12">                                    </span> |
|<span class="r8"> 1173 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            path</span><span class="r19">.</span><span class="r14">unlink()</span><span class="r12">                                                                </span> |
|<span class="r8"> 1174 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1175 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1176 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">finish</span><span class="r14">(cache):</span><span class="r12">                                                                       </span> |
|<span class="r8"> 1177 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    sub</span><span class="r19">.</span><span class="r14">graph_process(cache, </span><span class="r11">&quot;Last&quot;</span><span class="r14">, last</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                                          </span> |
|<span class="r8"> 1178 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1179 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1180 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">find_outliers</span><span class="r14">(data, lower_percent</span><span class="r19">=10</span><span class="r14">, upper_percent</span><span class="r19">=90</span><span class="r14">):</span><span class="r12">                             </span> |
|<span class="r8"> 1181 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    lb, ub </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">percentile(data, [lower_percent, upper_percent], </span><span class="r19">0</span><span class="r14">)</span><span class="r12">                   </span> |
|<span class="r8"> 1182 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    selected </span><span class="r19">=</span><span class="r14"> (data </span><span class="r19">&gt;=</span><span class="r14"> lb) </span><span class="r19">&amp;</span><span class="r14"> (data </span><span class="r19">&lt;=</span><span class="r14"> ub)</span><span class="r12">                                               </span> |
|<span class="r8"> 1183 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    bools </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">all(selected, </span><span class="r19">1</span><span class="r14">)</span><span class="r12">                                                       </span> |
|<span class="r8"> 1184 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> selected, bools</span><span class="r12">                                                               </span> |
|<span class="r8"> 1185 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1186 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1187 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">get_confidence</span><span class="r14">(data, lb</span><span class="r19">=5</span><span class="r14">, ub</span><span class="r19">=95</span><span class="r14">):</span><span class="r12">                                                   </span> |
|<span class="r8"> 1188 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    lb, ub </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">percentile(data, [lb, ub], </span><span class="r19">0</span><span class="r14">)</span><span class="r12">                                         </span> |
|<span class="r8"> 1189 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    selected </span><span class="r19">=</span><span class="r14"> (data </span><span class="r19">&gt;=</span><span class="r14"> lb) </span><span class="r19">&amp;</span><span class="r14"> (data </span><span class="r19">&lt;=</span><span class="r14"> ub)</span><span class="r12">                                               </span> |
|<span class="r8"> 1190 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    bools </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">all(selected, </span><span class="r19">1</span><span class="r14">)</span><span class="r12">                                                       </span> |
|<span class="r8"> 1191 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> data[bools, :]</span><span class="r12">                                                                </span> |
|<span class="r8"> 1192 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1193 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1194 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">test_eta</span><span class="r14">(eta, xl, xu, size):</span><span class="r12">                                                         </span> |
|<span class="r8"> 1195 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r11">&quot;return delta_q log10 power for each eta to use with distribution&quot;</span><span class="r12">                   </span> |
|<span class="r8"> 1196 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    x </span><span class="r19">=</span><span class="r14"> (xu </span><span class="r19">-</span><span class="r14"> xl) </span><span class="r19">/</span><span class="r14"> </span><span class="r19">2.0</span><span class="r12">                                                                  </span> |
|<span class="r8"> 1197 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1198 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    delta_1 </span><span class="r19">=</span><span class="r14"> (x </span><span class="r19">-</span><span class="r14"> xl) </span><span class="r19">/</span><span class="r14"> (xu </span><span class="r19">-</span><span class="r14"> xl)</span><span class="r12">                                                       </span> |
|<span class="r8"> 1199 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    delta_2 </span><span class="r19">=</span><span class="r14"> (xu </span><span class="r19">-</span><span class="r14"> x) </span><span class="r19">/</span><span class="r14"> (xu </span><span class="r19">-</span><span class="r14"> xl)</span><span class="r12">                                                       </span> |
|<span class="r8"> 1200 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1201 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    rand </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">random</span><span class="r19">.</span><span class="r14">rand(size)</span><span class="r12">                                                       </span> |
|<span class="r8"> 1202 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1203 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    mut_pow </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1.0</span><span class="r14"> </span><span class="r19">/</span><span class="r14"> (eta </span><span class="r19">+</span><span class="r14"> </span><span class="r19">1.0</span><span class="r14">)</span><span class="r12">                                                          </span> |
|<span class="r8"> 1204 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1205 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    xy </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">zeros(size)</span><span class="r12">                                                               </span> |
|<span class="r8"> 1206 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    val </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">zeros(size)</span><span class="r12">                                                              </span> |
|<span class="r8"> 1207 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    delta_q </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">zeros(size)</span><span class="r12">                                                          </span> |
|<span class="r8"> 1208 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1209 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    xy[rand </span><span class="r19">&lt;</span><span class="r14"> </span><span class="r19">0.5</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1.0</span><span class="r14"> </span><span class="r19">-</span><span class="r14"> delta_1</span><span class="r12">                                                       </span> |
|<span class="r8"> 1210 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    val[rand </span><span class="r19">&lt;</span><span class="r14"> </span><span class="r19">0.5</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r19">2.0</span><span class="r14"> </span><span class="r19">*</span><span class="r14"> rand[rand </span><span class="r19">&lt;</span><span class="r14"> </span><span class="r19">0.5</span><span class="r14">] </span><span class="r19">+</span><span class="r14"> (</span><span class="r19">1.0</span><span class="r14"> </span><span class="r19">-</span><span class="r14"> </span><span class="r19">2.0</span><span class="r14"> </span><span class="r19">*</span><span class="r14"> rand[rand </span><span class="r19">&lt;</span><span class="r14"> </span><span class="r19">0.5</span><span class="r14">]) </span><span class="r19">*</span><span class="r14"> xy[</span><span class="r12">      </span> |
|<span class="r8"> 1211 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        rand </span><span class="r19">&lt;</span><span class="r14"> </span><span class="r19">0.5</span><span class="r12">                                                                       </span> |
|<span class="r8"> 1212 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    ] </span><span class="r19">**</span><span class="r14"> (eta </span><span class="r19">+</span><span class="r14"> </span><span class="r19">1</span><span class="r14">)</span><span class="r12">                                                                       </span> |
|<span class="r8"> 1213 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    delta_q[rand </span><span class="r19">&lt;</span><span class="r14"> </span><span class="r19">0.5</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> val[rand </span><span class="r19">&lt;</span><span class="r14"> </span><span class="r19">0.5</span><span class="r14">] </span><span class="r19">**</span><span class="r14"> mut_pow </span><span class="r19">-</span><span class="r14"> </span><span class="r19">1.0</span><span class="r12">                               </span> |
|<span class="r8"> 1214 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1215 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    xy[rand </span><span class="r19">&gt;=</span><span class="r14"> </span><span class="r19">0.5</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1.0</span><span class="r14"> </span><span class="r19">-</span><span class="r14"> delta_2</span><span class="r12">                                                      </span> |
|<span class="r8"> 1216 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    val[rand </span><span class="r19">&gt;=</span><span class="r14"> </span><span class="r19">0.5</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r19">2.0</span><span class="r14"> </span><span class="r19">*</span><span class="r14"> (</span><span class="r19">1.0</span><span class="r14"> </span><span class="r19">-</span><span class="r14"> rand[rand </span><span class="r19">&gt;=</span><span class="r14"> </span><span class="r19">0.5</span><span class="r14">]) </span><span class="r19">+</span><span class="r14"> </span><span class="r19">2.0</span><span class="r14"> </span><span class="r19">*</span><span class="r14"> (</span><span class="r12">                         </span> |
|<span class="r8"> 1217 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        rand[rand </span><span class="r19">&gt;=</span><span class="r14"> </span><span class="r19">0.5</span><span class="r14">] </span><span class="r19">-</span><span class="r14"> </span><span class="r19">0.5</span><span class="r12">                                                          </span> |
|<span class="r8"> 1218 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    ) </span><span class="r19">*</span><span class="r14"> xy[rand </span><span class="r19">&gt;=</span><span class="r14"> </span><span class="r19">0.5</span><span class="r14">] </span><span class="r19">**</span><span class="r14"> (eta </span><span class="r19">+</span><span class="r14"> </span><span class="r19">1</span><span class="r14">)</span><span class="r12">                                                     </span> |
|<span class="r8"> 1219 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    delta_q[rand </span><span class="r19">&gt;=</span><span class="r14"> </span><span class="r19">0.5</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1.0</span><span class="r14"> </span><span class="r19">-</span><span class="r14"> val[rand </span><span class="r19">&gt;=</span><span class="r14"> </span><span class="r19">0.5</span><span class="r14">] </span><span class="r19">**</span><span class="r14"> mut_pow</span><span class="r12">                             </span> |
|<span class="r8"> 1220 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1221 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    delta_q </span><span class="r19">=</span><span class="r14"> delta_q </span><span class="r19">*</span><span class="r14"> (xu </span><span class="r19">-</span><span class="r14"> xl)</span><span class="r12">                                                        </span> |
|<span class="r8"> 1222 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1223 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> delta_q</span><span class="r12">                                                                       </span> |
|<span class="r8"> 1224 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1225 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1226 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">confidence_eta</span><span class="r14">(eta, xl, xu):</span><span class="r12">                                                         </span> |
|<span class="r8"> 1227 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    seq </span><span class="r19">=</span><span class="r14"> test_eta(eta, xl, xu, </span><span class="r19">100000</span><span class="r14">)</span><span class="r12">                                                  </span> |
|<span class="r8"> 1228 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    confidence </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">max(numpy</span><span class="r19">.</span><span class="r14">abs(numpy</span><span class="r19">.</span><span class="r14">percentile(seq, [</span><span class="r19">5</span><span class="r14">, </span><span class="r19">95</span><span class="r14">])))</span><span class="r12">                    </span> |
|<span class="r8"> 1229 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    mean </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">mean(numpy</span><span class="r19">.</span><span class="r14">abs(seq))</span><span class="r12">                                                    </span> |
|<span class="r8"> 1230 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1231 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> mean, confidence</span><span class="r12">                                                              </span> |
|<span class="r8"> 1232 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1233 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1234 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">setupSimulation</span><span class="r14">(sim, times, name, cache):</span><span class="r12">                                            </span> |
|<span class="r8"> 1235 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r11">&quot;set the user solution times to match the times vector and adjust other sim parameter</span> |
|<span class="r8"> 1236 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1237 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">try</span><span class="r14">:</span><span class="r12">                                                                                 </span> |
|<span class="r8"> 1238 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">del</span><span class="r14"> sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">solver</span><span class="r19">.</span><span class="r14">user_solution_times</span><span class="r12">                                    </span> |
|<span class="r8"> 1239 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">except</span><span class="r14"> </span><span class="r23">KeyError</span><span class="r14">:</span><span class="r12">                                                                     </span> |
|<span class="r8"> 1240 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">pass</span><span class="r12">                                                                             </span> |
|<span class="r8"> 1241 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1242 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">try</span><span class="r14">:</span><span class="r12">                                                                                 </span> |
|<span class="r8"> 1243 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">del</span><span class="r14"> sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">output</span><span class="r12">                                                              </span> |
|<span class="r8"> 1244 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">except</span><span class="r14"> </span><span class="r23">KeyError</span><span class="r14">:</span><span class="r12">                                                                     </span> |
|<span class="r8"> 1245 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">pass</span><span class="r12">                                                                             </span> |
|<span class="r8"> 1246 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1247 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">solver</span><span class="r19">.</span><span class="r14">user_solution_times </span><span class="r19">=</span><span class="r14"> times</span><span class="r12">                                    </span> |
|<span class="r8"> 1248 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">solver</span><span class="r19">.</span><span class="r14">sections</span><span class="r19">.</span><span class="r14">section_times[</span><span class="r19">-1</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> times[</span><span class="r19">-1</span><span class="r14">]</span><span class="r12">                         </span> |
|<span class="r8"> 1249 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">split_components_data </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1</span><span class="r12">                                   </span> |
|<span class="r8"> 1250 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1251 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">dynamicTolerance:</span><span class="r12">                                                           </span> |
|<span class="r8"> 1252 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">solver</span><span class="r19">.</span><span class="r14">time_integrator</span><span class="r19">.</span><span class="r14">abstol </span><span class="r19">=</span><span class="r14"> get_evo_tolerance(cache, name)</span><span class="r12">    </span> |
|<span class="r8"> 1253 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">solver</span><span class="r19">.</span><span class="r14">time_integrator</span><span class="r19">.</span><span class="r14">reltol </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0.0</span><span class="r12">                               </span> |
|<span class="r8"> 1254 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1255 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(</span><span class="r12">                                                   </span> |
|<span class="r8"> 1256 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r11">&quot;</span><span class="r22">%s</span><span class="r11"> abstol=</span><span class="r22">%.3g</span><span class="r11">  reltol=</span><span class="r22">%.3g</span><span class="r11">&quot;</span><span class="r14">,</span><span class="r12">                                                   </span> |
|<span class="r8"> 1257 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        sim</span><span class="r19">.</span><span class="r14">filename,</span><span class="r12">                                                                    </span> |
|<span class="r8"> 1258 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">solver</span><span class="r19">.</span><span class="r14">time_integrator</span><span class="r19">.</span><span class="r14">abstol,</span><span class="r12">                                    </span> |
|<span class="r8"> 1259 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">solver</span><span class="r19">.</span><span class="r14">time_integrator</span><span class="r19">.</span><span class="r14">reltol,</span><span class="r12">                                    </span> |
|<span class="r8"> 1260 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    )</span><span class="r12">                                                                                    </span> |
|<span class="r8"> 1261 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1262 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    experiment_name </span><span class="r19">=</span><span class="r14"> sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">experiment_name</span><span class="r12">                                           </span> |
|<span class="r8"> 1263 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> </span><span class="r18">isinstance</span><span class="r14">(experiment_name, </span><span class="r18">bytes</span><span class="r14">):</span><span class="r12">                                               </span> |
|<span class="r8"> 1264 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        experiment_name </span><span class="r19">=</span><span class="r14"> experiment_name</span><span class="r19">.</span><span class="r14">decode()</span><span class="r12">                                       </span> |
|<span class="r8"> 1265 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    units_used </span><span class="r19">=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">target[experiment_name][</span><span class="r11">&quot;units_used&quot;</span><span class="r14">]</span><span class="r12">                             </span> |
|<span class="r8"> 1266 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> unit </span><span class="r20">in</span><span class="r14"> sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">model</span><span class="r19">.</span><span class="r14">keys():</span><span class="r12">                                             </span> |
|<span class="r8"> 1267 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;unit_&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> unit:</span><span class="r12">                                                              </span> |
|<span class="r8"> 1268 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_solution_particle </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                   </span> |
|<span class="r8"> 1269 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_solution_solid </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                      </span> |
|<span class="r8"> 1270 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_solution_column_inlet </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">               </span> |
|<span class="r8"> 1271 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_solution_inlet </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                      </span> |
|<span class="r8"> 1272 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1273 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_sens_bulk </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                           </span> |
|<span class="r8"> 1274 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_sens_inlet </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                          </span> |
|<span class="r8"> 1275 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_sens_particle </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                       </span> |
|<span class="r8"> 1276 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_sens_solid </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                          </span> |
|<span class="r8"> 1277 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_sens_flux </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                           </span> |
|<span class="r8"> 1278 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_sens_volume </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                         </span> |
|<span class="r8"> 1279 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1280 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_sensdot_bulk </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                        </span> |
|<span class="r8"> 1281 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_sensdot_inlet </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                       </span> |
|<span class="r8"> 1282 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_sensdot_outlet </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                      </span> |
|<span class="r8"> 1283 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_sensdot_particle </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                    </span> |
|<span class="r8"> 1284 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_sensdot_solid </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                       </span> |
|<span class="r8"> 1285 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_sensdot_flux </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                        </span> |
|<span class="r8"> 1286 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_sensdot_volume </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                      </span> |
|<span class="r8"> 1287 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1288 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> unit </span><span class="r20">in</span><span class="r14"> units_used:</span><span class="r12">                                                       </span> |
|<span class="r8"> 1289 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_solution_column_outlet </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1</span><span class="r12">          </span> |
|<span class="r8"> 1290 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_solution_outlet </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1</span><span class="r12">                 </span> |
|<span class="r8"> 1291 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_sens_outlet </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1</span><span class="r12">                     </span> |
|<span class="r8"> 1292 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                        </span> |
|<span class="r8"> 1293 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_solution_column_outlet </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">          </span> |
|<span class="r8"> 1294 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_solution_outlet </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                 </span> |
|<span class="r8"> 1295 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input[</span><span class="r11">&quot;return&quot;</span><span class="r14">][unit]</span><span class="r19">.</span><span class="r14">write_sens_outlet </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0</span><span class="r12">                     </span> |
|<span class="r8"> 1296 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    sim</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">solver</span><span class="r19">.</span><span class="r14">nthreads </span><span class="r19">=</span><span class="r14"> </span><span class="r19">1</span><span class="r12">                                                   </span> |
|<span class="r8"> 1297 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1298 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1299 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">biasSimulation</span><span class="r14">(simulation, experiment, cache):</span><span class="r12">                                       </span> |
|<span class="r8"> 1300 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1301 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    bias_simulation </span><span class="r19">=</span><span class="r14"> Cadet(simulation</span><span class="r19">.</span><span class="r14">root)</span><span class="r12">                                             </span> |
|<span class="r8"> 1302 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1303 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">errorBias:</span><span class="r12">                                                                  </span> |
|<span class="r8"> 1304 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        name </span><span class="r19">=</span><span class="r14"> experiment[</span><span class="r11">&quot;name&quot;</span><span class="r14">]</span><span class="r12">                                                        </span> |
|<span class="r8"> 1305 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1306 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        error_model </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                               </span> |
|<span class="r8"> 1307 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> error </span><span class="r20">in</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;errorModel&quot;</span><span class="r14">]:</span><span class="r12">                                       </span> |
|<span class="r8"> 1308 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">if</span><span class="r14"> error[</span><span class="r11">&quot;name&quot;</span><span class="r14">] </span><span class="r19">==</span><span class="r14"> name:</span><span class="r12">                                                    </span> |
|<span class="r8"> 1309 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                error_model </span><span class="r19">=</span><span class="r14"> error</span><span class="r12">                                                      </span> |
|<span class="r8"> 1310 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r13">break</span><span class="r12">                                                                    </span> |
|<span class="r8"> 1311 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1312 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        delay_settings </span><span class="r19">=</span><span class="r14"> error_model[</span><span class="r11">&quot;delay&quot;</span><span class="r14">]</span><span class="r12">                                            </span> |
|<span class="r8"> 1313 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        flow_settings </span><span class="r19">=</span><span class="r14"> error_model[</span><span class="r11">&quot;flow&quot;</span><span class="r14">]</span><span class="r12">                                              </span> |
|<span class="r8"> 1314 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        load_settings </span><span class="r19">=</span><span class="r14"> error_model[</span><span class="r11">&quot;load&quot;</span><span class="r14">]</span><span class="r12">                                              </span> |
|<span class="r8"> 1315 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1316 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        nsec </span><span class="r19">=</span><span class="r14"> bias_simulation</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">solver</span><span class="r19">.</span><span class="r14">sections</span><span class="r19">.</span><span class="r14">nsec</span><span class="r12">                           </span> |
|<span class="r8"> 1317 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1318 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        delays </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">ones(nsec) </span><span class="r19">*</span><span class="r14"> </span><span class="r18">sum</span><span class="r14">(delay_settings) </span><span class="r19">/</span><span class="r14"> </span><span class="r19">2.0</span><span class="r12">                            </span> |
|<span class="r8"> 1319 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1320 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        synthetic_error</span><span class="r19">.</span><span class="r14">pump_delay(bias_simulation, delays)</span><span class="r12">                              </span> |
|<span class="r8"> 1321 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1322 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        flow </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">ones(nsec) </span><span class="r19">*</span><span class="r14"> flow_settings[</span><span class="r19">0</span><span class="r14">]</span><span class="r12">                                       </span> |
|<span class="r8"> 1323 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1324 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        synthetic_error</span><span class="r19">.</span><span class="r14">error_flow(bias_simulation, flow)</span><span class="r12">                                </span> |
|<span class="r8"> 1325 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1326 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        load </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">ones(nsec) </span><span class="r19">*</span><span class="r14"> load_settings[</span><span class="r19">0</span><span class="r14">]</span><span class="r12">                                       </span> |
|<span class="r8"> 1327 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1328 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        synthetic_error</span><span class="r19">.</span><span class="r14">error_load(bias_simulation, load)</span><span class="r12">                                </span> |
|<span class="r8"> 1329 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1330 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> bias_simulation</span><span class="r12">                                                               </span> |
|<span class="r8"> 1331 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1332 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1333 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">setupLog</span><span class="r14">(log_directory, log_name):</span><span class="r12">                                                   </span> |
|<span class="r8"> 1334 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    logger </span><span class="r19">=</span><span class="r14"> multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r12">                                                </span> |
|<span class="r8"> 1335 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    logger</span><span class="r19">.</span><span class="r14">propagate </span><span class="r19">=</span><span class="r14"> </span><span class="r13">False</span><span class="r12">                                                             </span> |
|<span class="r8"> 1336 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    logger</span><span class="r19">.</span><span class="r14">setLevel(logging</span><span class="r19">.</span><span class="r14">INFO)</span><span class="r12">                                                        </span> |
|<span class="r8"> 1337 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1338 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    logFormatter </span><span class="r19">=</span><span class="r14"> logging</span><span class="r19">.</span><span class="r14">Formatter(</span><span class="r12">                                                    </span> |
|<span class="r8"> 1339 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r11">&quot;</span><span class="r22">%(asctime)s</span><span class="r11"> </span><span class="r22">%(filename)s</span><span class="r11"> </span><span class="r22">%(funcName)s</span><span class="r11"> </span><span class="r22">%(lineno)d</span><span class="r11"> </span><span class="r22">%(message)s</span><span class="r11">&quot;</span><span class="r12">                   </span> |
|<span class="r8"> 1340 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    )</span><span class="r12">                                                                                    </span> |
|<span class="r8"> 1341 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1342 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> logger</span><span class="r19">.</span><span class="r14">handlers:</span><span class="r12">                                                              </span> |
|<span class="r8"> 1343 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        stream </span><span class="r19">=</span><span class="r14"> logging</span><span class="r19">.</span><span class="r14">StreamHandler(sys</span><span class="r19">.</span><span class="r14">stdout)</span><span class="r12">                                       </span> |
|<span class="r8"> 1344 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        stream</span><span class="r19">.</span><span class="r14">setLevel(logging</span><span class="r19">.</span><span class="r14">INFO)</span><span class="r12">                                                    </span> |
|<span class="r8"> 1345 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        stream</span><span class="r19">.</span><span class="r14">setFormatter(logFormatter)</span><span class="r12">                                                </span> |
|<span class="r8"> 1346 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1347 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        logger</span><span class="r19">.</span><span class="r14">addHandler(stream)</span><span class="r12">                                                        </span> |
|<span class="r8"> 1348 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1349 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        sys</span><span class="r19">.</span><span class="r14">stdout </span><span class="r19">=</span><span class="r14"> loggerwriter</span><span class="r19">.</span><span class="r14">LoggerWriter(logger</span><span class="r19">.</span><span class="r14">info)</span><span class="r12">                              </span> |
|<span class="r8"> 1350 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        sys</span><span class="r19">.</span><span class="r14">stderr </span><span class="r19">=</span><span class="r14"> loggerwriter</span><span class="r19">.</span><span class="r14">LoggerWriter(logger</span><span class="r19">.</span><span class="r14">warning)</span><span class="r12">                           </span> |
|<span class="r8"> 1351 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1352 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r21"># create file handler which logs even debug messages</span><span class="r12">                                 </span> |
|<span class="r8"> 1353 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    fh </span><span class="r19">=</span><span class="r14"> logging</span><span class="r19">.</span><span class="r14">FileHandler(log_directory </span><span class="r19">/</span><span class="r14"> log_name)</span><span class="r12">                                   </span> |
|<span class="r8"> 1354 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    fh</span><span class="r19">.</span><span class="r14">setLevel(logging</span><span class="r19">.</span><span class="r14">INFO)</span><span class="r12">                                                            </span> |
|<span class="r8"> 1355 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    fh</span><span class="r19">.</span><span class="r14">setFormatter(logFormatter)</span><span class="r12">                                                        </span> |
|<span class="r8"> 1356 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1357 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r21"># add the handlers to the logger</span><span class="r12">                                                     </span> |
|<span class="r8"> 1358 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    logger</span><span class="r19">.</span><span class="r14">addHandler(fh)</span><span class="r12">                                                                </span> |
|<span class="r8"> 1359 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1360 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1361 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">getCoreCounts</span><span class="r14">():</span><span class="r12">                                                                     </span> |
|<span class="r8"> 1362 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">try</span><span class="r14">:</span><span class="r12">                                                                                 </span> |
|<span class="r8"> 1363 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cpus </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(sys</span><span class="r19">.</span><span class="r14">argv[</span><span class="r19">-1</span><span class="r14">])</span><span class="r12">                                                         </span> |
|<span class="r8"> 1364 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">except</span><span class="r14"> </span><span class="r23">ValueError</span><span class="r14">:</span><span class="r12">                                                                   </span> |
|<span class="r8"> 1365 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21"># This happens when running in jupyter notebook or if the number can&#x27;t be found, </span> |
|<span class="r8"> 1366 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        cpus </span><span class="r19">=</span><span class="r14"> </span><span class="r13">None</span><span class="r12">                                                                      </span> |
|<span class="r8"> 1367 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> cpus:</span><span class="r12">                                                                             </span> |
|<span class="r8"> 1368 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">return</span><span class="r14"> cpus</span><span class="r12">                                                                      </span> |
|<span class="r8"> 1369 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                                </span> |
|<span class="r8"> 1370 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">return</span><span class="r14"> multiprocessing</span><span class="r19">.</span><span class="r14">cpu_count()</span><span class="r12">                                               </span> |
|<span class="r8"> 1371 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1372 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1373 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">getMapFunction</span><span class="r14">():</span><span class="r12">                                                                    </span> |
|<span class="r8"> 1374 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cores </span><span class="r19">=</span><span class="r14"> getCoreCounts()</span><span class="r12">                                                              </span> |
|<span class="r8"> 1375 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> cores </span><span class="r19">==</span><span class="r14"> </span><span class="r19">1</span><span class="r14">:</span><span class="r12">                                                                       </span> |
|<span class="r8"> 1376 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1377 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(</span><span class="r11">&quot;CADETMatch startup: running single threaded&quot;</span><span class="r14">)</span><span class="r12"> </span> |
|<span class="r8"> 1378 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1379 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">return</span><span class="r14"> </span><span class="r18">map</span><span class="r12">                                                                       </span> |
|<span class="r8"> 1380 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                                </span> |
|<span class="r8"> 1381 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;pool&quot;</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> getMapFunction</span><span class="r19">.</span><span class="r24">__dict__</span><span class="r14">:</span><span class="r12">                                        </span> |
|<span class="r8"> 1382 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            pool </span><span class="r19">=</span><span class="r14"> multiprocessing</span><span class="r19">.</span><span class="r14">Pool(cores)</span><span class="r12">                                           </span> |
|<span class="r8"> 1383 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            getMapFunction</span><span class="r19">.</span><span class="r14">pool </span><span class="r19">=</span><span class="r14"> pool</span><span class="r12">                                                   </span> |
|<span class="r8"> 1384 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(</span><span class="r12">                                           </span> |
|<span class="r8"> 1385 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;CADETMatch startup: created a parallel pool of </span><span class="r22">%s</span><span class="r11"> workers&quot;</span><span class="r14">, cores</span><span class="r12">       </span> |
|<span class="r8"> 1386 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            )</span><span class="r12">                                                                            </span> |
|<span class="r8"> 1387 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1388 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">return</span><span class="r14"> getMapFunction</span><span class="r19">.</span><span class="r14">pool</span><span class="r19">.</span><span class="r14">imap_unordered</span><span class="r12">                                        </span> |
|<span class="r8"> 1389 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1390 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1391 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">create_lookup</span><span class="r14">(seq):</span><span class="r12">                                                                  </span> |
|<span class="r8"> 1392 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    temp </span><span class="r19">=</span><span class="r14"> {}</span><span class="r12">                                                                            </span> |
|<span class="r8"> 1393 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> i </span><span class="r20">in</span><span class="r14"> seq:</span><span class="r12">                                                                        </span> |
|<span class="r8"> 1394 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        key </span><span class="r19">=</span><span class="r14"> </span><span class="r18">tuple</span><span class="r14">(i)</span><span class="r12">                                                                   </span> |
|<span class="r8"> 1395 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> key </span><span class="r20">not</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> temp:</span><span class="r12">                                                              </span> |
|<span class="r8"> 1396 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            temp[key] </span><span class="r19">=</span><span class="r14"> [</span><span class="r12">                                                                </span> |
|<span class="r8"> 1397 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                i,</span><span class="r12">                                                                       </span> |
|<span class="r8"> 1398 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            ]</span><span class="r12">                                                                            </span> |
|<span class="r8"> 1399 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                            </span> |
|<span class="r8"> 1400 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            temp[key]</span><span class="r19">.</span><span class="r14">append(i)</span><span class="r12">                                                          </span> |
|<span class="r8"> 1401 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> temp</span><span class="r12">                                                                          </span> |
|<span class="r8"> 1402 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1403 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1404 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">pop_lookup</span><span class="r14">(lookup, key):</span><span class="r12">                                                             </span> |
|<span class="r8"> 1405 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    temp </span><span class="r19">=</span><span class="r14"> lookup[</span><span class="r18">tuple</span><span class="r14">(key)]</span><span class="r12">                                                            </span> |
|<span class="r8"> 1406 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    data </span><span class="r19">=</span><span class="r14"> temp</span><span class="r19">.</span><span class="r14">pop(</span><span class="r19">0</span><span class="r14">)</span><span class="r12">                                                                   </span> |
|<span class="r8"> 1407 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> temp:</span><span class="r12">                                                                         </span> |
|<span class="r8"> 1408 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">del</span><span class="r14"> lookup[</span><span class="r18">tuple</span><span class="r14">(key)]</span><span class="r12">                                                           </span> |
|<span class="r8"> 1409 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> data</span><span class="r12">                                                                          </span> |
|<span class="r8"> 1410 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1411 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1412 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">process_fraction_csv</span><span class="r14">(csv_file):</span><span class="r12">                                                      </span> |
|<span class="r8"> 1413 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    data </span><span class="r19">=</span><span class="r14"> pandas</span><span class="r19">.</span><span class="r14">read_csv(csv_file)</span><span class="r12">                                                     </span> |
|<span class="r8"> 1414 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    rows, cols </span><span class="r19">=</span><span class="r14"> data</span><span class="r19">.</span><span class="r14">shape</span><span class="r12">                                                              </span> |
|<span class="r8"> 1415 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1416 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    data_headers </span><span class="r19">=</span><span class="r14"> data</span><span class="r19">.</span><span class="r14">columns</span><span class="r19">.</span><span class="r14">values</span><span class="r19">.</span><span class="r14">tolist()</span><span class="r12">                                          </span> |
|<span class="r8"> 1417 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1418 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    start_times </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array(data</span><span class="r19">.</span><span class="r14">iloc[:, </span><span class="r19">0</span><span class="r14">])</span><span class="r12">                                           </span> |
|<span class="r8"> 1419 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    stop_times </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array(data</span><span class="r19">.</span><span class="r14">iloc[:, </span><span class="r19">1</span><span class="r14">])</span><span class="r12">                                            </span> |
|<span class="r8"> 1420 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    components </span><span class="r19">=</span><span class="r14"> [</span><span class="r18">int</span><span class="r14">(i) </span><span class="r13">for</span><span class="r14"> i </span><span class="r20">in</span><span class="r14"> data_headers[</span><span class="r19">2</span><span class="r14">:]]</span><span class="r12">                                      </span> |
|<span class="r8"> 1421 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    fractions </span><span class="r19">=</span><span class="r14"> data</span><span class="r19">.</span><span class="r14">iloc[:, </span><span class="r19">2</span><span class="r14">:]</span><span class="r12">                                                         </span> |
|<span class="r8"> 1422 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1423 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> start_times, stop_times, components, fractions</span><span class="r12">                                </span> |
|<span class="r8"> 1424 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1425 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1426 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">fractionate_sim</span><span class="r14">(start_times, stop_times, components, simulation, unit):</span><span class="r12">              </span> |
|<span class="r8"> 1427 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    times </span><span class="r19">=</span><span class="r14"> simulation</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">output</span><span class="r19">.</span><span class="r14">solution</span><span class="r19">.</span><span class="r14">solution_times</span><span class="r12">                               </span> |
|<span class="r8"> 1428 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1429 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    fracs </span><span class="r19">=</span><span class="r14"> {}</span><span class="r12">                                                                           </span> |
|<span class="r8"> 1430 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> component </span><span class="r20">in</span><span class="r14"> components:</span><span class="r12">                                                         </span> |
|<span class="r8"> 1431 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        sim_value </span><span class="r19">=</span><span class="r14"> simulation</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">output</span><span class="r19">.</span><span class="r14">solution[unit][</span><span class="r12">                               </span> |
|<span class="r8"> 1432 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;solution_outlet_comp_</span><span class="r22">%03d</span><span class="r11">&quot;</span><span class="r14"> </span><span class="r19">%</span><span class="r14"> component</span><span class="r12">                                      </span> |
|<span class="r8"> 1433 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        ]</span><span class="r12">                                                                                </span> |
|<span class="r8"> 1434 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        spline </span><span class="r19">=</span><span class="r14"> scipy</span><span class="r19">.</span><span class="r14">interpolate</span><span class="r19">.</span><span class="r14">InterpolatedUnivariateSpline(times, sim_value, ext</span><span class="r19">=1</span><span class="r14">)</span><span class="r12"> </span> |
|<span class="r8"> 1435 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1436 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        fracs[component] </span><span class="r19">=</span><span class="r14"> fractionate_spline(start_times, stop_times, spline)</span><span class="r12">           </span> |
|<span class="r8"> 1437 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1438 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> fracs</span><span class="r12">                                                                         </span> |
|<span class="r8"> 1439 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1440 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8"> 1441 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">get_bins</span><span class="r14">(array, axis</span><span class="r19">=</span><span class="r13">None</span><span class="r14">):</span><span class="r12">                                                          </span> |
|<span class="r8"> 1442 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    array </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">atleast_2d(array)</span><span class="r12">                                                      </span> |
|<span class="r8"> 1443 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    shape </span><span class="r19">=</span><span class="r14"> array</span><span class="r19">.</span><span class="r14">shape</span><span class="r12">                                                                  </span> |
|<span class="r8"> 1444 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> axis:</span><span class="r12">                                                                             </span> |
|<span class="r8"> 1445 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        length </span><span class="r19">=</span><span class="r14"> shape[axis]</span><span class="r12">                                                             </span> |
|<span class="r8"> 1446 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                                </span> |
|<span class="r8"> 1447 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        length </span><span class="r19">=</span><span class="r14"> shape[</span><span class="r19">0</span><span class="r14">]</span><span class="r12">                                                                </span> |
|<span class="r8"> 1448 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    h </span><span class="r19">=</span><span class="r14"> </span><span class="r19">2</span><span class="r14"> </span><span class="r19">*</span><span class="r14"> scipy</span><span class="r19">.</span><span class="r14">stats</span><span class="r19">.</span><span class="r14">iqr(array, axis</span><span class="r19">=</span><span class="r14">axis) </span><span class="r19">*</span><span class="r14"> length</span><span class="r19">**</span><span class="r14">(</span><span class="r19">-1/3</span><span class="r14">)</span><span class="r12">                           </span> |
|<span class="r8"> 1449 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    bins </span><span class="r19">=</span><span class="r14"> (numpy</span><span class="r19">.</span><span class="r14">max(array, axis</span><span class="r19">=</span><span class="r14">axis) </span><span class="r19">-</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">min(array, axis</span><span class="r19">=</span><span class="r14">axis))</span><span class="r19">/</span><span class="r14">h</span><span class="r12">                 </span> |
|<span class="r8"> 1450 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r18">bin</span><span class="r14"> </span><span class="r19">=</span><span class="r14"> scipy</span><span class="r19">.</span><span class="r14">stats</span><span class="r19">.</span><span class="r14">mstats</span><span class="r19">.</span><span class="r14">gmean(numpy</span><span class="r19">.</span><span class="r14">atleast_1d(bins))</span><span class="r12">                               </span> |
|<span class="r8"> 1451 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">return</span><span class="r14"> </span><span class="r18">round</span><span class="r14">(</span><span class="r18">bin</span><span class="r14">)</span><span class="r12">                                                                    </span> |
|<span class="r8"> 1452 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
+---------------------------------------------------------------------------------------------------------------------------------+
<span class="r1"> C:\Users\kosh\OneDrive\Documents\Visual Studio 2017\Projects\CADETMatch\CADETMatch\match.py: % of time =  11.37% out of   1.41s.  </span>
+---------------------------------------------------------------------------------------------------------------------------------+
|<span class="r2">      </span>|<span class="r3">Time</span><span class="r2">   </span>|<span class="r3">––––––</span><span class="r2"> </span>|<span class="r3">––––––</span><span class="r2"> </span>|<span class="r4">––––––</span><span class="r2"> </span>|<span class="r2">                                                                                          </span>|
|<span class="r2"> </span><span class="r5">Line</span><span class="r2"> </span>|<span class="r6">Python</span><span class="r2"> </span>|<span class="r6">native</span><span class="r2"> </span>|<span class="r6">system</span><span class="r2"> </span>|<span class="r7">GPU</span><span class="r2">    </span>|<span class="r2">C:\Users\kosh\OneDrive\Documents\Visual Studio 2017\Projects\CADETMatch\CADETMatch\match… </span>|
|------+-------+-------+-------+-------+------------------------------------------------------------------------------------------|
|<span class="r8">    1 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">csv</span><span class="r12">                                                                               </span> |
|<span class="r8">    2 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">logging</span><span class="r12">                                                                           </span> |
|<span class="r8">    3 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">    4 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r21"># parallelization</span><span class="r12">                                                                        </span> |
|<span class="r8">    5 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">multiprocessing</span><span class="r12">                                                                   </span> |
|<span class="r8">    6 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">shutil</span><span class="r12">                                                                            </span> |
|<span class="r8">    7 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">sys</span><span class="r12">                                                                               </span> |
|<span class="r8">    8 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">time</span><span class="r12">                                                                              </span> |
|<span class="r8">    9 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">from</span><span class="r14"> </span><span class="r15">pathlib</span><span class="r14"> </span><span class="r13">import</span><span class="r14"> Path</span><span class="r12">                                                                 </span> |
|<span class="r8">   10 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   11 </span>|<span class="r9">    1% </span>|<span class="r9">       </span>|<span class="r9">   8%  </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">h5py</span><span class="r12">                                                                              </span> |
|<span class="r8">   12 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">numpy</span><span class="r12">                                                                             </span> |
|<span class="r8">   13 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">functools</span><span class="r12">                                                                         </span> |
|<span class="r8">   14 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">   1%  </span>|<span class="r10">       </span>|<span class="r13">from</span><span class="r14"> </span><span class="r15">cadet</span><span class="r14"> </span><span class="r13">import</span><span class="r14"> H5, Cadet</span><span class="r12">                                                              </span> |
|<span class="r8">   15 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   16 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">CADETMatch.evo</span><span class="r14"> </span><span class="r13">as</span><span class="r14"> </span><span class="r15">evo</span><span class="r12">                                                             </span> |
|<span class="r8">   17 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">CADETMatch.gradFD</span><span class="r14"> </span><span class="r13">as</span><span class="r14"> </span><span class="r15">gradFD</span><span class="r12">                                                       </span> |
|<span class="r8">   18 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">CADETMatch.loggerwriter</span><span class="r14"> </span><span class="r13">as</span><span class="r14"> </span><span class="r15">loggerwriter</span><span class="r12">                                           </span> |
|<span class="r8">   19 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">CADETMatch.util</span><span class="r14"> </span><span class="r13">as</span><span class="r14"> </span><span class="r15">util</span><span class="r12">                                                           </span> |
|<span class="r8">   20 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">import</span><span class="r14"> </span><span class="r15">CADETMatch.version</span><span class="r14"> </span><span class="r13">as</span><span class="r14"> </span><span class="r15">version</span><span class="r12">                                                     </span> |
|<span class="r8">   21 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">from</span><span class="r14"> </span><span class="r15">CADETMatch.cache</span><span class="r14"> </span><span class="r13">import</span><span class="r14"> cache</span><span class="r12">                                                       </span> |
|<span class="r8">   22 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   23 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   24 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">main</span><span class="r14">(map_function):</span><span class="r12">                                                                  </span> |
|<span class="r8">   25 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    path </span><span class="r19">=</span><span class="r14"> sys</span><span class="r19">.</span><span class="r14">argv[</span><span class="r19">1</span><span class="r14">]</span><span class="r12">                                                                   </span> |
|<span class="r8">   26 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    setup(cache, path, map_function)</span><span class="r12">                                                     </span> |
|<span class="r8">   27 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    gradFD</span><span class="r19">.</span><span class="r14">setupTemplates(cache)</span><span class="r12">                                                         </span> |
|<span class="r8">   28 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    hof </span><span class="r19">=</span><span class="r14"> evo</span><span class="r19">.</span><span class="r14">run(cache)</span><span class="r12">                                                                 </span> |
|<span class="r8">   29 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   30 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(</span><span class="r11">&quot;altScores </span><span class="r22">%s</span><span class="r11">&quot;</span><span class="r14">, cache</span><span class="r19">.</span><span class="r14">altScores)</span><span class="r12">                   </span> |
|<span class="r8">   31 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(</span><span class="r11">&quot;altScoreNames </span><span class="r22">%s</span><span class="r11">&quot;</span><span class="r14">, cache</span><span class="r19">.</span><span class="r14">altScoreNames)</span><span class="r12">           </span> |
|<span class="r8">   32 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   33 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">altScores:</span><span class="r12">                                                                  </span> |
|<span class="r8">   34 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> name </span><span class="r20">in</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">altScoreNames:</span><span class="r12">                                                 </span> |
|<span class="r8">   35 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            json_path </span><span class="r19">=</span><span class="r14"> util</span><span class="r19">.</span><span class="r14">setupAltFeature(cache, name)</span><span class="r12">                                </span> |
|<span class="r8">   36 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            setup(cache, json_path, map_function)</span><span class="r12">                                        </span> |
|<span class="r8">   37 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            hof </span><span class="r19">=</span><span class="r14"> evo</span><span class="r19">.</span><span class="r14">run(cache)</span><span class="r12">                                                         </span> |
|<span class="r8">   38 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   39 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    continue_mcmc(cache, map_function)</span><span class="r12">                                                   </span> |
|<span class="r8">   40 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   41 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;repeat&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">settings:</span><span class="r12">                                                       </span> |
|<span class="r8">   42 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        repeat </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;repeat&quot;</span><span class="r14">])</span><span class="r12">                                           </span> |
|<span class="r8">   43 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   44 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">for</span><span class="r14"> i </span><span class="r20">in</span><span class="r14"> </span><span class="r18">range</span><span class="r14">(repeat):</span><span class="r12">                                                          </span> |
|<span class="r8">   45 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            json_path </span><span class="r19">=</span><span class="r14"> util</span><span class="r19">.</span><span class="r14">repeatSimulation(i)</span><span class="r12">                                         </span> |
|<span class="r8">   46 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(json_path)</span><span class="r12">                                 </span> |
|<span class="r8">   47 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   48 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            setup(cache, json_path)</span><span class="r12">                                                      </span> |
|<span class="r8">   49 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   50 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            hof </span><span class="r19">=</span><span class="r14"> evo</span><span class="r19">.</span><span class="r14">run(cache)</span><span class="r12">                                                         </span> |
|<span class="r8">   51 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   52 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        util</span><span class="r19">.</span><span class="r14">metaCSV(cache)</span><span class="r12">                                                              </span> |
|<span class="r8">   53 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   54 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;bootstrap&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">settings:</span><span class="r12">                                                    </span> |
|<span class="r8">   55 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        temp </span><span class="r19">=</span><span class="r14"> []</span><span class="r12">                                                                        </span> |
|<span class="r8">   56 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   57 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        samples </span><span class="r19">=</span><span class="r14"> </span><span class="r18">int</span><span class="r14">(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;bootstrap&quot;</span><span class="r14">][</span><span class="r11">&quot;samples&quot;</span><span class="r14">])</span><span class="r12">                            </span> |
|<span class="r8">   58 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   59 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> samples:</span><span class="r12">                                                                      </span> |
|<span class="r8">   60 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   61 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            center </span><span class="r19">=</span><span class="r14"> </span><span class="r18">float</span><span class="r14">(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;bootstrap&quot;</span><span class="r14">][</span><span class="r11">&quot;center&quot;</span><span class="r14">])</span><span class="r12">                        </span> |
|<span class="r8">   62 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            noise </span><span class="r19">=</span><span class="r14"> </span><span class="r18">float</span><span class="r14">(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;bootstrap&quot;</span><span class="r14">][</span><span class="r11">&quot;percentNoise&quot;</span><span class="r14">]) </span><span class="r19">/</span><span class="r14"> </span><span class="r19">100.0</span><span class="r12">           </span> |
|<span class="r8">   63 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   64 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            bootstrap </span><span class="r19">=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirBase&quot;</span><span class="r14">] </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;bootstrap_output&quot;</span><span class="r12">            </span> |
|<span class="r8">   65 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   66 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">for</span><span class="r14"> i </span><span class="r20">in</span><span class="r14"> </span><span class="r18">range</span><span class="r14">(samples):</span><span class="r12">                                                     </span> |
|<span class="r8">   67 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r21"># copy csv files to a new directory with noise added</span><span class="r12">                     </span> |
|<span class="r8">   68 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r21"># put a new json file in the directory that points to the new csv files</span><span class="r12">  </span> |
|<span class="r8">   69 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                json_path </span><span class="r19">=</span><span class="r14"> util</span><span class="r19">.</span><span class="r14">copyCSVWithNoise(i, center, noise)</span><span class="r12">                      </span> |
|<span class="r8">   70 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(json_path)</span><span class="r12">                             </span> |
|<span class="r8">   71 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   72 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                setup(cache, json_path)</span><span class="r12">                                                  </span> |
|<span class="r8">   73 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   74 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r21"># call setup on all processes with the new json file as an argument to re</span> |
|<span class="r8">   75 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r21"># util.updateScores(json_path)</span><span class="r12">                                           </span> |
|<span class="r8">   76 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   77 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                hof </span><span class="r19">=</span><span class="r14"> evo</span><span class="r19">.</span><span class="r14">run(cache)</span><span class="r12">                                                     </span> |
|<span class="r8">   78 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                temp</span><span class="r19">.</span><span class="r14">append(util</span><span class="r19">.</span><span class="r14">bestMinScore(hof))</span><span class="r12">                                      </span> |
|<span class="r8">   79 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   80 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                numpy_temp </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array(temp)</span><span class="r12">                                           </span> |
|<span class="r8">   81 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                cov </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">cov(numpy_temp</span><span class="r19">.</span><span class="r14">transpose())</span><span class="r12">                                  </span> |
|<span class="r8">   82 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(</span><span class="r12">                                       </span> |
|<span class="r8">   83 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    </span><span class="r11">&quot;in progress cov </span><span class="r22">%s</span><span class="r11"> data </span><span class="r22">%s</span><span class="r11"> det </span><span class="r22">%s</span><span class="r11">&quot;</span><span class="r14">,</span><span class="r12">                                 </span> |
|<span class="r8">   84 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    cov,</span><span class="r12">                                                                 </span> |
|<span class="r8">   85 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    numpy_temp,</span><span class="r12">                                                          </span> |
|<span class="r8">   86 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                    numpy</span><span class="r19">.</span><span class="r14">linalg</span><span class="r19">.</span><span class="r14">det(cov),</span><span class="r12">                                               </span> |
|<span class="r8">   87 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                )</span><span class="r12">                                                                        </span> |
|<span class="r8">   88 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   89 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            numpy_temp </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">array(temp)</span><span class="r12">                                               </span> |
|<span class="r8">   90 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            cov </span><span class="r19">=</span><span class="r14"> numpy</span><span class="r19">.</span><span class="r14">cov(numpy_temp</span><span class="r19">.</span><span class="r14">transpose())</span><span class="r12">                                      </span> |
|<span class="r8">   91 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(</span><span class="r12">                                           </span> |
|<span class="r8">   92 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;final cov </span><span class="r22">%s</span><span class="r11"> data </span><span class="r22">%s</span><span class="r11"> det </span><span class="r22">%s</span><span class="r11">&quot;</span><span class="r14">, cov, numpy_temp, numpy</span><span class="r19">.</span><span class="r14">linalg</span><span class="r19">.</span><span class="r14">det(cov)</span><span class="r12">    </span> |
|<span class="r8">   93 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            )</span><span class="r12">                                                                            </span> |
|<span class="r8">   94 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   95 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">   96 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">setup</span><span class="r14">(cache, json_path, map_function):</span><span class="r12">                                               </span> |
|<span class="r8">   97 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r11">&quot;run seutp for the current json_file&quot;</span><span class="r12">                                                </span> |
|<span class="r8">   98 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">setup_dir(json_path)</span><span class="r12">                                                           </span> |
|<span class="r8">   99 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  100 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    createDirectories(cache, json_path)</span><span class="r12">                                                  </span> |
|<span class="r8">  101 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    util</span><span class="r19">.</span><span class="r14">setupLog(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirLog&quot;</span><span class="r14">], </span><span class="r11">&quot;main.log&quot;</span><span class="r14">)</span><span class="r12">                           </span> |
|<span class="r8">  102 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  103 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    print_version()</span><span class="r12">                                                                      </span> |
|<span class="r8">  104 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  105 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">setup(json_path)</span><span class="r12">                                                               </span> |
|<span class="r8">  106 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">map_function </span><span class="r19">=</span><span class="r14"> map_function</span><span class="r12">                                                    </span> |
|<span class="r8">  107 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  108 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">eval</span><span class="r19">.</span><span class="r14">evaluate </span><span class="r19">=</span><span class="r14"> functools</span><span class="r19">.</span><span class="r14">partial(evo</span><span class="r19">.</span><span class="r14">fitness, json_path</span><span class="r19">=</span><span class="r14">json_path)</span><span class="r12">            </span> |
|<span class="r8">  109 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">eval</span><span class="r19">.</span><span class="r14">evaluate_final </span><span class="r19">=</span><span class="r14"> functools</span><span class="r19">.</span><span class="r14">partial(evo</span><span class="r19">.</span><span class="r14">fitness_final, json_path</span><span class="r19">=</span><span class="r14">json_path)</span> |
|<span class="r8">  110 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">eval</span><span class="r19">.</span><span class="r14">evaluate_grad </span><span class="r19">=</span><span class="r14"> functools</span><span class="r19">.</span><span class="r14">partial(gradFD</span><span class="r19">.</span><span class="r14">gradSearch, json_path</span><span class="r19">=</span><span class="r14">json_path)</span><span class="r12"> </span> |
|<span class="r8">  111 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">eval</span><span class="r19">.</span><span class="r14">evaluate_grad_fine </span><span class="r19">=</span><span class="r14"> functools</span><span class="r19">.</span><span class="r14">partial(gradFD</span><span class="r19">.</span><span class="r14">gradSearchFine, json_path</span><span class="r19">=</span><span class="r14">js</span> |
|<span class="r8">  112 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">eval</span><span class="r19">.</span><span class="r14">grad_search </span><span class="r19">=</span><span class="r14"> gradFD</span><span class="r19">.</span><span class="r14">search</span><span class="r12">                                               </span> |
|<span class="r8">  113 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  114 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    createCSV(cache)</span><span class="r12">                                                                     </span> |
|<span class="r8">  115 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    createProgressCSV(cache)</span><span class="r12">                                                             </span> |
|<span class="r8">  116 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    createErrorCSV(cache)</span><span class="r12">                                                                </span> |
|<span class="r8">  117 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    setupTemplates(cache)</span><span class="r12">                                                                </span> |
|<span class="r8">  118 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  119 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  120 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">print_version</span><span class="r14">():</span><span class="r12">                                                                     </span> |
|<span class="r8">  121 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(</span><span class="r12">                                                   </span> |
|<span class="r8">  122 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r11">&quot;CADETMatch starting up version: </span><span class="r22">%s</span><span class="r11">&quot;</span><span class="r14">, version</span><span class="r19">.</span><span class="r14">__version__</span><span class="r12">                        </span> |
|<span class="r8">  123 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    )</span><span class="r12">                                                                                    </span> |
|<span class="r8">  124 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  125 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">import</span><span class="r14"> </span><span class="r15">importlib_metadata</span><span class="r12">                                                            </span> |
|<span class="r8">  126 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  127 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    modules </span><span class="r19">=</span><span class="r14"> [</span><span class="r12">                                                                          </span> |
|<span class="r8">  128 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&#x27;attrs&#x27;</span><span class="r14">, </span><span class="r11">&#x27;21.2.0&#x27;</span><span class="r14">),</span><span class="r12">                                                             </span> |
|<span class="r8">  129 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&quot;joblib&quot;</span><span class="r14">, </span><span class="r11">&quot;1.0.1&quot;</span><span class="r14">),</span><span class="r12">                                                             </span> |
|<span class="r8">  130 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&quot;addict&quot;</span><span class="r14">, </span><span class="r11">&quot;2.4.0&quot;</span><span class="r14">),</span><span class="r12">                                                             </span> |
|<span class="r8">  131 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&quot;corner&quot;</span><span class="r14">, </span><span class="r11">&quot;2.2.1&quot;</span><span class="r14">),</span><span class="r12">                                                             </span> |
|<span class="r8">  132 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&quot;emcee&quot;</span><span class="r14">, </span><span class="r11">&quot;3.0.2&quot;</span><span class="r14">),</span><span class="r12">                                                              </span> |
|<span class="r8">  133 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&quot;SALib&quot;</span><span class="r14">, </span><span class="r11">&quot;1.3.11&quot;</span><span class="r14">),</span><span class="r12">                                                             </span> |
|<span class="r8">  134 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&quot;psutil&quot;</span><span class="r14">, </span><span class="r11">&quot;5.8.0&quot;</span><span class="r14">),</span><span class="r12">                                                             </span> |
|<span class="r8">  135 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&quot;numpy&quot;</span><span class="r14">, </span><span class="r11">&quot;1.21.1&quot;</span><span class="r14">),</span><span class="r12">                                                             </span> |
|<span class="r8">  136 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&quot;openpyxl&quot;</span><span class="r14">, </span><span class="r11">&quot;3.0.7&quot;</span><span class="r14">),</span><span class="r12">                                                           </span> |
|<span class="r8">  137 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&quot;scipy&quot;</span><span class="r14">, </span><span class="r11">&quot;1.7.0&quot;</span><span class="r14">),</span><span class="r12">                                                              </span> |
|<span class="r8">  138 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&quot;matplotlib&quot;</span><span class="r14">, </span><span class="r11">&quot;3.4.2&quot;</span><span class="r14">),</span><span class="r12">                                                         </span> |
|<span class="r8">  139 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&quot;pandas&quot;</span><span class="r14">, </span><span class="r11">&quot;1.3.0&quot;</span><span class="r14">),</span><span class="r12">                                                             </span> |
|<span class="r8">  140 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&quot;h5py&quot;</span><span class="r14">, </span><span class="r11">&quot;3.3.0&quot;</span><span class="r14">),</span><span class="r12">                                                               </span> |
|<span class="r8">  141 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&quot;cadet-python&quot;</span><span class="r14">, </span><span class="r11">&quot;0.11&quot;</span><span class="r14">),</span><span class="r12">                                                        </span> |
|<span class="r8">  142 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&quot;seaborn&quot;</span><span class="r14">, </span><span class="r11">&quot;0.11.1&quot;</span><span class="r14">),</span><span class="r12">                                                           </span> |
|<span class="r8">  143 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&quot;scikit-learn&quot;</span><span class="r14">, </span><span class="r11">&quot;0.24.2&quot;</span><span class="r14">),</span><span class="r12">                                                      </span> |
|<span class="r8">  144 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&quot;jstyleson&quot;</span><span class="r14">, </span><span class="r11">&quot;0.2.0&quot;</span><span class="r14">),</span><span class="r12">                                                          </span> |
|<span class="r8">  145 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&#x27;filelock&#x27;</span><span class="r14">, </span><span class="r11">&quot;3.0.12&quot;</span><span class="r14">),</span><span class="r12">                                                          </span> |
|<span class="r8">  146 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        (</span><span class="r11">&#x27;pymoo&#x27;</span><span class="r14">, </span><span class="r11">&#x27;0.4.2.2&#x27;</span><span class="r14">)</span><span class="r12">                                                             </span> |
|<span class="r8">  147 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    ]</span><span class="r12">                                                                                    </span> |
|<span class="r8">  148 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  149 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> module, version_tested </span><span class="r20">in</span><span class="r14"> modules:</span><span class="r12">                                               </span> |
|<span class="r8">  150 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(</span><span class="r12">                                               </span> |
|<span class="r8">  151 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;</span><span class="r22">%s</span><span class="r11"> version: </span><span class="r22">%s</span><span class="r11"> tested with </span><span class="r22">%s</span><span class="r11">&quot;</span><span class="r14">,</span><span class="r12">                                             </span> |
|<span class="r8">  152 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            module,</span><span class="r12">                                                                      </span> |
|<span class="r8">  153 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            importlib_metadata</span><span class="r19">.</span><span class="r14">version(module),</span><span class="r12">                                          </span> |
|<span class="r8">  154 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            version_tested,</span><span class="r12">                                                              </span> |
|<span class="r8">  155 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        )</span><span class="r12">                                                                                </span> |
|<span class="r8">  156 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  157 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  158 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">createDirectories</span><span class="r14">(cache, json_path):</span><span class="r12">                                                 </span> |
|<span class="r8">  159 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirBase&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">mkdir(parents</span><span class="r19">=</span><span class="r13">True</span><span class="r14">, exist_ok</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                  </span> |
|<span class="r8">  160 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirGrad&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">mkdir(parents</span><span class="r19">=</span><span class="r13">True</span><span class="r14">, exist_ok</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                  </span> |
|<span class="r8">  161 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMisc&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">mkdir(parents</span><span class="r19">=</span><span class="r13">True</span><span class="r14">, exist_ok</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                  </span> |
|<span class="r8">  162 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirSpace&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">mkdir(parents</span><span class="r19">=</span><span class="r13">True</span><span class="r14">, exist_ok</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                 </span> |
|<span class="r8">  163 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirEvo&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">mkdir(parents</span><span class="r19">=</span><span class="r13">True</span><span class="r14">, exist_ok</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                   </span> |
|<span class="r8">  164 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirProgress&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">mkdir(parents</span><span class="r19">=</span><span class="r13">True</span><span class="r14">, exist_ok</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">              </span> |
|<span class="r8">  165 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMeta&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">mkdir(parents</span><span class="r19">=</span><span class="r13">True</span><span class="r14">, exist_ok</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                  </span> |
|<span class="r8">  166 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirLog&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">mkdir(parents</span><span class="r19">=</span><span class="r13">True</span><span class="r14">, exist_ok</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                   </span> |
|<span class="r8">  167 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMCMC&quot;</span><span class="r14">]</span><span class="r19">.</span><span class="r14">mkdir(parents</span><span class="r19">=</span><span class="r13">True</span><span class="r14">, exist_ok</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                  </span> |
|<span class="r8">  168 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  169 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r21"># copy simulation setting file to result base directory</span><span class="r12">                              </span> |
|<span class="r8">  170 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">try</span><span class="r14">:</span><span class="r12">                                                                                 </span> |
|<span class="r8">  171 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        shutil</span><span class="r19">.</span><span class="r14">copy(</span><span class="r18">str</span><span class="r14">(json_path), </span><span class="r18">str</span><span class="r14">(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirBase&quot;</span><span class="r14">]))</span><span class="r12">               </span> |
|<span class="r8">  172 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">except</span><span class="r14"> shutil</span><span class="r19">.</span><span class="r14">SameFileError:</span><span class="r12">                                                         </span> |
|<span class="r8">  173 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">pass</span><span class="r12">                                                                             </span> |
|<span class="r8">  174 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  175 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  176 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">createCSV</span><span class="r14">(cache):</span><span class="r12">                                                                    </span> |
|<span class="r8">  177 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    path </span><span class="r19">=</span><span class="r14"> Path(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirBase&quot;</span><span class="r14">], cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;csv&quot;</span><span class="r14">])</span><span class="r12">                 </span> |
|<span class="r8">  178 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> path</span><span class="r19">.</span><span class="r14">exists():</span><span class="r12">                                                                </span> |
|<span class="r8">  179 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">with</span><span class="r14"> path</span><span class="r19">.</span><span class="r14">open(</span><span class="r11">&quot;w&quot;</span><span class="r14">, newline</span><span class="r19">=</span><span class="r11">&quot;&quot;</span><span class="r14">) </span><span class="r13">as</span><span class="r14"> csvfile:</span><span class="r12">                                      </span> |
|<span class="r8">  180 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            writer </span><span class="r19">=</span><span class="r14"> csv</span><span class="r19">.</span><span class="r14">writer(csvfile, delimiter</span><span class="r19">=</span><span class="r11">&quot;,&quot;</span><span class="r14">, quoting</span><span class="r19">=</span><span class="r14">csv</span><span class="r19">.</span><span class="r14">QUOTE_ALL)</span><span class="r12">           </span> |
|<span class="r8">  181 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            writer</span><span class="r19">.</span><span class="r14">writerow(cache</span><span class="r19">.</span><span class="r14">headers)</span><span class="r12">                                               </span> |
|<span class="r8">  182 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  183 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    path </span><span class="r19">=</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMeta&quot;</span><span class="r14">] </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;results.csv&quot;</span><span class="r12">                              </span> |
|<span class="r8">  184 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> path</span><span class="r19">.</span><span class="r14">exists():</span><span class="r12">                                                                </span> |
|<span class="r8">  185 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">with</span><span class="r14"> path</span><span class="r19">.</span><span class="r14">open(</span><span class="r11">&quot;w&quot;</span><span class="r14">, newline</span><span class="r19">=</span><span class="r11">&quot;&quot;</span><span class="r14">) </span><span class="r13">as</span><span class="r14"> csvfile:</span><span class="r12">                                      </span> |
|<span class="r8">  186 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            writer </span><span class="r19">=</span><span class="r14"> csv</span><span class="r19">.</span><span class="r14">writer(csvfile, delimiter</span><span class="r19">=</span><span class="r11">&quot;,&quot;</span><span class="r14">, quoting</span><span class="r19">=</span><span class="r14">csv</span><span class="r19">.</span><span class="r14">QUOTE_ALL)</span><span class="r12">           </span> |
|<span class="r8">  187 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            writer</span><span class="r19">.</span><span class="r14">writerow(cache</span><span class="r19">.</span><span class="r14">headers)</span><span class="r12">                                               </span> |
|<span class="r8">  188 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  189 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  190 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">createProgressCSV</span><span class="r14">(cache):</span><span class="r12">                                                            </span> |
|<span class="r8">  191 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    path </span><span class="r19">=</span><span class="r14"> Path(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirBase&quot;</span><span class="r14">], </span><span class="r11">&quot;progress.csv&quot;</span><span class="r14">)</span><span class="r12">                        </span> |
|<span class="r8">  192 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">progress_path </span><span class="r19">=</span><span class="r14"> path</span><span class="r12">                                                           </span> |
|<span class="r8">  193 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> path</span><span class="r19">.</span><span class="r14">exists():</span><span class="r12">                                                                </span> |
|<span class="r8">  194 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">with</span><span class="r14"> path</span><span class="r19">.</span><span class="r14">open(</span><span class="r11">&quot;w&quot;</span><span class="r14">, newline</span><span class="r19">=</span><span class="r11">&quot;&quot;</span><span class="r14">) </span><span class="r13">as</span><span class="r14"> csvfile:</span><span class="r12">                                      </span> |
|<span class="r8">  195 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            writer </span><span class="r19">=</span><span class="r14"> csv</span><span class="r19">.</span><span class="r14">writer(csvfile, delimiter</span><span class="r19">=</span><span class="r11">&quot;,&quot;</span><span class="r14">, quoting</span><span class="r19">=</span><span class="r14">csv</span><span class="r19">.</span><span class="r14">QUOTE_ALL)</span><span class="r12">           </span> |
|<span class="r8">  196 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            writer</span><span class="r19">.</span><span class="r14">writerow(cache</span><span class="r19">.</span><span class="r14">progress_headers)</span><span class="r12">                                      </span> |
|<span class="r8">  197 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  198 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  199 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">createErrorCSV</span><span class="r14">(cache):</span><span class="r12">                                                               </span> |
|<span class="r8">  200 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    path </span><span class="r19">=</span><span class="r14"> Path(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirBase&quot;</span><span class="r14">], </span><span class="r11">&quot;error.csv&quot;</span><span class="r14">)</span><span class="r12">                           </span> |
|<span class="r8">  201 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    cache</span><span class="r19">.</span><span class="r14">error_path </span><span class="r19">=</span><span class="r14"> path</span><span class="r12">                                                              </span> |
|<span class="r8">  202 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> path</span><span class="r19">.</span><span class="r14">exists():</span><span class="r12">                                                                </span> |
|<span class="r8">  203 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">with</span><span class="r14"> path</span><span class="r19">.</span><span class="r14">open(</span><span class="r11">&quot;w&quot;</span><span class="r14">, newline</span><span class="r19">=</span><span class="r11">&quot;&quot;</span><span class="r14">) </span><span class="r13">as</span><span class="r14"> csvfile:</span><span class="r12">                                      </span> |
|<span class="r8">  204 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            writer </span><span class="r19">=</span><span class="r14"> csv</span><span class="r19">.</span><span class="r14">writer(csvfile, delimiter</span><span class="r19">=</span><span class="r11">&quot;,&quot;</span><span class="r14">, quoting</span><span class="r19">=</span><span class="r14">csv</span><span class="r19">.</span><span class="r14">QUOTE_ALL)</span><span class="r12">           </span> |
|<span class="r8">  205 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            writer</span><span class="r19">.</span><span class="r14">writerow(</span><span class="r12">                                                             </span> |
|<span class="r8">  206 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                cache</span><span class="r19">.</span><span class="r14">parameter_headers </span><span class="r19">+</span><span class="r14"> [</span><span class="r11">&quot;Return Code&quot;</span><span class="r14">, </span><span class="r11">&quot;STDOUT&quot;</span><span class="r14">, </span><span class="r11">&quot;STDERR&quot;</span><span class="r14">]</span><span class="r12">            </span> |
|<span class="r8">  207 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            )</span><span class="r12">                                                                            </span> |
|<span class="r8">  208 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  209 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  210 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">setTemplateValues</span><span class="r14">(simulation, set_values):</span><span class="r12">                                           </span> |
|<span class="r8">  211 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> path, index, value </span><span class="r20">in</span><span class="r14"> set_values:</span><span class="r12">                                                </span> |
|<span class="r8">  212 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> index </span><span class="r19">&gt;=</span><span class="r14"> </span><span class="r19">0</span><span class="r14">:</span><span class="r12">                                                                   </span> |
|<span class="r8">  213 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            simulation[path][index] </span><span class="r19">=</span><span class="r14"> value</span><span class="r12">                                              </span> |
|<span class="r8">  214 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                            </span> |
|<span class="r8">  215 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            simulation[path] </span><span class="r19">=</span><span class="r14"> value</span><span class="r12">                                                     </span> |
|<span class="r8">  216 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  217 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  218 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">setTemplateValuesAuto</span><span class="r14">(simulation, set_values_auto, cache):</span><span class="r12">                           </span> |
|<span class="r8">  219 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;mcmc_h5&quot;</span><span class="r14"> </span><span class="r20">not</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">settings:</span><span class="r12">                                                  </span> |
|<span class="r8">  220 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">error(</span><span class="r12">                                              </span> |
|<span class="r8">  221 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;set_values_auto can&#x27;t be used without mcmc_h5 as a prior&quot;</span><span class="r12">                   </span> |
|<span class="r8">  222 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        )</span><span class="r12">                                                                                </span> |
|<span class="r8">  223 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  224 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    mcmc_h5 </span><span class="r19">=</span><span class="r14"> Path(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;mcmc_h5&quot;</span><span class="r14">])</span><span class="r12">                                            </span> |
|<span class="r8">  225 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    mle_h5 </span><span class="r19">=</span><span class="r14"> mcmc_h5</span><span class="r19">.</span><span class="r14">parent </span><span class="r19">/</span><span class="r14"> </span><span class="r11">&quot;mle.h5&quot;</span><span class="r12">                                                   </span> |
|<span class="r8">  226 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  227 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    data </span><span class="r19">=</span><span class="r14"> H5()</span><span class="r12">                                                                          </span> |
|<span class="r8">  228 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    data</span><span class="r19">.</span><span class="r14">filename </span><span class="r19">=</span><span class="r14"> mle_h5</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                                                    </span> |
|<span class="r8">  229 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    data</span><span class="r19">.</span><span class="r14">load(lock</span><span class="r19">=</span><span class="r13">True</span><span class="r14">)</span><span class="r12">                                                                 </span> |
|<span class="r8">  230 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    stat_MLE </span><span class="r19">=</span><span class="r14"> data</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">stat_MLE</span><span class="r12">                                                        </span> |
|<span class="r8">  231 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  232 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    used </span><span class="r19">=</span><span class="r14"> </span><span class="r18">set</span><span class="r14">()</span><span class="r12">                                                                         </span> |
|<span class="r8">  233 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  234 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> path, index, mle_index </span><span class="r20">in</span><span class="r14"> set_values_auto:</span><span class="r12">                                       </span> |
|<span class="r8">  235 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        value </span><span class="r19">=</span><span class="r14"> stat_MLE[mle_index]</span><span class="r12">                                                      </span> |
|<span class="r8">  236 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> mle_index </span><span class="r20">not</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> used:</span><span class="r12">                                                        </span> |
|<span class="r8">  237 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            used</span><span class="r19">.</span><span class="r14">add(mle_index)</span><span class="r12">                                                          </span> |
|<span class="r8">  238 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> index </span><span class="r19">&gt;=</span><span class="r14"> </span><span class="r19">0</span><span class="r14">:</span><span class="r12">                                                                   </span> |
|<span class="r8">  239 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            simulation[path][index] </span><span class="r19">=</span><span class="r14"> value</span><span class="r12">                                              </span> |
|<span class="r8">  240 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">else</span><span class="r14">:</span><span class="r12">                                                                            </span> |
|<span class="r8">  241 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            simulation[path] </span><span class="r19">=</span><span class="r14"> value</span><span class="r12">                                                     </span> |
|<span class="r8">  242 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  243 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> </span><span class="r18">len</span><span class="r14">(used) </span><span class="r19">!=</span><span class="r14"> </span><span class="r18">len</span><span class="r14">(stat_MLE):</span><span class="r12">                                                       </span> |
|<span class="r8">  244 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">warn(</span><span class="r12">                                               </span> |
|<span class="r8">  245 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r11">&quot;not all values from the prior where used, proceed with caution&quot;</span><span class="r12">             </span> |
|<span class="r8">  246 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        )</span><span class="r12">                                                                                </span> |
|<span class="r8">  247 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  248 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  249 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">setupTemplates</span><span class="r14">(cache):</span><span class="r12">                                                               </span> |
|<span class="r8">  250 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r11">&quot;setup all the experimental templates&quot;</span><span class="r12">                                               </span> |
|<span class="r8">  251 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">for</span><span class="r14"> experiment </span><span class="r20">in</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;experiments&quot;</span><span class="r14">]:</span><span class="r12">                                     </span> |
|<span class="r8">  252 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        HDF5 </span><span class="r19">=</span><span class="r14"> experiment[</span><span class="r11">&quot;HDF5&quot;</span><span class="r14">]</span><span class="r12">                                                        </span> |
|<span class="r8">  253 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        name </span><span class="r19">=</span><span class="r14"> experiment[</span><span class="r11">&quot;name&quot;</span><span class="r14">]</span><span class="r12">                                                        </span> |
|<span class="r8">  254 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  255 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        template_path </span><span class="r19">=</span><span class="r14"> Path(cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMisc&quot;</span><span class="r14">], </span><span class="r11">&quot;template_</span><span class="r22">%s</span><span class="r11">.h5&quot;</span><span class="r14"> </span><span class="r19">%</span><span class="r14"> name)</span><span class="r12">  </span> |
|<span class="r8">  256 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  257 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        template </span><span class="r19">=</span><span class="r14"> Cadet()</span><span class="r12">                                                               </span> |
|<span class="r8">  258 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  259 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21"># load based on where the HDF5 file is</span><span class="r12">                                           </span> |
|<span class="r8">  260 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        template</span><span class="r19">.</span><span class="r14">filename </span><span class="r19">=</span><span class="r14"> HDF5</span><span class="r12">                                                         </span> |
|<span class="r8">  261 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        template</span><span class="r19">.</span><span class="r14">load()</span><span class="r12">                                                                  </span> |
|<span class="r8">  262 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        template</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">experiment_name </span><span class="r19">=</span><span class="r14"> name</span><span class="r12">                                             </span> |
|<span class="r8">  263 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  264 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;set_values&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> experiment:</span><span class="r12">                                                   </span> |
|<span class="r8">  265 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            setTemplateValues(template, experiment[</span><span class="r11">&quot;set_values&quot;</span><span class="r14">])</span><span class="r12">                        </span> |
|<span class="r8">  266 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  267 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> </span><span class="r11">&quot;set_values_auto&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> experiment:</span><span class="r12">                                              </span> |
|<span class="r8">  268 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            setTemplateValuesAuto(template, experiment[</span><span class="r11">&quot;set_values_auto&quot;</span><span class="r14">], cache)</span><span class="r12">        </span> |
|<span class="r8">  269 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  270 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        util</span><span class="r19">.</span><span class="r14">setupSimulation(template, cache</span><span class="r19">.</span><span class="r14">target[name][</span><span class="r11">&quot;time&quot;</span><span class="r14">], name, cache)</span><span class="r12">          </span> |
|<span class="r8">  271 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  272 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        start </span><span class="r19">=</span><span class="r14"> time</span><span class="r19">.</span><span class="r14">time()</span><span class="r12">                                                              </span> |
|<span class="r8">  273 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        util</span><span class="r19">.</span><span class="r14">runExperiment(</span><span class="r12">                                                              </span> |
|<span class="r8">  274 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">None</span><span class="r14">,</span><span class="r12">                                                                        </span> |
|<span class="r8">  275 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            experiment,</span><span class="r12">                                                                  </span> |
|<span class="r8">  276 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            cache</span><span class="r19">.</span><span class="r14">settings,</span><span class="r12">                                                              </span> |
|<span class="r8">  277 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            cache</span><span class="r19">.</span><span class="r14">target,</span><span class="r12">                                                                </span> |
|<span class="r8">  278 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            template,</span><span class="r12">                                                                    </span> |
|<span class="r8">  279 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            experiment</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;timeout&quot;</span><span class="r14">, </span><span class="r19">1800</span><span class="r14">),</span><span class="r12">                                             </span> |
|<span class="r8">  280 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            cache,</span><span class="r12">                                                                       </span> |
|<span class="r8">  281 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        )</span><span class="r12">                                                                                </span> |
|<span class="r8">  282 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        elapsed </span><span class="r19">=</span><span class="r14"> time</span><span class="r19">.</span><span class="r14">time() </span><span class="r19">-</span><span class="r14"> start</span><span class="r12">                                                    </span> |
|<span class="r8">  283 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  284 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(</span><span class="r11">&quot;simulation took </span><span class="r22">%s</span><span class="r11">&quot;</span><span class="r14">, elapsed)</span><span class="r12">                 </span> |
|<span class="r8">  285 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  286 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21"># timeout needs to be stored in the template so all processes have it without cal</span> |
|<span class="r8">  287 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        template</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">timeout </span><span class="r19">=</span><span class="r14"> </span><span class="r18">max</span><span class="r14">(</span><span class="r19">10</span><span class="r14">, elapsed </span><span class="r19">*</span><span class="r14"> </span><span class="r19">10</span><span class="r14">)</span><span class="r12">                                    </span> |
|<span class="r8">  288 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  289 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> (</span><span class="r12">                                                                             </span> |
|<span class="r8">  290 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;searchMethod&quot;</span><span class="r14">] </span><span class="r19">!=</span><span class="r14"> </span><span class="r11">&quot;MCMC&quot;</span><span class="r12">                                     </span> |
|<span class="r8">  291 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r20">and</span><span class="r14"> </span><span class="r11">&quot;errorModel&quot;</span><span class="r14"> </span><span class="r20">in</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">settings</span><span class="r12">                                           </span> |
|<span class="r8">  292 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        ):</span><span class="r12">                                                                               </span> |
|<span class="r8">  293 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r21"># the base case needs to be saved since the normal template file is what the </span> |
|<span class="r8">  294 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            template_base_path </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r12">                                                   </span> |
|<span class="r8">  295 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMisc&quot;</span><span class="r14">], </span><span class="r11">&quot;template_</span><span class="r22">%s</span><span class="r11">_base.h5&quot;</span><span class="r14"> </span><span class="r19">%</span><span class="r14"> name</span><span class="r12">           </span> |
|<span class="r8">  296 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            )</span><span class="r12">                                                                            </span> |
|<span class="r8">  297 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            template</span><span class="r19">.</span><span class="r14">filename </span><span class="r19">=</span><span class="r14"> template_base_path</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                            </span> |
|<span class="r8">  298 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            template</span><span class="r19">.</span><span class="r14">save()</span><span class="r12">                                                              </span> |
|<span class="r8">  299 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  300 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(</span><span class="r12">                                           </span> |
|<span class="r8">  301 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                </span><span class="r11">&quot;create bias template for experiment </span><span class="r22">%s</span><span class="r11">&quot;</span><span class="r14">, name</span><span class="r12">                           </span> |
|<span class="r8">  302 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            )</span><span class="r12">                                                                            </span> |
|<span class="r8">  303 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            template_bias </span><span class="r19">=</span><span class="r14"> util</span><span class="r19">.</span><span class="r14">biasSimulation(template, experiment, cache)</span><span class="r12">             </span> |
|<span class="r8">  304 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            template_bias_path </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r12">                                                   </span> |
|<span class="r8">  305 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMisc&quot;</span><span class="r14">], </span><span class="r11">&quot;template_</span><span class="r22">%s</span><span class="r11">_bias.h5&quot;</span><span class="r14"> </span><span class="r19">%</span><span class="r14"> name</span><span class="r12">           </span> |
|<span class="r8">  306 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            )</span><span class="r12">                                                                            </span> |
|<span class="r8">  307 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            template_bias</span><span class="r19">.</span><span class="r14">filename </span><span class="r19">=</span><span class="r14"> template_bias_path</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                       </span> |
|<span class="r8">  308 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            template_bias</span><span class="r19">.</span><span class="r14">save()</span><span class="r12">                                                         </span> |
|<span class="r8">  309 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            template </span><span class="r19">=</span><span class="r14"> template_bias</span><span class="r12">                                                     </span> |
|<span class="r8">  310 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  311 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21"># change to where we want the template created</span><span class="r12">                                   </span> |
|<span class="r8">  312 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        template</span><span class="r19">.</span><span class="r14">filename </span><span class="r19">=</span><span class="r14"> template_path</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                                     </span> |
|<span class="r8">  313 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  314 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        template</span><span class="r19">.</span><span class="r14">save()</span><span class="r12">                                                                  </span> |
|<span class="r8">  315 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  316 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        experiment[</span><span class="r11">&quot;simulation&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> template</span><span class="r12">                                              </span> |
|<span class="r8">  317 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  318 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        template_path </span><span class="r19">=</span><span class="r14"> Path(</span><span class="r12">                                                            </span> |
|<span class="r8">  319 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            cache</span><span class="r19">.</span><span class="r14">settings[</span><span class="r11">&quot;resultsDirMisc&quot;</span><span class="r14">], </span><span class="r11">&quot;template_</span><span class="r22">%s</span><span class="r11">_final.h5&quot;</span><span class="r14"> </span><span class="r19">%</span><span class="r14"> name</span><span class="r12">              </span> |
|<span class="r8">  320 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        )</span><span class="r12">                                                                                </span> |
|<span class="r8">  321 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        template_final </span><span class="r19">=</span><span class="r14"> Cadet(template</span><span class="r19">.</span><span class="r14">root)</span><span class="r12">                                            </span> |
|<span class="r8">  322 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        template_final</span><span class="r19">.</span><span class="r14">filename </span><span class="r19">=</span><span class="r14"> template_path</span><span class="r19">.</span><span class="r14">as_posix()</span><span class="r12">                               </span> |
|<span class="r8">  323 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r13">if</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">dynamicTolerance:</span><span class="r12">                                                       </span> |
|<span class="r8">  324 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            template_final</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">solver</span><span class="r19">.</span><span class="r14">time_integrator</span><span class="r19">.</span><span class="r14">abstol </span><span class="r19">=</span><span class="r14"> (</span><span class="r12">                  </span> |
|<span class="r8">  325 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">                util</span><span class="r19">.</span><span class="r14">get_grad_tolerance(cache, name)</span><span class="r12">                                     </span> |
|<span class="r8">  326 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            )</span><span class="r12">                                                                            </span> |
|<span class="r8">  327 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            template_final</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">input</span><span class="r19">.</span><span class="r14">solver</span><span class="r19">.</span><span class="r14">time_integrator</span><span class="r19">.</span><span class="r14">reltol </span><span class="r19">=</span><span class="r14"> </span><span class="r19">0.0</span><span class="r12">                </span> |
|<span class="r8">  328 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  329 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        start </span><span class="r19">=</span><span class="r14"> time</span><span class="r19">.</span><span class="r14">time()</span><span class="r12">                                                              </span> |
|<span class="r8">  330 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        util</span><span class="r19">.</span><span class="r14">runExperiment(</span><span class="r12">                                                              </span> |
|<span class="r8">  331 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            </span><span class="r13">None</span><span class="r14">,</span><span class="r12">                                                                        </span> |
|<span class="r8">  332 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            experiment,</span><span class="r12">                                                                  </span> |
|<span class="r8">  333 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            cache</span><span class="r19">.</span><span class="r14">settings,</span><span class="r12">                                                              </span> |
|<span class="r8">  334 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            cache</span><span class="r19">.</span><span class="r14">target,</span><span class="r12">                                                                </span> |
|<span class="r8">  335 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            template_final,</span><span class="r12">                                                              </span> |
|<span class="r8">  336 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            experiment</span><span class="r19">.</span><span class="r14">get(</span><span class="r11">&quot;timeout&quot;</span><span class="r14">, </span><span class="r19">1800</span><span class="r14">),</span><span class="r12">                                             </span> |
|<span class="r8">  337 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">            cache,</span><span class="r12">                                                                       </span> |
|<span class="r8">  338 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        )</span><span class="r12">                                                                                </span> |
|<span class="r8">  339 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        elapsed </span><span class="r19">=</span><span class="r14"> time</span><span class="r19">.</span><span class="r14">time() </span><span class="r19">-</span><span class="r14"> start</span><span class="r12">                                                    </span> |
|<span class="r8">  340 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  341 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(</span><span class="r11">&quot;simulation final took </span><span class="r22">%s</span><span class="r11">&quot;</span><span class="r14">, elapsed)</span><span class="r12">           </span> |
|<span class="r8">  342 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  343 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r21"># timeout needs to be stored in the template so all processes have it without cal</span> |
|<span class="r8">  344 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        template_final</span><span class="r19">.</span><span class="r14">root</span><span class="r19">.</span><span class="r14">timeout </span><span class="r19">=</span><span class="r14"> </span><span class="r18">max</span><span class="r14">(</span><span class="r19">10</span><span class="r14">, elapsed </span><span class="r19">*</span><span class="r14"> </span><span class="r19">10</span><span class="r14">)</span><span class="r12">                              </span> |
|<span class="r8">  345 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  346 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        template_final</span><span class="r19">.</span><span class="r14">save()</span><span class="r12">                                                            </span> |
|<span class="r8">  347 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        experiment[</span><span class="r11">&quot;simulation_final&quot;</span><span class="r14">] </span><span class="r19">=</span><span class="r14"> template_final</span><span class="r12">                                  </span> |
|<span class="r8">  348 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  349 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  350 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">def</span><span class="r14"> </span><span class="r17">continue_mcmc</span><span class="r14">(cache, map_function):</span><span class="r12">                                                  </span> |
|<span class="r8">  351 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    </span><span class="r13">if</span><span class="r14"> cache</span><span class="r19">.</span><span class="r14">continueMCMC:</span><span class="r12">                                                               </span> |
|<span class="r8">  352 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        json_path </span><span class="r19">=</span><span class="r14"> util</span><span class="r19">.</span><span class="r14">setupMCMC(cache)</span><span class="r12">                                                </span> |
|<span class="r8">  353 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(json_path)</span><span class="r12">                                     </span> |
|<span class="r8">  354 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  355 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        setup(cache, json_path, map_function)</span><span class="r12">                                            </span> |
|<span class="r8">  356 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  357 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        hof </span><span class="r19">=</span><span class="r14"> evo</span><span class="r19">.</span><span class="r14">run(cache)</span><span class="r12">                                                             </span> |
|<span class="r8">  358 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  359 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
|<span class="r8">  360 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r13">if</span><span class="r14"> </span><span class="r24">__name__</span><span class="r14"> </span><span class="r19">==</span><span class="r14"> </span><span class="r11">&quot;__main__&quot;</span><span class="r14">:</span><span class="r12">                                                               </span> |
|<span class="r8">  361 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    start </span><span class="r19">=</span><span class="r14"> time</span><span class="r19">.</span><span class="r14">time()</span><span class="r12">                                                                  </span> |
|<span class="r8">  362 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    map_function </span><span class="r19">=</span><span class="r14"> util</span><span class="r19">.</span><span class="r14">getMapFunction()</span><span class="r12">                                                 </span> |
|<span class="r8">  363 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    main(map_function</span><span class="r19">=</span><span class="r14">map_function)</span><span class="r12">                                                      </span> |
|<span class="r8">  364 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(</span><span class="r11">&quot;System has finished&quot;</span><span class="r14">)</span><span class="r12">                             </span> |
|<span class="r8">  365 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    multiprocessing</span><span class="r19">.</span><span class="r14">get_logger()</span><span class="r19">.</span><span class="r14">info(</span><span class="r12">                                                   </span> |
|<span class="r8">  366 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">        </span><span class="r11">&quot;The total runtime was </span><span class="r22">%s</span><span class="r11"> seconds&quot;</span><span class="r14"> </span><span class="r19">%</span><span class="r14"> (time</span><span class="r19">.</span><span class="r14">time() </span><span class="r19">-</span><span class="r14"> start)</span><span class="r12">                       </span> |
|<span class="r8">  367 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    )</span><span class="r12">                                                                                    </span> |
|<span class="r8">  368 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r14">    sys</span><span class="r19">.</span><span class="r14">exit()</span><span class="r12">                                                                           </span> |
|<span class="r8">  369 </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r9">       </span>|<span class="r10">       </span>|<span class="r12">                                                                                         </span> |
+---------------------------------------------------------------------------------------------------------------------------------+
generated by the <a class="r25" href="https://github.com/plasma-umass/scalene">scalene</a> profiler                                                                                                   
</pre>
    </code>
</body>
</html>
